(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[763],{5474:(e,t,r)=>{"use strict";r.d(t,{c:()=>h});var n=r(7507),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i},s=function(e,t,r){if(r||2==arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},i=function(){function e(){}return e.prototype.active=function(){return n.I},e.prototype.with=function(e,t,r){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return t.call.apply(t,s([r],a(n),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),o=r(5871),l=r(4402),u=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i},c=function(e,t,r){if(r||2==arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},d="context",p=new i,h=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return(0,o.TG)(d,e,l.G.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];return(n=this._getContextManager()).with.apply(n,c([e,t,r],u(a),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return(0,o.Rd)(d)||p},e.prototype.disable=function(){this._getContextManager().disable(),(0,o.J_)(d,l.G.instance())},e}()},4402:(e,t,r)=>{"use strict";r.d(t,{G:()=>d});var n=r(5871),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i},s=function(e,t,r){if(r||2==arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},i=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("verbose",this._namespace,e)},e}();function o(e,t,r){var i=(0,n.Rd)("diag");if(i)return r.unshift(t),i[e].apply(i,s([],a(r),!1))}var l=r(8773),u=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i},c=function(e,t,r){if(r||2==arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},d=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=(0,n.Rd)("diag");if(a)return a[e].apply(a,c([],u(t),!1))}}var t=this;t.setLogger=function(e,r){if(void 0===r&&(r={logLevel:l.n.INFO}),e===t){var a,s,i,o=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(a=o.stack)&&void 0!==a?a:o.message),!1}"number"==typeof r&&(r={logLevel:r});var u=(0,n.Rd)("diag"),c=function(e,t){function r(r,n){var a=t[r];return"function"==typeof a&&e>=n?a.bind(t):function(){}}return e<l.n.NONE?e=l.n.NONE:e>l.n.ALL&&(e=l.n.ALL),t=t||{},{error:r("error",l.n.ERROR),warn:r("warn",l.n.WARN),info:r("info",l.n.INFO),debug:r("debug",l.n.DEBUG),verbose:r("verbose",l.n.VERBOSE)}}(null!==(s=r.logLevel)&&void 0!==s?s:l.n.INFO,e);if(u&&!r.suppressOverrideMessage){var d=null!==(i=Error().stack)&&void 0!==i?i:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+d),c.warn("Current logger will overwrite one already registered from "+d)}return(0,n.TG)("diag",c,t,!0)},t.disable=function(){(0,n.J_)("diag",t)},t.createComponentLogger=function(e){return new i(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},7507:(e,t,r)=>{"use strict";function n(e){return Symbol.for(e)}r.d(t,{I:()=>a,Y:()=>n});var a=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var a=new e(r._currentContext);return a._currentContext.set(t,n),a},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}}},8773:(e,t,r)=>{"use strict";var n;r.d(t,{n:()=>n}),function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(n||(n={}))},1766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DiagConsoleLogger:()=>g,DiagLogLevel:()=>y.n,INVALID_SPANID:()=>X.fQ,INVALID_SPAN_CONTEXT:()=>X.Rr,INVALID_TRACEID:()=>X.AE,ProxyTracer:()=>Z.T,ProxyTracerProvider:()=>q.K,ROOT_CONTEXT:()=>f.I,SamplingDecision:()=>a,SpanKind:()=>s,SpanStatusCode:()=>F.Q,TraceFlags:()=>H.r,ValueType:()=>n,baggageEntryMetadataFromString:()=>h,context:()=>Q,createContextKey:()=>f.Y,createNoopMeter:()=>L,createTraceState:()=>W,default:()=>em,defaultTextMapGetter:()=>D,defaultTextMapSetter:()=>U,diag:()=>ee,isSpanContextValid:()=>K.BM,isValidSpanId:()=>K.Lc,isValidTraceId:()=>K.jN,metrics:()=>ea,propagation:()=>eh,trace:()=>ef.g});var n,a,s,i=r(4402),o=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i},l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=o(e,2);return[t[0],t[1]]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t,r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var s=new e(this._entries);try{for(var i=l(n),o=i.next();!o.done;o=i.next()){var u=o.value;s._entries.delete(u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return s},e.prototype.clear=function(){return new e},e}(),c=Symbol("BaggageEntryMetadata"),d=i.G.instance();function p(e){return void 0===e&&(e={}),new u(new Map(Object.entries(e)))}function h(e){return"string"!=typeof e&&(d.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:c,toString:function(){return e}}}var f=r(7507),m=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],g=function(){for(var e=0;e<m.length;e++)this[m[e].n]=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(console){var n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}(m[e].c)},y=r(8773),v=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),b=function(){function e(){}return e.prototype.createGauge=function(e,t){return I},e.prototype.createHistogram=function(e,t){return O},e.prototype.createCounter=function(e,t){return P},e.prototype.createUpDownCounter=function(e,t){return N},e.prototype.createObservableGauge=function(e,t){return j},e.prototype.createObservableCounter=function(e,t){return $},e.prototype.createObservableUpDownCounter=function(e,t){return M},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),_=function(){},w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.add=function(e,t){},t}(_),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.add=function(e,t){},t}(_),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.record=function(e,t){},t}(_),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.record=function(e,t){},t}(_),E=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t}(E),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t}(E),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t}(E),R=new b,P=new w,I=new S,O=new k,N=new x,$=new T,j=new C,M=new A;function L(){return R}!function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(n||(n={}));var D={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},U={set:function(e,t,r){null!=e&&(e[t]=r)}},Z=r(790),q=r(3497);!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(a||(a={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(s||(s={}));var F=r(153),H=r(4345),B="[_0-9a-z-*/]",z=RegExp("^(?:[a-z]"+B+"{0,255}|"+("[a-z0-9]"+B)+"{0,240}@[a-z]"+B+"{0,13})$"),V=/^[ -~]{0,255}[!-~]$/,J=/,|=/,G=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,r){return t.push(r+"="+e.get(r)),t},[]).join(",")},e.prototype._parse=function(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce(function(e,t){var r=t.trim(),n=r.indexOf("=");if(-1!==n){var a=r.slice(0,n),s=r.slice(n+1,t.length);z.test(a)&&V.test(s)&&!J.test(s)&&e.set(a,s)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function W(e){return new G(e)}var K=r(5867),X=r(1900),Y=r(5474),Q=Y.c.getInstance(),ee=i.G.instance(),et=new(function(){function e(){}return e.prototype.getMeter=function(e,t,r){return R},e}()),er=r(5871),en="metrics",ea=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return(0,er.TG)(en,e,i.G.instance())},e.prototype.getMeterProvider=function(){return(0,er.Rd)(en)||et},e.prototype.getMeter=function(e,t,r){return this.getMeterProvider().getMeter(e,t,r)},e.prototype.disable=function(){(0,er.J_)(en,i.G.instance())},e})().getInstance(),es=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),ei=(0,f.Y)("OpenTelemetry Baggage Key");function eo(e){return e.getValue(ei)||void 0}function el(){return eo(Y.c.getInstance().active())}function eu(e,t){return e.setValue(ei,t)}function ec(e){return e.deleteValue(ei)}var ed="propagation",ep=new es,eh=(function(){function e(){this.createBaggage=p,this.getBaggage=eo,this.getActiveBaggage=el,this.setBaggage=eu,this.deleteBaggage=ec}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return(0,er.TG)(ed,e,i.G.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=U),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=D),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){(0,er.J_)(ed,i.G.instance())},e.prototype._getGlobalPropagator=function(){return(0,er.Rd)(ed)||ep},e})().getInstance(),ef=r(9487);let em={context:Q,diag:ee,metrics:ea,propagation:eh,trace:ef.g}},5871:(e,t,r)=>{"use strict";r.d(t,{Rd:()=>u,TG:()=>l,J_:()=>c});var n="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},a="1.9.0",s=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,i=function(e){var t=new Set([e]),r=new Set,n=e.match(s);if(!n)return function(){return!1};var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=a.prerelease)return function(t){return t===e};function i(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(s);if(!n)return i(e);var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=o.prerelease||a.major!==o.major?i(e):0===a.major?a.minor===o.minor&&a.patch<=o.patch?(t.add(e),!0):i(e):a.minor<=o.minor?(t.add(e),!0):i(e)}}(a),o=Symbol.for("opentelemetry.js.api."+a.split(".")[0]);function l(e,t,r,s){void 0===s&&(s=!1);var i,l=n[o]=null!==(i=n[o])&&void 0!==i?i:{version:a};if(!s&&l[e]){var u=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(u.stack||u.message),!1}if(l.version!==a){var u=Error("@opentelemetry/api: Registration of version v"+l.version+" for "+e+" does not match previously registered API v"+a);return r.error(u.stack||u.message),!1}return l[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+a+"."),!0}function u(e){var t,r,a=null===(t=n[o])||void 0===t?void 0:t.version;if(a&&i(a))return null===(r=n[o])||void 0===r?void 0:r[e]}function c(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+a+".");var r=n[o];r&&delete r[e]}},9487:(e,t,r)=>{"use strict";r.d(t,{g:()=>u});var n=r(5871),a=r(3497),s=r(5867),i=r(4668),o=r(4402),l="trace",u=(function(){function e(){this._proxyTracerProvider=new a.K,this.wrapSpanContext=s.kw,this.isSpanContextValid=s.BM,this.deleteSpan=i.TW,this.getSpan=i.Br,this.getActiveSpan=i.HN,this.getSpanContext=i.A3,this.setSpan=i.WZ,this.setSpanContext=i.G3}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=(0,n.TG)(l,this._proxyTracerProvider,o.G.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return(0,n.Rd)(l)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){(0,n.J_)(l,o.G.instance()),this._proxyTracerProvider=new a.K},e})().getInstance()},7003:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(1900),a=function(){function e(e){void 0===e&&(e=n.Rr),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}()},7816:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var n=r(5474),a=r(4668),s=r(7003),i=r(5867),o=n.c.getInstance(),l=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=o.active()),null==t?void 0:t.root)return new s.s;var n=r&&(0,a.A3)(r);return"object"==typeof n&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&(0,i.BM)(n)?new s.s(n):new s.s},e.prototype.startActiveSpan=function(e,t,r,n){if(!(arguments.length<2)){2==arguments.length?l=t:3==arguments.length?(s=t,l=r):(s=t,i=r,l=n);var s,i,l,u=null!=i?i:o.active(),c=this.startSpan(e,s,u),d=(0,a.WZ)(u,c);return o.with(d,l,void 0,c)}},e}()},790:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});var n=new(r(7816)).E,a=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n},e}()},3497:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(790),a=r(7816),s=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new a.E},e}()),i=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var a;return null!==(a=this.getDelegateTracer(e,t,r))&&void 0!==a?a:new n.T(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:s},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)},e}()},4668:(e,t,r)=>{"use strict";r.d(t,{A3:()=>p,Br:()=>o,G3:()=>d,HN:()=>l,TW:()=>c,WZ:()=>u});var n=r(7507),a=r(7003),s=r(5474),i=(0,n.Y)("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(i)||void 0}function l(){return o(s.c.getInstance().active())}function u(e,t){return e.setValue(i,t)}function c(e){return e.deleteValue(i)}function d(e,t){return u(e,new a.s(t))}function p(e){var t;return null===(t=o(e))||void 0===t?void 0:t.spanContext()}},1900:(e,t,r)=>{"use strict";r.d(t,{AE:()=>s,Rr:()=>i,fQ:()=>a});var n=r(4345),a="0000000000000000",s="00000000000000000000000000000000",i={traceId:s,spanId:a,traceFlags:n.r.NONE}},5867:(e,t,r)=>{"use strict";r.d(t,{BM:()=>u,Lc:()=>l,jN:()=>o,kw:()=>c});var n=r(1900),a=r(7003),s=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(e){return s.test(e)&&e!==n.AE}function l(e){return i.test(e)&&e!==n.fQ}function u(e){return o(e.traceId)&&l(e.spanId)}function c(e){return new a.s(e)}},153:(e,t,r)=>{"use strict";var n;r.d(t,{Q:()=>n}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(n||(n={}))},4345:(e,t,r)=>{"use strict";var n;r.d(t,{r:()=>n}),function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(n||(n={}))},676:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};function i(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function o(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,a]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=a?a:"true"))}catch{}}return t}function l(e){var t,r;if(!e)return;let[[n,a],...s]=o(e),{domain:i,expires:l,httponly:d,maxage:p,path:h,samesite:f,secure:m,partitioned:g,priority:y}=Object.fromEntries(s.map(([e,t])=>[e.toLowerCase(),t]));return function(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}({name:n,value:decodeURIComponent(a),domain:i,...l&&{expires:new Date(l)},...d&&{httpOnly:!0},..."string"==typeof p&&{maxAge:Number(p)},path:h,...f&&{sameSite:u.includes(t=(t=f).toLowerCase())?t:void 0},...m&&{secure:!0},...y&&{priority:c.includes(r=(r=y).toLowerCase())?r:void 0},...g&&{partitioned:!0}})}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(s,{RequestCookies:()=>d,ResponseCookies:()=>p,parseCookie:()=>o,parseSetCookie:()=>l,stringifyCookie:()=>i}),e.exports=((e,s,i,o)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let l of n(s))a.call(e,l)||l===i||t(e,l,{get:()=>s[l],enumerable:!(o=r(s,l))||o.enumerable});return e})(t({},"__esModule",{value:!0}),s);var u=["strict","lax","none"],c=["low","medium","high"],d=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of o(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>i(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>i(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},p=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;let a=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(let e of Array.isArray(a)?a:function(e){if(!e)return[];var t,r,n,a,s,i=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,s=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),a=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(s=!0,o=a,i.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!s||o>=e.length)&&i.push(e.substring(t,e.length))}return i}(a)){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,a=this._parsed;return a.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=i(r);t.append("set-cookie",e)}}(a,this._headers),this}delete(...e){let[t,r,n]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:n,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(i).join("; ")}}},4337:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var t={};(()=>{t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var a={},s=t.split(n),i=(r||{}).decode||e,o=0;o<s.length;o++){var l=s[o],u=l.indexOf("=");if(!(u<0)){var c=l.substr(0,u).trim(),d=l.substr(++u,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==a[c]&&(a[c]=function(e,t){try{return t(e)}catch(t){return e}}(d,i))}}return a},t.serialize=function(e,t,n){var s=n||{},i=s.encode||r;if("function"!=typeof i)throw TypeError("option encode is invalid");if(!a.test(e))throw TypeError("argument name is invalid");var o=i(t);if(o&&!a.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=s.maxAge){var u=s.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(s.domain){if(!a.test(s.domain))throw TypeError("option domain is invalid");l+="; Domain="+s.domain}if(s.path){if(!a.test(s.path))throw TypeError("option path is invalid");l+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(l+="; HttpOnly"),s.secure&&(l+="; Secure"),s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var e=decodeURIComponent,r=encodeURIComponent,n=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},5996:e=>{(()=>{"use strict";var t={806:(e,t,r)=>{let n=r(190),a=Symbol("max"),s=Symbol("length"),i=Symbol("lengthCalculator"),o=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),h=Symbol("updateAgeOnGet"),f=()=>1;class m{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[a]=e.max||1/0;let t=e.length||f;if(this[i]="function"!=typeof t?f:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[h]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[a]=e||1/0,v(this)}get max(){return this[a]}set allowStale(e){this[o]=!!e}get allowStale(){return this[o]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[l]=e,v(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[i]&&(this[i]=e,this[s]=0,this[d].forEach(e=>{e.length=this[i](e.value,e.key),this[s]+=e.length})),v(this)}get lengthCalculator(){return this[i]}get length(){return this[s]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){let n=r.prev;w(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){let n=r.next;w(this,e,r,t),r=n}}keys(){return this[d].toArray().map(e=>e.key)}values(){return this[d].toArray().map(e=>e.value)}reset(){this[u]&&this[d]&&this[d].length&&this[d].forEach(e=>this[u](e.key,e.value)),this[p]=new Map,this[d]=new n,this[s]=0}dump(){return this[d].map(e=>!y(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let n=r?Date.now():0,o=this[i](t,e);if(this[p].has(e)){if(o>this[a])return b(this,this[p].get(e)),!1;let i=this[p].get(e).value;return this[u]&&!this[c]&&this[u](e,i.value),i.now=n,i.maxAge=r,i.value=t,this[s]+=o-i.length,i.length=o,this.get(e),v(this),!0}let h=new _(e,t,o,n,r);return h.length>this[a]?(this[u]&&this[u](e,t),!1):(this[s]+=h.length,this[d].unshift(h),this[p].set(e,this[d].head),v(this),!0)}has(e){return!!this[p].has(e)&&!y(this,this[p].get(e).value)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){let e=this[d].tail;return e?(b(this,e),e.value):null}del(e){b(this,this[p].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],a=n.e||0;if(0===a)this.set(n.k,n.v);else{let e=a-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach((e,t)=>g(this,t,!1))}}let g=(e,t,r)=>{let n=e[p].get(t);if(n){let t=n.value;if(y(e,t)){if(b(e,n),!e[o])return}else r&&(e[h]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},y=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},v=e=>{if(e[s]>e[a])for(let t=e[d].tail;e[s]>e[a]&&null!==t;){let r=t.prev;b(e,t),t=r}},b=(e,t)=>{if(t){let r=t.value;e[u]&&e[u](r.key,r.value),e[s]-=r.length,e[p].delete(r.key),e[d].removeNode(t)}};class _{constructor(e,t,r,n,a){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=a||0}}let w=(e,t,r,n)=>{let a=r.value;y(e,a)&&(b(e,r),e[o]||(a=void 0)),a&&t.call(n,a.value,a.key,e)};e.exports=m},76:e=>{e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},190:(e,t,r)=>{function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,a=arguments.length;r<a;r++)t.push(arguments[r]);return t}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.tail=new a(e,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},n.prototype.unshift=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.head=new a(e,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,a=this.head;null!==a;)r.push(e.call(t,a.value,this)),a=a.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,a=this.tail;null!==a;)r.push(e.call(t,a.value,this)),a=a.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var a=0;null!==n;a++)r=e(r,n.value,a),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;null!==n;a--)r=e(r,n.value,a),n=n.prev;return r},n.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=0,s=this.head;null!==s&&a<e;a++)s=s.next;for(;null!==s&&a<t;a++,s=s.next)r.push(s.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=this.length,s=this.tail;null!==s&&a>t;a--)s=s.prev;for(;null!==s&&a>e;a--,s=s.prev)r.push(s.value);return r},n.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;for(var s=[],r=0;n&&r<t;r++)s.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=2;r<arguments.length;r++)n=function(e,t,r){var n=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}(this,n,arguments[r]);return s},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(76)(n)}catch(e){}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}},i=!0;try{t[e](s,s.exports,n),i=!1}finally{i&&delete r[e]}return s.exports}n.ab="//";var a=n(806);e.exports=a})()},7960:(e,t,r)=>{!function(){var t={452:function(e){"use strict";e.exports=r(5028)}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},i=!0;try{t[e](s,s.exports,a),i=!1}finally{i&&delete n[e]}return s.exports}a.ab="//";var s={};!function(){var e,t=(e=a(452))&&"object"==typeof e&&"default"in e?e.default:e,r=/https?|ftp|gopher|file/;function n(e){"string"==typeof e&&(e=y(e));var n,a,s,i,o,l,u,c,d,p=(a=(n=e).auth,s=n.hostname,i=n.protocol||"",o=n.pathname||"",l=n.hash||"",u=n.query||"",c=!1,a=a?encodeURIComponent(a).replace(/%3A/i,":")+"@":"",n.host?c=a+n.host:s&&(c=a+(~s.indexOf(":")?"["+s+"]":s),n.port&&(c+=":"+n.port)),u&&"object"==typeof u&&(u=t.encode(u)),d=n.search||u&&"?"+u||"",i&&":"!==i.substr(-1)&&(i+=":"),n.slashes||(!i||r.test(i))&&!1!==c?(c="//"+(c||""),o&&"/"!==o[0]&&(o="/"+o)):c||(c=""),l&&"#"!==l[0]&&(l="#"+l),d&&"?"!==d[0]&&(d="?"+d),{protocol:i,host:c,pathname:o=o.replace(/[?#]/g,encodeURIComponent),search:d=d.replace("#","%23"),hash:l});return""+p.protocol+p.host+p.pathname+p.search+p.hash}var i="http://",o=i+"w.w",l=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,u=/https?|ftp|gopher|file/;function c(e,t){var r="string"==typeof e?y(e):e;e="object"==typeof e?n(e):e;var a=y(t),s="";r.protocol&&!r.slashes&&(s=r.protocol,e=e.replace(r.protocol,""),s+="/"===t[0]||"/"===e[0]?"/":""),s&&a.protocol&&(s="",a.slashes||(s=a.protocol,t=t.replace(a.protocol,"")));var c=e.match(l);c&&!a.protocol&&(e=e.substr((s=c[1]+(c[2]||"")).length),/^\/\/[^/]/.test(t)&&(s=s.slice(0,-1)));var d=new URL(e,o+"/"),p=new URL(t,d).toString().replace(o,""),h=a.protocol||r.protocol;return h+=r.slashes||a.slashes?"//":"",!s&&h?p=p.replace(i,h):s&&(p=p.replace(i,"")),u.test(p)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==p.slice(-1)||(p=p.slice(0,-1)),s&&(p=s+("/"===p[0]?p.substr(1):p)),p}function d(){}d.prototype.parse=y,d.prototype.format=n,d.prototype.resolve=c,d.prototype.resolveObject=c;var p=/^https?|ftp|gopher|file/,h=/^(.*?)([#?].*)/,f=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,m=/^([a-z0-9.+-]*:)?\/\/\/*/i,g=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function y(e,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!1),e&&"object"==typeof e&&e instanceof d)return e;var s=(e=e.trim()).match(h);e=s?s[1].replace(/\\/g,"/")+s[2]:e.replace(/\\/g,"/"),g.test(e)&&"/"!==e.slice(-1)&&(e+="/");var i=!/(^javascript)/.test(e)&&e.match(f),l=m.test(e),u="";i&&(p.test(i[1])||(u=i[1].toLowerCase(),e=""+i[2]+i[3]),i[2]||(l=!1,p.test(i[1])?(u=i[1],e=""+i[3]):e="//"+i[3]),3!==i[2].length&&1!==i[2].length||(u=i[1],e="/"+i[3]));var c,y=(s?s[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),v=y&&y[1],b=new d,_="",w="";try{c=new URL(e)}catch(t){_=t,u||a||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(w="/",e=e.substr(1));try{c=new URL(e,o)}catch(e){return b.protocol=u,b.href=u,b}}b.slashes=l&&!w,b.host="w.w"===c.host?"":c.host,b.hostname="w.w"===c.hostname?"":c.hostname.replace(/(\[|\])/g,""),b.protocol=_?u||null:c.protocol,b.search=c.search.replace(/\\/g,"%5C"),b.hash=c.hash.replace(/\\/g,"%5C");var x=e.split("#");!b.search&&~x[0].indexOf("?")&&(b.search="?"),b.hash||""!==x[1]||(b.hash="#"),b.query=r?t.decode(c.search.substr(1)):b.search.substr(1),b.pathname=w+(i?c.pathname.replace(/['^|`]/g,function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(e,t){try{return decodeURIComponent(t).split("").map(function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()}).join("")}catch(e){return t}}):c.pathname),"about:"===b.protocol&&"blank"===b.pathname&&(b.protocol="",b.pathname=""),_&&"/"!==e[0]&&(b.pathname=b.pathname.substr(1)),u&&!p.test(u)&&"/"!==e.slice(-1)&&"/"===b.pathname&&(b.pathname=""),b.path=b.pathname+b.search,b.auth=[c.username,c.password].map(decodeURIComponent).filter(Boolean).join(":"),b.port=c.port,v&&!b.host.endsWith(v)&&(b.host+=v,b.port=v.slice(1)),b.href=w?""+b.pathname+b.search+b.hash:n(b);var S=/^(file)/.test(b.href)?["host","hostname"]:[];return Object.keys(b).forEach(function(e){~S.indexOf(e)||(b[e]=b[e]||null)}),b}s.parse=y,s.format=n,s.resolve=c,s.resolveObject=function(e,t){return y(c(e,t))},s.Url=d}(),e.exports=s}()},6914:e=>{!function(){"use strict";var t={114:function(e){function t(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",a=0,s=-1,i=0,o=0;o<=e.length;++o){if(o<e.length)r=e.charCodeAt(o);else if(47===r)break;else r=47;if(47===r){if(s===o-1||1===i);else if(s!==o-1&&2===i){if(n.length<2||2!==a||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2)){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",a=0):a=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),s=o,i=0;continue}}else if(2===n.length||1===n.length){n="",a=0,s=o,i=0;continue}}t&&(n.length>0?n+="/..":n="..",a=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),a=o-s-1;s=o,i=0}else 46===r&&-1!==i?++i:i=-1}return n}var n={resolve:function(){for(var e,n,a="",s=!1,i=arguments.length-1;i>=-1&&!s;i--)i>=0?n=arguments[i]:(void 0===e&&(e=""),n=e),t(n),0!==n.length&&(a=n+"/"+a,s=47===n.charCodeAt(0));return(a=r(a,!s),s)?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),a=47===e.charCodeAt(e.length-1);return(0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&a&&(e+="/"),n)?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var a=arguments[r];t(a),a.length>0&&(void 0===e?e=a:e+="/"+a)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=n.resolve(e))===(r=n.resolve(r)))return"";for(var a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var s=e.length,i=s-a,o=1;o<r.length&&47===r.charCodeAt(o);++o);for(var l=r.length-o,u=i<l?i:l,c=-1,d=0;d<=u;++d){if(d===u){if(l>u){if(47===r.charCodeAt(o+d))return r.slice(o+d+1);if(0===d)return r.slice(o+d)}else i>u&&(47===e.charCodeAt(a+d)?c=d:0===d&&(c=0));break}var p=e.charCodeAt(a+d);if(p!==r.charCodeAt(o+d))break;47===p&&(c=d)}var h="";for(d=a+c+1;d<=s;++d)(d===s||47===e.charCodeAt(d))&&(0===h.length?h+="..":h+="/..");return h.length>0?h+r.slice(o+c):(o+=c,47===r.charCodeAt(o)&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,a=-1,s=!0,i=e.length-1;i>=1;--i)if(47===(r=e.charCodeAt(i))){if(!s){a=i;break}}else s=!1;return -1===a?n?"/":".":n&&1===a?"//":e.slice(0,a)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw TypeError('"ext" argument must be a string');t(e);var n,a=0,s=-1,i=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!i){a=n+1;break}}else -1===l&&(i=!1,l=n+1),o>=0&&(u===r.charCodeAt(o)?-1==--o&&(s=n):(o=-1,s=l))}return a===s?s=l:-1===s&&(s=e.length),e.slice(a,s)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!i){a=n+1;break}}else -1===s&&(i=!1,s=n+1);return -1===s?"":e.slice(a,s)},extname:function(e){t(e);for(var r=-1,n=0,a=-1,s=!0,i=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47===l){if(!s){n=o+1;break}continue}-1===a&&(s=!1,a=o+1),46===l?-1===r?r=o:1!==i&&(i=1):-1!==r&&(i=-1)}return -1===r||-1===a||0===i||1===i&&r===a-1&&r===n+1?"":e.slice(r,a)},format:function(e){var t,r;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+r:t+"/"+r:r},parse:function(e){t(e);var r,n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var a=e.charCodeAt(0),s=47===a;s?(n.root="/",r=1):r=0;for(var i=-1,o=0,l=-1,u=!0,c=e.length-1,d=0;c>=r;--c){if(47===(a=e.charCodeAt(c))){if(!u){o=c+1;break}continue}-1===l&&(u=!1,l=c+1),46===a?-1===i?i=c:1!==d&&(d=1):-1!==i&&(d=-1)}return -1===i||-1===l||0===d||1===d&&i===l-1&&i===o+1?-1!==l&&(0===o&&s?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(o,l)):(0===o&&s?(n.name=e.slice(1,i),n.base=e.slice(1,l)):(n.name=e.slice(o,i),n.base=e.slice(o,l)),n.ext=e.slice(i,l)),o>0?n.dir=e.slice(0,o-1):s&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}},i=!0;try{t[e](s,s.exports,n),i=!1}finally{i&&delete r[e]}return s.exports}n.ab="//";var a=n(114);e.exports=a}()},9548:(e,t)=>{"use strict";function r(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"===n||"+"===n||"?"===n){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===n){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===n){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===n){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===n){for(var a="",s=r+1;s<e.length;){var i=e.charCodeAt(s);if(i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||95===i){a+=e[s++];continue}break}if(!a)throw TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:a}),r=s;continue}if("("===n){var o=1,l="",s=r+1;if("?"===e[s])throw TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;){if("\\"===e[s]){l+=e[s++]+e[s++];continue}if(")"===e[s]){if(0==--o){s++;break}}else if("("===e[s]&&(o++,"?"!==e[s+1]))throw TypeError("Capturing groups are not allowed at "+s);l+=e[s++]}if(o)throw TypeError("Unbalanced pattern at "+r);if(!l)throw TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:l}),r=s;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),a=t.prefixes,s=void 0===a?"./":a,i="[^"+n(t.delimiter||"/#?")+"]+?",o=[],l=0,u=0,c="",d=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},p=function(e){var t=d(e);if(void 0!==t)return t;var n=r[u];throw TypeError("Unexpected "+n.type+" at "+n.index+", expected "+e)},h=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};u<r.length;){var f=d("CHAR"),m=d("NAME"),g=d("PATTERN");if(m||g){var y=f||"";-1===s.indexOf(y)&&(c+=y,y=""),c&&(o.push(c),c=""),o.push({name:m||l++,prefix:y,suffix:"",pattern:g||i,modifier:d("MODIFIER")||""});continue}var v=f||d("ESCAPED_CHAR");if(v){c+=v;continue}if(c&&(o.push(c),c=""),d("OPEN")){var y=h(),b=d("NAME")||"",_=d("PATTERN")||"",w=h();p("CLOSE"),o.push({name:b||(_?l++:""),pattern:b&&!_?i:_,prefix:y,suffix:w,modifier:d("MODIFIER")||""});continue}p("END")}return o}function n(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function a(e){return e&&e.sensitive?"":"i"}t.MY=function(e,t){var n,s,i,o,l,u,c,d;return n=r(e,t),void 0===(s=t)&&(s={}),i=a(s),l=void 0===(o=s.encode)?function(e){return e}:o,c=void 0===(u=s.validate)||u,d=n.map(function(e){if("object"==typeof e)return RegExp("^(?:"+e.pattern+")$",i)}),function(e){for(var t="",r=0;r<n.length;r++){var a=n[r];if("string"==typeof a){t+=a;continue}var s=e?e[a.name]:void 0,i="?"===a.modifier||"*"===a.modifier,o="*"===a.modifier||"+"===a.modifier;if(Array.isArray(s)){if(!o)throw TypeError('Expected "'+a.name+'" to not repeat, but got an array');if(0===s.length){if(i)continue;throw TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<s.length;u++){var p=l(s[u],a);if(c&&!d[r].test(p))throw TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but got "'+p+'"');t+=a.prefix+p+a.suffix}continue}if("string"==typeof s||"number"==typeof s){var p=l(String(s),a);if(c&&!d[r].test(p))throw TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+p+'"');t+=a.prefix+p+a.suffix;continue}if(!i){var h=o?"an array":"a string";throw TypeError('Expected "'+a.name+'" to be '+h)}}return t}},t.WS=function(e,t,r){void 0===r&&(r={});var n=r.decode,a=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var s=n[0],i=n.index,o=Object.create(null),l=1;l<n.length;l++)!function(e){if(void 0!==n[e]){var r=t[e-1];"*"===r.modifier||"+"===r.modifier?o[r.name]=n[e].split(r.prefix+r.suffix).map(function(e){return a(e,r)}):o[r.name]=a(n[e],r)}}(l);return{path:s,index:i,params:o}}},t.Bo=function e(t,s,i){return t instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(t,s):Array.isArray(t)?RegExp("(?:"+t.map(function(t){return e(t,s,i).source}).join("|")+")",a(i)):function(e,t,r){void 0===r&&(r={});for(var s=r.strict,i=void 0!==s&&s,o=r.start,l=r.end,u=r.encode,c=void 0===u?function(e){return e}:u,d="["+n(r.endsWith||"")+"]|$",p="["+n(r.delimiter||"/#?")+"]",h=void 0===o||o?"^":"",f=0;f<e.length;f++){var m=e[f];if("string"==typeof m)h+=n(c(m));else{var g=n(c(m.prefix)),y=n(c(m.suffix));if(m.pattern){if(t&&t.push(m),g||y){if("+"===m.modifier||"*"===m.modifier){var v="*"===m.modifier?"?":"";h+="(?:"+g+"((?:"+m.pattern+")(?:"+y+g+"(?:"+m.pattern+"))*)"+y+")"+v}else h+="(?:"+g+"("+m.pattern+")"+y+")"+m.modifier}else h+="("+m.pattern+")"+m.modifier}else h+="(?:"+g+y+")"+m.modifier}}if(void 0===l||l)i||(h+=p+"?"),h+=r.endsWith?"(?="+d+")":"$";else{var b=e[e.length-1],_="string"==typeof b?p.indexOf(b[b.length-1])>-1:void 0===b;i||(h+="(?:"+p+"(?="+d+"))?"),_||(h+="(?="+p+"|"+d+")")}return new RegExp(h,a(r))}(r(t,i),s,i)}},5028:e=>{!function(){"use strict";var t={815:function(e){e.exports=function(e,r,n,a){r=r||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var i=/\+/g;e=e.split(r);var o=1e3;a&&"number"==typeof a.maxKeys&&(o=a.maxKeys);var l=e.length;o>0&&l>o&&(l=o);for(var u=0;u<l;++u){var c,d,p,h,f=e[u].replace(i,"%20"),m=f.indexOf(n);(m>=0?(c=f.substr(0,m),d=f.substr(m+1)):(c=f,d=""),p=decodeURIComponent(c),h=decodeURIComponent(d),Object.prototype.hasOwnProperty.call(s,p))?t(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},577:function(e){var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,s,i,o){return(s=s||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e)?n(a(e),function(a){var o=encodeURIComponent(t(a))+i;return r(e[a])?n(e[a],function(e){return o+encodeURIComponent(t(e))}).join(s):o+encodeURIComponent(t(e[a]))}).join(s):o?encodeURIComponent(t(o))+i+encodeURIComponent(t(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}},i=!0;try{t[e](s,s.exports,n),i=!1}finally{i&&delete r[e]}return s.exports}n.ab="//";var a={};a.decode=a.parse=n(815),a.encode=a.stringify=n(577),e.exports=a}()},9642:(e,t)=>{"use strict";var r={usingClientEntryPoint:!1,Events:null,Dispatcher:{current:null}};function n(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}var a=r.Dispatcher;t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r,t.preconnect=function(e,t){var r=a.current;r&&"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,r.preconnect(e,t))},t.prefetchDNS=function(e){var t=a.current;t&&"string"==typeof e&&t.prefetchDNS(e)},t.preinit=function(e,t){var r=a.current;if(r&&"string"==typeof e&&t&&"string"==typeof t.as){var s=t.as,i=n(s,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,l="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===s?r.preinitStyle(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:l}):"script"===s&&r.preinitScript(e,{crossOrigin:i,integrity:o,fetchPriority:l,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){var r=a.current;if(r&&"string"==typeof e){if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var s=n(t.as,t.crossOrigin);r.preinitModuleScript(e,{crossOrigin:s,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.preinitModuleScript(e)}},t.preload=function(e,t){var r=a.current;if(r&&"string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var s=t.as,i=n(s,t.crossOrigin);r.preload(e,s,{crossOrigin:i,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0})}},t.preloadModule=function(e,t){var r=a.current;if(r&&"string"==typeof e){if(t){var s=n(t.as,t.crossOrigin);r.preloadModule(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:s,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.preloadModule(e)}}},5105:(e,t,r)=>{"use strict";e.exports=r(9642)},1651:(e,t,r)=>{"use strict";var n=r(7908),a=r(5105),s=null,i=0;function o(e,t){if(0!==t.byteLength){if(2048<t.byteLength)0<i&&(e.enqueue(new Uint8Array(s.buffer,0,i)),s=new Uint8Array(2048),i=0),e.enqueue(t);else{var r=s.length-i;r<t.byteLength&&(0===r?e.enqueue(s):(s.set(t.subarray(0,r),i),e.enqueue(s),t=t.subarray(r)),s=new Uint8Array(2048),i=0),s.set(t,i),i+=t.byteLength}}return!0}var l=new TextEncoder,u=Symbol.for("react.client.reference"),c=Symbol.for("react.server.reference");function d(e,t,r){return Object.defineProperties(e,{$$typeof:{value:u},$$id:{value:t},$$async:{value:r}})}var p=Function.prototype.bind,h=Array.prototype.slice;function f(){var e=p.apply(this,arguments);if(this.$$typeof===c){var t=h.call(arguments,1);return Object.defineProperties(e,{$$typeof:{value:c},$$id:{value:this.$$id},$$bound:{value:this.$$bound?this.$$bound.concat(t):t},bind:{value:f}})}return e}var m=Promise.prototype,g={get:function(e,t){switch(t){case"$$typeof":return e.$$typeof;case"$$id":return e.$$id;case"$$async":return e.$$async;case"name":return e.name;case"displayName":case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"Provider":throw Error("Cannot render a Client Context Provider on the Server. Instead, you can export a Client Component wrapper that itself renders a Client Context Provider.")}throw Error("Cannot access "+String(e.name)+"."+String(t)+" on the server. You cannot dot into a client module from a server component. You can only pass the imported name through.")},set:function(){throw Error("Cannot assign to a client module from a server module.")}};function y(e,t){switch(t){case"$$typeof":return e.$$typeof;case"$$id":return e.$$id;case"$$async":return e.$$async;case"name":return e.name;case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"__esModule":var r=e.$$id;return e.default=d(function(){throw Error("Attempted to call the default export of "+r+" from the server but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},e.$$id+"#",e.$$async),!0;case"then":if(e.then)return e.then;if(e.$$async)return;var n=d({},e.$$id,!0),a=new Proxy(n,v);return e.status="fulfilled",e.value=a,e.then=d(function(e){return Promise.resolve(e(a))},e.$$id+"#then",!1)}if("symbol"==typeof t)throw Error("Cannot read Symbol exports. Only named exports are supported on a client module imported on the server.");return(n=e[t])||(Object.defineProperty(n=d(function(){throw Error("Attempted to call "+String(t)+"() from the server but "+String(t)+" is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},e.$$id+"#"+t,e.$$async),"name",{value:t}),n=e[t]=new Proxy(n,g)),n}var v={get:function(e,t){return y(e,t)},getOwnPropertyDescriptor:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return r||(r={value:y(e,t),writable:!1,configurable:!1,enumerable:!1},Object.defineProperty(e,t,r)),r},getPrototypeOf:function(){return m},set:function(){throw Error("Cannot assign to a client module from a server module.")}};a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher;var b="function"==typeof AsyncLocalStorage,_=b?new AsyncLocalStorage:null;"object"==typeof async_hooks&&async_hooks.createHook,"object"==typeof async_hooks&&async_hooks.executionAsyncId;var w=Symbol.for("react.element"),x=Symbol.for("react.fragment"),S=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.postpone");var P=Symbol.iterator,I=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`");function O(){}var N=null;function $(){if(null===N)throw Error("Expected a suspended thenable. This is a bug in React. Please file an issue.");var e=N;return N=null,e}var j=null,M=0,L=null;function D(){var e=L||[];return L=null,e}var U={useMemo:function(e){return e()},useCallback:function(e){return e},useDebugValue:function(){},useDeferredValue:Z,useTransition:Z,readContext:F,useContext:F,useReducer:Z,useRef:Z,useState:Z,useInsertionEffect:Z,useLayoutEffect:Z,useImperativeHandle:Z,useEffect:Z,useId:function(){if(null===j)throw Error("useId can only be used while React is rendering");var e=j.identifierCount++;return":"+j.identifierPrefix+"S"+e.toString(32)+":"},useSyncExternalStore:Z,useCacheRefresh:function(){return q},useMemoCache:function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=R;return t},use:function(e){if(null!==e&&"object"==typeof e||"function"==typeof e){if("function"==typeof e.then){var t=M;return M+=1,null===L&&(L=[]),function(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(O,O),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:if("string"!=typeof t.status)switch((e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}}),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}throw N=t,I}}(L,e,t)}e.$$typeof===S&&F()}if(e.$$typeof===u){if(null!=e.value&&e.value.$$typeof===S)throw Error("Cannot read a Client Context from a Server Component.");throw Error("Cannot use() an already resolved Client Reference.")}throw Error("An unsupported type was passed to use(): "+String(e))}};function Z(){throw Error("This Hook is not supported in Server Components.")}function q(){throw Error("Refreshing the cache is not supported in Server Components.")}function F(){throw Error("Cannot read a Client Context from a Server Component.")}var H=Array.isArray,B=Object.getPrototypeOf;function z(e){return Object.prototype.toString.call(e).replace(/^\[object (.*)\]$/,function(e,t){return t})}function V(e){switch(typeof e){case"string":return JSON.stringify(10>=e.length?e:e.slice(0,10)+"...");case"object":if(H(e))return"[...]";if(null!==e&&e.$$typeof===J)return"client";return"Object"===(e=z(e))?"{...}":e;case"function":return e.$$typeof===J?"client":(e=e.displayName||e.name)?"function "+e:"function";default:return String(e)}}var J=Symbol.for("react.client.reference");function G(e,t){var r=z(e);if("Object"!==r&&"Array"!==r)return r;r=-1;var n=0;if(H(e)){for(var a="[",s=0;s<e.length;s++){0<s&&(a+=", ");var i=e[s];i="object"==typeof i&&null!==i?G(i):V(i),""+s===t?(r=a.length,n=i.length,a+=i):a=10>i.length&&40>a.length+i.length?a+i:a+"..."}a+="]"}else if(e.$$typeof===w)a="<"+function e(t){if("string"==typeof t)return t;switch(t){case E:return"Suspense";case T:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case k:return e(t.render);case C:return e(t.type);case A:var r=t._payload;t=t._init;try{return e(t(r))}catch(e){}}return""}(e.type)+"/>";else{if(e.$$typeof===J)return"client";for(i=0,a="{",s=Object.keys(e);i<s.length;i++){0<i&&(a+=", ");var o=s[i],l=JSON.stringify(o);a+=('"'+o+'"'===l?o:l)+": ",l="object"==typeof(l=e[o])&&null!==l?G(l):V(l),o===t?(r=a.length,n=l.length,a+=l):a=10>l.length&&40>a.length+l.length?a+l:a+"..."}a+="}"}return void 0===t?a:-1<r&&0<n?"\n  "+a+"\n  "+(e=" ".repeat(r)+"^".repeat(n)):"\n  "+a}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=n.__SECRET_SERVER_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;if(!K)throw Error('The "react" package in this environment is not configured correctly. The "react-server" condition must be enabled in any environment that runs React Server Components.');var X=Object.prototype,Y=JSON.stringify,Q=(K.ReactCurrentCache,W.ReactCurrentDispatcher),ee=null;function et(e){if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e}function er(e,t,r,n,a){var s=t.thenableState;if(t.thenableState=null,M=0,L=s,"object"==typeof(n=n(a,void 0))&&null!==n&&"function"==typeof n.then){if("fulfilled"===(a=n).status)return a.value;n=function(e){switch(e.status){case"fulfilled":case"rejected":break;default:"string"!=typeof e.status&&(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))}return{$$typeof:A,_payload:e,_init:et}}(n)}return a=t.keyPath,s=t.implicitSlot,null!==r?t.keyPath=null===a?r:a+","+r:null===a&&(t.implicitSlot=!0),e=eu(e,t,ep,"",n),t.keyPath=a,t.implicitSlot=s,e}function en(e,t){var r=e.pingedTasks;r.push(t),1===r.length&&(e.flushScheduled=null!==e.destination,setTimeout(function(){return function(e){var t=Q.current;Q.current=U;var r=ee;j=ee=e;try{var n=e.pingedTasks;e.pingedTasks=[];for(var a=0;a<n.length;a++)eh(e,n[a]);null!==e.destination&&ef(e,e.destination)}catch(t){ec(e,t),function(e,t){var r;null!==e.destination?(e.status=2,"function"==typeof(r=e.destination).error?r.error(t):r.close()):(e.status=1,e.fatalError=t)}(e,t)}finally{Q.current=t,j=null,ee=r}}(e)},0))}function ea(e,t,r,n,a){e.pendingChunks++;var s=e.nextChunkId++;"object"==typeof t&&null!==t&&e.writtenObjects.set(t,s);var i={id:s,status:0,model:t,keyPath:r,implicitSlot:n,ping:function(){return en(e,i)},toJSON:function(t,r){var n=i.keyPath,a=i.implicitSlot;try{var s=eu(e,i,this,t,r)}catch(l){if(t=l===I?$():l,r="object"==typeof(r=i.model)&&null!==r&&(r.$$typeof===w||r.$$typeof===A),"object"==typeof t&&null!==t&&"function"==typeof t.then){var o=(s=ea(e,i.model,i.keyPath,i.implicitSlot,e.abortableTasks)).ping;t.then(o,o),s.thenableState=D(),i.keyPath=n,i.implicitSlot=a,s=r?"$L"+s.id.toString(16):es(s.id)}else if(i.keyPath=n,i.implicitSlot=a,r)e.pendingChunks++,n=e.nextChunkId++,a=ec(e,t),ed(e,n,a),s="$L"+n.toString(16);else throw t}return s},thenableState:null};return a.add(i),i}function es(e){return"$"+e.toString(16)}function ei(e,t,r,n){var a=n.$$async?n.$$id+"#async":n.$$id,s=e.writtenClientReferences,i=s.get(a);if(void 0!==i)return t[0]===w&&"1"===r?"$L"+i.toString(16):es(i);try{var o=e.bundlerConfig,u=n.$$id;i="";var c=o[u];if(c)i=c.name;else{var d=u.lastIndexOf("#");if(-1!==d&&(i=u.slice(d+1),c=o[u.slice(0,d)]),!c)throw Error('Could not find the module "'+u+'" in the React Client Manifest. This is probably a bug in the React Server Components bundler.')}var p=!0===n.$$async?[c.id,c.chunks,i,1]:[c.id,c.chunks,i];e.pendingChunks++;var h=e.nextChunkId++,f=Y(p),m=h.toString(16)+":I"+f+"\n",g=l.encode(m);return e.completedImportChunks.push(g),s.set(a,h),t[0]===w&&"1"===r?"$L"+h.toString(16):es(h)}catch(n){return e.pendingChunks++,t=e.nextChunkId++,r=ec(e,n),ed(e,t,r),es(t)}}function eo(e,t){return t=ea(e,t,null,!1,e.abortableTasks),eh(e,t),t.id}var el=!1;function eu(e,t,r,n,a){if(t.model=a,a===w)return"$";if(null===a)return null;if("object"==typeof a){switch(a.$$typeof){case w:if(void 0!==(n=(r=e.writtenObjects).get(a))){if(el!==a)return -1===n?es(e=eo(e,a)):es(n);el=null}else r.set(a,-1);return function e(t,r,n,a,s,i){if(null!=s)throw Error("Refs cannot be used in Server Components, nor passed to Client Components.");if("function"==typeof n)return n.$$typeof===u?[w,n,a,i]:er(t,r,a,n,i);if("string"==typeof n)return[w,n,a,i];if("symbol"==typeof n)return n===x&&null===a?(a=r.implicitSlot,null===r.keyPath&&(r.implicitSlot=!0),t=eu(t,r,ep,"",i.children),r.implicitSlot=a,t):[w,n,a,i];if(null!=n&&"object"==typeof n){if(n.$$typeof===u)return[w,n,a,i];switch(n.$$typeof){case A:return e(t,r,n=(0,n._init)(n._payload),a,s,i);case k:return er(t,r,a,n.render,i);case C:return e(t,r,n.type,a,s,i)}}throw Error("Unsupported Server Component type: "+V(n))}(e,t,a.type,a.key,a.ref,a.props);case A:return t.thenableState=null,eu(e,t,ep,"",a=(r=a._init)(a._payload))}if(a.$$typeof===u)return ei(e,r,n,a);if(n=(r=e.writtenObjects).get(a),"function"==typeof a.then){if(void 0!==n){if(el!==a)return"$@"+n.toString(16);el=null}return e=function(e,t,r){var n=ea(e,null,t.keyPath,t.implicitSlot,e.abortableTasks);switch(r.status){case"fulfilled":return n.model=r.value,en(e,n),n.id;case"rejected":return t=ec(e,r.reason),ed(e,n.id,t),n.id;default:"string"!=typeof r.status&&(r.status="pending",r.then(function(e){"pending"===r.status&&(r.status="fulfilled",r.value=e)},function(e){"pending"===r.status&&(r.status="rejected",r.reason=e)}))}return r.then(function(t){n.model=t,en(e,n)},function(t){n.status=4,t=ec(e,t),ed(e,n.id,t),e.abortableTasks.delete(n),null!==e.destination&&ef(e,e.destination)}),n.id}(e,t,a),r.set(a,e),"$@"+e.toString(16)}if(void 0!==n){if(el!==a)return -1===n?es(e=eo(e,a)):es(n);el=null}else r.set(a,-1);if(H(a))return a;if(a instanceof Map){for(t=0,a=Array.from(a);t<a.length;t++)"object"==typeof(r=a[t][0])&&null!==r&&void 0===(n=e.writtenObjects).get(r)&&n.set(r,-1);return"$Q"+eo(e,a).toString(16)}if(a instanceof Set){for(t=0,a=Array.from(a);t<a.length;t++)"object"==typeof(r=a[t])&&null!==r&&void 0===(n=e.writtenObjects).get(r)&&n.set(r,-1);return"$W"+eo(e,a).toString(16)}if(e=null===a||"object"!=typeof a?null:"function"==typeof(e=P&&a[P]||a["@@iterator"])?e:null)return e=Array.from(a);if((e=B(a))!==X&&(null===e||null!==B(e)))throw Error("Only plain objects, and a few built-ins, can be passed to Client Components from Server Components. Classes or null prototypes are not supported.");return a}if("string"==typeof a)return"Z"===a[a.length-1]&&r[n]instanceof Date?"$D"+a:1024<=a.length?(e.pendingChunks+=2,t=e.nextChunkId++,r=(a=l.encode(a)).byteLength,r=t.toString(16)+":T"+r.toString(16)+",",r=l.encode(r),e.completedRegularChunks.push(r,a),es(t)):e="$"===a[0]?"$"+a:a;if("boolean"==typeof a)return a;if("number"==typeof a)return Number.isFinite(a)?0===a&&-1/0==1/a?"$-0":a:1/0===a?"$Infinity":-1/0===a?"$-Infinity":"$NaN";if(void 0===a)return"$undefined";if("function"==typeof a){if(a.$$typeof===u)return ei(e,r,n,a);if(a.$$typeof===c)return void 0!==(r=(t=e.writtenServerReferences).get(a))?e="$F"+r.toString(16):(r=a.$$bound,e=eo(e,r={id:a.$$id,bound:r?Promise.resolve(r):null}),t.set(a,e),e="$F"+e.toString(16)),e;if(/^on[A-Z]/.test(n))throw Error("Event handlers cannot be passed to Client Component props."+G(r,n)+"\nIf you need interactivity, consider converting part of this to a Client Component.");throw Error('Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with "use server". Or maybe you meant to call this function rather than return it.'+G(r,n))}if("symbol"==typeof a){var s,i,o=(t=e.writtenSymbols).get(a);if(void 0!==o)return es(o);if(Symbol.for(o=a.description)!==a)throw Error("Only global symbols received from Symbol.for(...) can be passed to Client Components. The symbol Symbol.for("+a.description+") cannot be found among global symbols."+G(r,n));return e.pendingChunks++,r=e.nextChunkId++,s=e,i=r,s=Y("$S"+o),i=i.toString(16)+":"+s+"\n",n=l.encode(i),e.completedImportChunks.push(n),t.set(a,r),es(r)}if("bigint"==typeof a)return"$n"+a.toString(10);throw Error("Type "+typeof a+" is not supported in Client Component props."+G(r,n))}function ec(e,t){var r=ee;ee=null;try{var n=e.onError,a=b?_.run(void 0,n,t):n(t)}finally{ee=r}if(null!=a&&"string"!=typeof a)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof a+'" instead');return a||""}function ed(e,t,r){r={digest:r},t=t.toString(16)+":E"+Y(r)+"\n",t=l.encode(t),e.completedErrorChunks.push(t)}var ep={};function eh(e,t){if(0===t.status)try{el=t.model;var r=eu(e,t,ep,"",t.model);el=r,t.keyPath=null,t.implicitSlot=!1;var n="object"==typeof r&&null!==r?Y(r,t.toJSON):Y(r),a=t.id.toString(16)+":"+n+"\n",s=l.encode(a);e.completedRegularChunks.push(s),e.abortableTasks.delete(t),t.status=1}catch(r){var i=r===I?$():r;if("object"==typeof i&&null!==i&&"function"==typeof i.then){var o=t.ping;i.then(o,o),t.thenableState=D()}else{e.abortableTasks.delete(t),t.status=4;var u=ec(e,i);ed(e,t.id,u)}}finally{}}function ef(e,t){s=new Uint8Array(2048),i=0;try{for(var r=e.completedImportChunks,n=0;n<r.length;n++)e.pendingChunks--,o(t,r[n]);r.splice(0,n);var a=e.completedHintChunks;for(n=0;n<a.length;n++)o(t,a[n]);a.splice(0,n);var l=e.completedRegularChunks;for(n=0;n<l.length;n++)e.pendingChunks--,o(t,l[n]);l.splice(0,n);var u=e.completedErrorChunks;for(n=0;n<u.length;n++)e.pendingChunks--,o(t,u[n]);u.splice(0,n)}finally{e.flushScheduled=!1,s&&0<i&&(t.enqueue(new Uint8Array(s.buffer,0,i)),s=null,i=0)}0===e.pendingChunks&&t.close()}var em=new Map;function eg(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function ey(){}function ev(e,t,r,n){this.status=e,this.value=t,this.reason=r,this._response=n}function eb(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}ev.prototype=Object.create(Promise.prototype),ev.prototype.then=function(e,t){switch("resolved_model"===this.status&&ex(this),this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t(this.reason)}};var e_=null,ew=null;function ex(e){var t=e_,r=ew;e_=e,ew=null;try{var n=JSON.parse(e.value,e._response._fromJSON);null!==ew&&0<ew.deps?(ew.value=n,e.status="blocked",e.value=null,e.reason=null):(e.status="fulfilled",e.value=n)}catch(t){e.status="rejected",e.reason=t}finally{e_=t,ew=r}}t.createClientModuleProxy=function(e){return new Proxy(e=d({},e,!1),v)}},796:(e,t,r)=>{"use strict";e.exports=r(1651)},8949:(e,t)=>{"use strict";var r=Object.assign,n={current:null};function a(){return new Map}if("function"==typeof fetch){var s=fetch,i=function(e,t){var r=n.current;if(!r||t&&t.signal&&t.signal!==r.getCacheSignal())return s(e,t);if("string"!=typeof e||t){var i="string"==typeof e||e instanceof URL?new Request(e,t):e;if("GET"!==i.method&&"HEAD"!==i.method||i.keepalive)return s(e,t);var o=JSON.stringify([i.method,Array.from(i.headers.entries()),i.mode,i.redirect,i.credentials,i.referrer,i.referrerPolicy,i.integrity]);i=i.url}else o='["GET",[],null,"follow",null,null,null,null]',i=e;var l=r.getCacheForType(a);if(void 0===(r=l.get(i)))e=s(e,t),l.set(i,[o,e]);else{for(i=0,l=r.length;i<l;i+=2){var u=r[i+1];if(r[i]===o)return(e=u).then(function(e){return e.clone()})}e=s(e,t),r.push(o,e)}return e.then(function(e){return e.clone()})};r(i,s);try{fetch=i}catch(e){try{globalThis.fetch=i}catch(e){console.warn("React was unable to patch the fetch() function in this environment. Suspensey APIs might not work correctly as a result.")}}}var o={current:null},l={ReactCurrentDispatcher:o,ReactCurrentOwner:{current:null}};function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=Array.isArray,d=Symbol.for("react.element"),p=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.iterator,w=Object.prototype.hasOwnProperty,x=l.ReactCurrentOwner;function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===d}var k=/\/+/g;function E(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function T(){}function C(e,t,r){if(null==e)return e;var n=[],a=0;return!function e(t,r,n,a,s){var i,o,l,h=typeof t;("undefined"===h||"boolean"===h)&&(t=null);var f=!1;if(null===t)f=!0;else switch(h){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case d:case p:f=!0;break;case b:return e((f=t._init)(t._payload),r,n,a,s)}}if(f)return s=s(t),f=""===a?"."+E(t,0):a,c(s)?(n="",null!=f&&(n=f.replace(k,"$&/")+"/"),e(s,r,n,"",function(e){return e})):null!=s&&(S(s)&&(i=s,o=n+(!s.key||t&&t.key===s.key?"":(""+s.key).replace(k,"$&/")+"/")+f,s={$$typeof:d,type:i.type,key:o,ref:i.ref,props:i.props,_owner:i._owner}),r.push(s)),1;f=0;var m=""===a?".":a+":";if(c(t))for(var g=0;g<t.length;g++)h=m+E(a=t[g],g),f+=e(a,r,n,h,s);else if("function"==typeof(g=null===(l=t)||"object"!=typeof l?null:"function"==typeof(l=_&&l[_]||l["@@iterator"])?l:null))for(t=g.call(t),g=0;!(a=t.next()).done;)h=m+E(a=a.value,g++),f+=e(a,r,n,h,s);else if("object"===h){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,n,a,s);throw Error(u(31,"[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r))}return f}(e,n,"","",function(e){return t.call(r,e,a++)}),n}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}function R(){return new WeakMap}function P(){return{s:0,v:void 0,o:null,p:null}}var I={transition:null};function O(){}var N="function"==typeof reportError?reportError:function(e){console.error(e)};t.Children={map:C,forEach:function(e,t,r){C(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error(u(143));return e}},t.Fragment=h,t.Profiler=m,t.StrictMode=f,t.Suspense=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l,t.__SECRET_SERVER_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentCache:n},t.cache=function(e){return function(){var t=n.current;if(!t)return e.apply(null,arguments);var r=t.getCacheForType(R);void 0===(t=r.get(e))&&(t=P(),r.set(e,t)),r=0;for(var a=arguments.length;r<a;r++){var s=arguments[r];if("function"==typeof s||"object"==typeof s&&null!==s){var i=t.o;null===i&&(t.o=i=new WeakMap),void 0===(t=i.get(s))&&(t=P(),i.set(s,t))}else null===(i=t.p)&&(t.p=i=new Map),void 0===(t=i.get(s))&&(t=P(),i.set(s,t))}if(1===t.s)return t.v;if(2===t.s)throw t.v;try{var o=e.apply(null,arguments);return(r=t).s=1,r.v=o}catch(e){throw(o=t).s=2,o.v=e,e}}},t.cloneElement=function(e,t,n){if(null==e)throw Error(u(267,e));var a=r({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=x.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&"key"!==c&&"ref"!==c&&"__self"!==c&&"__source"!==c&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var p=0;p<c;p++)l[p]=arguments[p+2];a.children=l}return{$$typeof:d,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createElement=function(e,t,r){var n,a={},s=null,i=null;if(null!=t)for(n in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,n)&&"key"!==n&&"ref"!==n&&"__self"!==n&&"__source"!==n&&(a[n]=t[n]);var o=arguments.length-2;if(1===o)a.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===a[n]&&(a[n]=o[n]);return{$$typeof:d,type:e,key:s,ref:i,props:a,_owner:x.current}},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:g,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:b,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition,r=new Set;I.transition={_callbacks:r};var n=I.transition;try{var a=e();"object"==typeof a&&null!==a&&"function"==typeof a.then&&(r.forEach(function(e){return e(n,a)}),a.then(O,N))}catch(e){N(e)}finally{I.transition=t}},t.use=function(e){return o.current.use(e)},t.useCallback=function(e,t){return o.current.useCallback(e,t)},t.useDebugValue=function(){},t.useId=function(){return o.current.useId()},t.useMemo=function(e,t){return o.current.useMemo(e,t)},t.version="18.3.0-canary-178c267a4e-20241218"},7908:(e,t,r)=>{"use strict";e.exports=r(8949)},1583:(e,t,r)=>{"use strict";var n;r.d(t,{ZK:()=>y});let{env:a,stdout:s}=(null==(n=globalThis)?void 0:n.process)??{},i=a&&!a.NO_COLOR&&(a.FORCE_COLOR||(null==s?void 0:s.isTTY)&&!a.CI&&"dumb"!==a.TERM),o=(e,t,r,n)=>{let a=e.substring(0,n)+r,s=e.substring(n+t.length),i=s.indexOf(t);return~i?a+o(s,t,r,i):a+s},l=(e,t,r=e)=>i?n=>{let a=""+n,s=a.indexOf(t,e.length);return~s?e+o(a,t,r,s)+t:e+a+t}:String,u=l("\x1b[1m","\x1b[22m","\x1b[22m\x1b[1m");l("\x1b[2m","\x1b[22m","\x1b[22m\x1b[2m"),l("\x1b[3m","\x1b[23m"),l("\x1b[4m","\x1b[24m"),l("\x1b[7m","\x1b[27m"),l("\x1b[8m","\x1b[28m"),l("\x1b[9m","\x1b[29m"),l("\x1b[30m","\x1b[39m");let c=l("\x1b[31m","\x1b[39m"),d=l("\x1b[32m","\x1b[39m"),p=l("\x1b[33m","\x1b[39m");l("\x1b[34m","\x1b[39m");let h=l("\x1b[35m","\x1b[39m");l("\x1b[38;2;173;127;168m","\x1b[39m"),l("\x1b[36m","\x1b[39m");let f=l("\x1b[37m","\x1b[39m");l("\x1b[90m","\x1b[39m"),l("\x1b[40m","\x1b[49m"),l("\x1b[41m","\x1b[49m"),l("\x1b[42m","\x1b[49m"),l("\x1b[43m","\x1b[49m"),l("\x1b[44m","\x1b[49m"),l("\x1b[45m","\x1b[49m"),l("\x1b[46m","\x1b[49m"),l("\x1b[47m","\x1b[49m");let m={wait:f(u("")),error:c(u("")),warn:p(u("")),ready:"",info:f(u(" ")),event:d(u("")),trace:h(u("\xbb"))},g={log:"log",warn:"warn",error:"error"};function y(...e){!function(e,...t){(""===t[0]||void 0===t[0])&&1===t.length&&t.shift();let r=e in g?g[e]:"log",n=m[e];0===t.length?console[r](""):console[r](" "+n,...t)}("warn",...e)}},2039:(e,t,r)=>{"use strict";r.d(t,{H4:()=>s,om:()=>n,vu:()=>a});let n="Next-Action",a=[["RSC"],["Next-Router-State-Tree"],["Next-Router-Prefetch"]],s="_rsc"},4363:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DynamicServerError:()=>a,isDynamicServerError:()=>s});let n="DYNAMIC_SERVER_USAGE";class a extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=n}}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===n}},8439:(e,t,r)=>{"use strict";r.d(t,{G:()=>n});class n extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}},5927:(e,t,r)=>{"use strict";r.d(t,{Ar:()=>p,BR:()=>v,EX:()=>c,Et:()=>d,Ho:()=>g,JT:()=>u,Qq:()=>i,Sx:()=>o,X_:()=>f,cv:()=>m,dN:()=>n,hd:()=>l,of:()=>h,u7:()=>a,y3:()=>s,zt:()=>y});let n="nxtP",a="nxtI",s="x-prerender-revalidate",i="x-prerender-revalidate-if-generated",o=".prefetch.rsc",l=".rsc",u=".json",c=".meta",d="x-next-cache-tags",p="x-next-cache-soft-tags",h="x-next-revalidated-tags",f="x-next-revalidate-tag-token",m=128,g=256,y="_N_T_",v=31536e3,b={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"};({...b,GROUP:{serverOnly:[b.reactServerComponents,b.actionBrowser,b.appMetadataRoute,b.appRouteHandler,b.instrument],clientOnly:[b.serverSideRendering,b.appPagesBrowser],nonClientServerTarget:[b.middleware,b.api],app:[b.reactServerComponents,b.actionBrowser,b.appMetadataRoute,b.appRouteHandler,b.serverSideRendering,b.appPagesBrowser,b.shared,b.instrument]}})},828:(e,t,r)=>{"use strict";r.d(t,{FI:()=>o,TP:()=>l,fl:()=>u});var n=r(7908),a=r(4363),s=r(8439);let i="function"==typeof n.unstable_postpone;function o(e){return{isDebugSkeleton:e,dynamicAccesses:[]}}function l(e,t){let r=new URL(e.urlPathname,"http://n").pathname;if(e.isUnstableCacheCallback)throw Error(`Route ${r} used "${t}" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${t}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if(e.dynamicShouldError)throw new s.G(`Route ${r} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(e.prerenderState)c(e.prerenderState,t,r);else if(e.revalidate=0,e.isStaticGeneration){let n=new a.DynamicServerError(`Route ${r} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=t,e.dynamicUsageStack=n.stack,n}}function u(e,t){e.prerenderState&&c(e.prerenderState,t,e.urlPathname)}function c(e,t,r){!function(){if(!i)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")}();let a=`Route ${r} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`;e.dynamicAccesses.push({stack:e.isDebugSkeleton?Error().stack:void 0,expression:t}),n.unstable_postpone(a)}},2988:(e,t,r)=>{"use strict";r.d(t,{B:()=>p});var n=r(2039),a=r(3665),s=r(6776),i=r(4101),o=r(5927);r(6991),r(8816);let l="__prerender_bypass";Symbol("__next_preview_data"),Symbol(l);class u{constructor(e,t,r,n){var s;let i=e&&function(e,t){let r=a.h.from(e.headers);return{isOnDemandRevalidate:r.get(o.y3)===t.previewModeId,revalidateOnlyGenerated:r.has(o.Qq)}}(t,e).isOnDemandRevalidate,u=null==(s=r.get(l))?void 0:s.value;this.isEnabled=!!(!i&&u&&e&&u===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}enable(){if(!this._previewModeId)throw Error("Invariant: previewProps missing previewModeId this should never happen");this._mutableCookies.set({name:l,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"})}disable(){this._mutableCookies.set({name:l,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)})}}var c=r(9573);function d(e,t){if("x-middleware-set-cookie"in e.headers&&"string"==typeof e.headers["x-middleware-set-cookie"]){let r=e.headers["x-middleware-set-cookie"],n=new Headers;for(let e of(0,c.l$)(r))n.append("set-cookie",e);for(let e of new i.nV(n).getAll())t.set(e)}}let p={wrap(e,{req:t,res:r,renderOpts:o},l){let c;function p(e){r&&r.setHeader("Set-Cookie",e)}o&&"previewProps"in o&&(c=o.previewProps);let h={},f={get headers(){return h.headers||(h.headers=function(e){let t=a.h.from(e);for(let e of n.vu)t.delete(e.toString().toLowerCase());return a.h.seal(t)}(t.headers)),h.headers},get cookies(){if(!h.cookies){let e=new i.qC(a.h.from(t.headers));d(t,e),h.cookies=s.Qb.seal(e)}return h.cookies},get mutableCookies(){if(!h.mutableCookies){let e=function(e,t){let r=new i.qC(a.h.from(e));return s.vr.wrap(r,t)}(t.headers,(null==o?void 0:o.onUpdateCookies)||(r?p:void 0));d(t,e),h.mutableCookies=e}return h.mutableCookies},get draftMode(){return h.draftMode||(h.draftMode=new u(c,t,this.cookies,this.mutableCookies)),h.draftMode},reactLoadableManifest:(null==o?void 0:o.reactLoadableManifest)||{},assetPrefix:(null==o?void 0:o.assetPrefix)||""};return e.run(f,l,f)}}},4828:(e,t,r)=>{"use strict";var n;r.d(t,{x:()=>n}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},2561:(e,t,r)=>{e.exports=r(8403)},8403:(e,t,r)=>{"use strict";r.d(t,{AppRouteRouteModule:()=>j});var n,a,s={};r.r(s),r.d(s,{AppRouterContext:()=>T,GlobalLayoutRouterContext:()=>A,LayoutRouterContext:()=>C,MissingSlotContext:()=>P,TemplateContext:()=>R});var i={};r.r(i),r.d(i,{appRouterContext:()=>s});class o{constructor({userland:e,definition:t}){this.userland=e,this.definition=t}}var l=r(2988),u=r(828);let c={wrap(e,{urlPathname:t,renderOpts:r,requestEndedState:n},a){let s=!r.supportsDynamicResponse&&!r.isDraftMode&&!r.isServerAction,i=s&&r.experimental.ppr?(0,u.FI)(r.isDebugPPRSkeleton):null,o={isStaticGeneration:s,urlPathname:t,pagePath:r.originalPathname,incrementalCache:r.incrementalCache||globalThis.__incrementalCache,isRevalidate:r.isRevalidate,isPrerendering:r.nextExport,fetchCache:r.fetchCache,isOnDemandRevalidate:r.isOnDemandRevalidate,isDraftMode:r.isDraftMode,prerenderState:i,requestEndedState:n};return r.store=o,e.run(o,a,o)}};var d=r(6776);function p(){return new Response(null,{status:400})}function h(){return new Response(null,{status:405})}let f=["GET","HEAD","OPTIONS","POST","PUT","DELETE","PATCH"];var m=r(6631),g=r(6991),y=r(8816),v=r(8983);let b=(0,r(5228).P)();!function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(n||(n={}));function _(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,a,s]=e.digest.split(";",4),i=Number(s);return"NEXT_REDIRECT"===t&&("replace"===r||"push"===r)&&"string"==typeof a&&!isNaN(i)&&i in n}!function(e){e.push="push",e.replace="replace"}(a||(a={})),r(1583);let w=["HEAD","OPTIONS"];var x=r(3665),S=r(4363),k=r(9182);let E=r(796).createClientModuleProxy,T=E(String.raw`/Users/ayush/Documents/hackathons/croissant-eth/kadena_croissant/agents/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#AppRouterContext`),C=E(String.raw`/Users/ayush/Documents/hackathons/croissant-eth/kadena_croissant/agents/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#LayoutRouterContext`),A=E(String.raw`/Users/ayush/Documents/hackathons/croissant-eth/kadena_croissant/agents/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#GlobalLayoutRouterContext`),R=E(String.raw`/Users/ayush/Documents/hackathons/croissant-eth/kadena_croissant/agents/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#TemplateContext`),P=E(String.raw`/Users/ayush/Documents/hackathons/croissant-eth/kadena_croissant/agents/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#MissingSlotContext`);var I=r(2039),O=r(676),N=r(8439),$=r(8042);class j extends o{static #e=this.sharedModules=i;constructor({userland:e,definition:t,resolvedPagePath:r,nextConfigOutput:n}){if(super({userland:e,definition:t}),this.requestAsyncStorage=v.O,this.staticGenerationAsyncStorage=k.A,this.serverHooks=S,this.actionAsyncStorage=b,this.resolvedPagePath=r,this.nextConfigOutput=n,this.methods=function(e){let t=f.reduce((t,r)=>({...t,[r]:e[r]??h}),{}),r=new Set(f.filter(t=>e[t]));for(let n of w.filter(e=>!r.has(e))){if("HEAD"===n){e.GET&&(t.HEAD=e.GET,r.add("HEAD"));continue}if("OPTIONS"===n){let e=["OPTIONS",...r];!r.has("HEAD")&&r.has("GET")&&e.push("HEAD");let n={Allow:e.sort().join(", ")};t.OPTIONS=()=>new Response(null,{status:204,headers:n}),r.add("OPTIONS");continue}throw Error(`Invariant: should handle all automatic implementable methods, got method: ${n}`)}return t}(e),this.hasNonStaticMethods=function(e){return!!e.POST||!!e.POST||!!e.DELETE||!!e.PATCH||!!e.OPTIONS}(e),this.dynamic=this.userland.dynamic,"export"===this.nextConfigOutput){if(this.dynamic&&"auto"!==this.dynamic){if("force-dynamic"===this.dynamic)throw Error(`export const dynamic = "force-dynamic" on page "${t.pathname}" cannot be used with "output: export". See more info here: https://nextjs.org/docs/advanced-features/static-html-export`)}else this.dynamic="error"}}resolve(e){return f.includes(e)?this.methods[e]:p}async execute(e,t){let r=this.resolve(e.method),n={req:e};n.renderOpts={previewProps:t.prerenderManifest.preview};let a={urlPathname:e.nextUrl.pathname,renderOpts:t.renderOpts};a.renderOpts.fetchCache=this.userland.fetchCache;let s=await this.actionAsyncStorage.run({isAppRoute:!0,isAction:function(e){let t,r;e.headers instanceof Headers?(t=e.headers.get(I.om.toLowerCase())??null,r=e.headers.get("content-type")):(t=e.headers[I.om.toLowerCase()]??null,r=e.headers["content-type"]??null);let n=!!("POST"===e.method&&"application/x-www-form-urlencoded"===r),a=!!("POST"===e.method&&(null==r?void 0:r.startsWith("multipart/form-data"))),s=!!(void 0!==t&&"string"==typeof t&&"POST"===e.method);return{actionId:t,isURLEncodedAction:n,isMultipartAction:a,isFetchAction:s,isServerAction:!!(s||n||a)}}(e).isServerAction},()=>l.B.wrap(this.requestAsyncStorage,n,()=>c.wrap(this.staticGenerationAsyncStorage,a,n=>{var a;let s=n.isStaticGeneration;if(this.hasNonStaticMethods){if(s){let e=new S.DynamicServerError("Route is configured with methods that cannot be statically generated.");throw n.dynamicUsageDescription=e.message,n.dynamicUsageStack=e.stack,e}n.revalidate=0}let i=e;switch(this.dynamic){case"force-dynamic":n.forceDynamic=!0;break;case"force-static":n.forceStatic=!0,i=new Proxy(e,B);break;case"error":n.dynamicShouldError=!0,s&&(i=new Proxy(e,V));break;default:i=function(e,t){let r={get(e,n,a){switch(n){case"search":case"searchParams":case"url":case"href":case"toJSON":case"toString":case"origin":return(0,u.TP)(t,`nextUrl.${n}`),$.g.get(e,n,a);case"clone":return e[D]||(e[D]=()=>new Proxy(e.clone(),r));default:return $.g.get(e,n,a)}}},n={get(e,a){switch(a){case"nextUrl":return e[M]||(e[M]=new Proxy(e.nextUrl,r));case"headers":case"cookies":case"url":case"body":case"blob":case"json":case"text":case"arrayBuffer":case"formData":return(0,u.TP)(t,`request.${a}`),$.g.get(e,a,e);case"clone":return e[L]||(e[L]=()=>new Proxy(e.clone(),n));default:return $.g.get(e,a,e)}}};return new Proxy(e,n)}(e,n)}n.revalidate??=this.userland.revalidate??!1;let o=function(e){let t="/app/";e.includes(t)||(t="\\app\\");let[,...r]=e.split(t);return(t[0]+r.join(t)).split(".").slice(0,-1).join(".")}(this.resolvedPagePath);return null==(a=(0,g.Yz)().getRootSpanAttributes())||a.set("next.route",o),(0,g.Yz)().trace(y.PB.runHandler,{spanName:`executing api route (app) ${o}`,attributes:{"next.route":o}},async()=>{var a,s;(0,m.XH)({serverHooks:this.serverHooks,staticGenerationAsyncStorage:this.staticGenerationAsyncStorage});let o=await r(i,{params:t.params?function(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}(t.params):void 0});if(!(o instanceof Response))throw Error(`No response is returned from route handler '${this.resolvedPagePath}'. Ensure you return a \`Response\` or a \`NextResponse\` in all branches of your handler.`);t.renderOpts.fetchMetrics=n.fetchMetrics;let l=Promise.all([null==(a=n.incrementalCache)?void 0:a.revalidateTag(n.revalidatedTags||[]),...Object.values(n.pendingRevalidates||{})]).finally(()=>{process.env.NEXT_PRIVATE_DEBUG_CACHE&&console.log("pending revalidates promise finished for:",e.url.toString())});t.renderOpts.builtInWaitUntil?t.renderOpts.builtInWaitUntil(l):t.renderOpts.waitUntil=l,(0,m.RQ)(n),t.renderOpts.fetchTags=null==(s=n.tags)?void 0:s.join(",");let u=this.requestAsyncStorage.getStore();if(u&&u.mutableCookies){let e=new Headers(o.headers);if((0,d._5)(e,u.mutableCookies))return new Response(o.body,{status:o.status,statusText:o.statusText,headers:e})}return o})})));if(!(s instanceof Response))return new Response(null,{status:500});if(s.headers.has("x-middleware-rewrite"))throw Error("NextResponse.rewrite() was used in a app route handler, this is not currently supported. Please remove the invocation to continue.");if("1"===s.headers.get("x-middleware-next"))throw Error("NextResponse.next() was used in a app route handler, this is not supported. See here for more info: https://nextjs.org/docs/messages/next-response-next-in-app-route-handler");return s}async handle(e,t){try{return await this.execute(e,t)}catch(t){let e=function(e){if(_(e)){let t=_(e)?e.digest.split(";",3)[2]:null;if(!t)throw Error("Invariant: Unexpected redirect url format");let r=function(e){if(!_(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(e);return function(e,t,r){let n=new Headers({location:e});return(0,d._5)(n,t),new Response(null,{status:r,headers:n})}(t,e.mutableCookies,r)}return"object"==typeof e&&null!==e&&"digest"in e&&"NEXT_NOT_FOUND"===e.digest&&new Response(null,{status:404})}(t);if(!e)throw t;return e}}}let M=Symbol("nextUrl"),L=Symbol("clone"),D=Symbol("clone"),U=Symbol("searchParams"),Z=Symbol("href"),q=Symbol("toString"),F=Symbol("headers"),H=Symbol("cookies"),B={get(e,t,r){switch(t){case"headers":return e[F]||(e[F]=x.h.seal(new Headers({})));case"cookies":return e[H]||(e[H]=d.Qb.seal(new O.RequestCookies(new Headers({}))));case"nextUrl":return e[M]||(e[M]=new Proxy(e.nextUrl,z));case"url":return r.nextUrl.href;case"geo":case"ip":return;case"clone":return e[L]||(e[L]=()=>new Proxy(e.clone(),B));default:return $.g.get(e,t,r)}}},z={get(e,t,r){switch(t){case"search":return"";case"searchParams":return e[U]||(e[U]=new URLSearchParams);case"href":return e[Z]||(e[Z]=function(e){let t=new URL(e);return t.host="localhost:3000",t.search="",t.protocol="http",t}(e.href).href);case"toJSON":case"toString":return e[q]||(e[q]=()=>r.href);case"url":return;case"clone":return e[D]||(e[D]=()=>new Proxy(e.clone(),z));default:return $.g.get(e,t,r)}}},V={get(e,t,r){switch(t){case"nextUrl":return e[M]||(e[M]=new Proxy(e.nextUrl,J));case"headers":case"cookies":case"url":case"body":case"blob":case"json":case"text":case"arrayBuffer":case"formData":throw new N.G(`Route ${e.nextUrl.pathname} with \`dynamic = "error"\` couldn't be rendered statically because it used \`request.${t}\`.`);case"clone":return e[L]||(e[L]=()=>new Proxy(e.clone(),V));default:return $.g.get(e,t,r)}}},J={get(e,t,r){switch(t){case"search":case"searchParams":case"url":case"href":case"toJSON":case"toString":case"origin":throw new N.G(`Route ${e.pathname} with \`dynamic = "error"\` couldn't be rendered statically because it used \`nextUrl.${t}\`.`);case"clone":return e[D]||(e[D]=()=>new Proxy(e.clone(),J));default:return $.g.get(e,t,r)}}}},6631:(e,t,r)=>{"use strict";r.d(t,{RQ:()=>p,XH:()=>f});var n=r(8816),a=r(6991),s=r(5927),i=r(1583),o=r(828),l=r(7908);function u(e){if(!e.body)return[e,e];let[t,r]=e.body.tee(),n=new Response(t,{status:e.status,statusText:e.statusText,headers:e.headers});Object.defineProperty(n,"url",{value:e.url});let a=new Response(r,{status:e.status,statusText:e.statusText,headers:e.headers});return Object.defineProperty(a,"url",{value:e.url}),[n,a]}var c=r(6195).Buffer;let d=e=>{let t=["/layout"];if(e.startsWith("/")){let r=e.split("/");for(let e=1;e<r.length+1;e++){let n=r.slice(0,e).join("/");n&&(n.endsWith("/page")||n.endsWith("/route")||(n=`${n}${n.endsWith("/")?"":"/"}layout`),t.push(n))}}return t};function p(e){var t,r;let n=[],{pagePath:a,urlPathname:i}=e;if(Array.isArray(e.tags)||(e.tags=[]),a)for(let r of d(a))r=`${s.zt}${r}`,(null==(t=e.tags)?void 0:t.includes(r))||e.tags.push(r),n.push(r);if(i){let t=new URL(i,"http://n").pathname,a=`${s.zt}${t}`;(null==(r=e.tags)?void 0:r.includes(a))||e.tags.push(a),n.push(a)}return n}function h(e,t){var r;e&&(null==(r=e.requestEndedState)||r.ended)}function f(e){var t;if("__nextPatched"in(t=globalThis.fetch)&&!0===t.__nextPatched)return;let r=function(e){let t=l.cache(e=>[]);return function(r,n){let a,s;if(n&&n.signal)return e(r,n);if("string"!=typeof r||n){let t="string"==typeof r||r instanceof URL?new Request(r,n):r;if("GET"!==t.method&&"HEAD"!==t.method||t.keepalive)return e(r,n);s=JSON.stringify([t.method,Array.from(t.headers.entries()),t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity]),a=t.url}else s='["GET",[],null,"follow",null,null,null,null]',a=r;let i=t(a);for(let e=0,t=i.length;e<t;e+=1){let[t,r]=i[e];if(t===s)return r.then(()=>{let t=i[e][2];if(!t)throw Error("No cached response");let[r,n]=u(t);return i[e][2]=n,r})}let o=new AbortController,l=e(r,{...n,signal:o.signal}),c=[s,l,null];return i.push(c),l.then(e=>{let[t,r]=u(e);return c[2]=r,t})}}(globalThis.fetch);globalThis.fetch=function(e,{serverHooks:{DynamicServerError:t},staticGenerationAsyncStorage:r}){let l=async(l,d)=>{var f,m;let g;try{(g=new URL(l instanceof Request?l.url:l)).username="",g.password=""}catch{g=void 0}let y=(null==g?void 0:g.href)??"",v=Date.now(),b=(null==d?void 0:null==(f=d.method)?void 0:f.toUpperCase())||"GET",_=(null==d?void 0:null==(m=d.next)?void 0:m.internal)===!0,w="1"===process.env.NEXT_OTEL_FETCH_DISABLED;return(0,a.Yz)().trace(_?n.Xy.internalFetch:n.k0.fetch,{hideSpan:w,kind:a.MU.CLIENT,spanName:["fetch",b,y].filter(Boolean).join(" "),attributes:{"http.url":y,"http.method":b,"net.peer.name":null==g?void 0:g.hostname,"net.peer.port":(null==g?void 0:g.port)||void 0}},async()=>{var n;let a,f,m;if(_)return e(l,d);let g=r.getStore();if(!g||g.isDraftMode)return e(l,d);let b=l&&"object"==typeof l&&"string"==typeof l.method,w=e=>(null==d?void 0:d[e])||(b?l[e]:null),x=e=>{var t,r,n;return void 0!==(null==d?void 0:null==(t=d.next)?void 0:t[e])?null==d?void 0:null==(r=d.next)?void 0:r[e]:b?null==(n=l.next)?void 0:n[e]:void 0},S=x("revalidate"),k=function(e,t){let r=[],n=[];for(let a=0;a<e.length;a++){let i=e[a];if("string"!=typeof i?n.push({tag:i,reason:"invalid type, must be a string"}):i.length>s.Ho?n.push({tag:i,reason:`exceeded max length of ${s.Ho}`}):r.push(i),r.length>s.cv){console.warn(`Warning: exceeded max tag count for ${t}, dropped tags:`,e.slice(a).join(", "));break}}if(n.length>0)for(let{tag:e,reason:r}of(console.warn(`Warning: invalid tags passed to ${t}: `),n))console.log(`tag: "${e}" ${r}`);return r}(x("tags")||[],`fetch ${l.toString()}`);if(Array.isArray(k))for(let e of(g.tags||(g.tags=[]),k))g.tags.includes(e)||g.tags.push(e);let E=p(g),T=g.fetchCache,C=!!g.isUnstableNoStore,A=w("cache"),R="";"string"==typeof A&&void 0!==S&&(b&&"default"===A||i.ZK(`fetch for ${y} on ${g.urlPathname} specified "cache: ${A}" and "revalidate: ${S}", only one should be specified.`),A=void 0),"force-cache"===A?S=!1:("no-cache"===A||"no-store"===A||"force-no-store"===T||"only-no-store"===T)&&(S=0),("no-cache"===A||"no-store"===A)&&(R=`cache: ${A}`),m=function(e,t){try{let r;if(!1===e)r=e;else if("number"==typeof e&&!isNaN(e)&&e>-1)r=e;else if(void 0!==e)throw Error(`Invalid revalidate value "${e}" on "${t}", must be a non-negative number or "false"`);return r}catch(e){if(e instanceof Error&&e.message.includes("Invalid revalidate"))throw e;return}}(S,g.urlPathname);let P=w("headers"),I="function"==typeof(null==P?void 0:P.get)?P:new Headers(P||{}),O=I.get("authorization")||I.get("cookie"),N=!["get","head"].includes((null==(n=w("method"))?void 0:n.toLowerCase())||"get"),$=(O||N)&&0===g.revalidate;switch(T){case"force-no-store":R="fetchCache = force-no-store";break;case"only-no-store":if("force-cache"===A||void 0!==m&&(!1===m||m>0))throw Error(`cache: 'force-cache' used on fetch for ${y} with 'export const fetchCache = 'only-no-store'`);R="fetchCache = only-no-store";break;case"only-cache":if("no-store"===A)throw Error(`cache: 'no-store' used on fetch for ${y} with 'export const fetchCache = 'only-cache'`);break;case"force-cache":(void 0===S||0===S)&&(R="fetchCache = force-cache",m=!1)}void 0===m?"default-cache"===T?(m=!1,R="fetchCache = default-cache"):$?(m=0,R="auto no cache"):"default-no-store"===T?(m=0,R="fetchCache = default-no-store"):C?(m=0,R="noStore call"):(R="auto cache",m="boolean"!=typeof g.revalidate&&void 0!==g.revalidate&&g.revalidate):R||(R=`revalidate: ${m}`),g.forceStatic&&0===m||$||void 0!==g.revalidate&&("number"!=typeof m||!1!==g.revalidate&&("number"!=typeof g.revalidate||!(m<g.revalidate)))||(0===m&&(0,o.fl)(g,"revalidate: 0"),g.revalidate=m);let j="number"==typeof m&&m>0||!1===m;if(g.incrementalCache&&j)try{a=await g.incrementalCache.fetchCacheKey(y,b?l:d)}catch(e){console.error("Failed to generate cache key for",l)}let M=g.nextFetchId??1;g.nextFetchId=M+1;let L="number"!=typeof m?s.BR:m,D=async(t,r)=>{let n=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...t?[]:["signal"]];if(b){let e=l,t={body:e._ogBody||e.body};for(let r of n)t[r]=e[r];l=new Request(e.url,t)}else if(d){let{_ogBody:e,body:r,signal:n,...a}=d;d={...a,body:e||r,signal:t?void 0:n}}let s={...d,next:{...null==d?void 0:d.next,fetchType:"origin",fetchIdx:M}};return e(l,s).then(async e=>{if(t||h(g,{start:v,url:y,cacheReason:r||R,cacheStatus:0===m||r?"skip":"miss",status:e.status,method:s.method||"GET"}),200===e.status&&g.incrementalCache&&a&&j){let t=c.from(await e.arrayBuffer());try{await g.incrementalCache.set(a,{kind:"FETCH",data:{headers:Object.fromEntries(e.headers.entries()),body:t.toString("base64"),status:e.status,url:e.url},revalidate:L},{fetchCache:!0,revalidate:m,fetchUrl:y,fetchIdx:M,tags:k})}catch(e){console.warn("Failed to set fetch cache",l,e)}let r=new Response(t,{headers:new Headers(e.headers),status:e.status});return Object.defineProperty(r,"url",{value:e.url}),r}return e})},U=()=>Promise.resolve(),Z=!1;if(a&&g.incrementalCache){U=await g.incrementalCache.lock(a);let e=g.isOnDemandRevalidate?null:await g.incrementalCache.get(a,{kindHint:"fetch",revalidate:m,fetchUrl:y,fetchIdx:M,tags:k,softTags:E});if(e?await U():f="cache-control: no-cache (hard refresh)",(null==e?void 0:e.value)&&"FETCH"===e.value.kind){if(g.isRevalidate&&e.isStale)Z=!0;else{if(e.isStale&&(g.pendingRevalidates??={},!g.pendingRevalidates[a])){let e=D(!0).then(async e=>({body:await e.arrayBuffer(),headers:e.headers,status:e.status,statusText:e.statusText})).finally(()=>{g.pendingRevalidates??={},delete g.pendingRevalidates[a||""]});e.catch(console.error),g.pendingRevalidates[a]=e}let t=e.value.data;h(g,{start:v,url:y,cacheReason:R,cacheStatus:"hit",status:t.status||200,method:(null==d?void 0:d.method)||"GET"});let r=new Response(c.from(t.body,"base64"),{headers:t.headers,status:t.status});return Object.defineProperty(r,"url",{value:e.value.data.url}),r}}}if(g.isStaticGeneration&&d&&"object"==typeof d){let{cache:e}=d;if(delete d.cache,!g.forceStatic&&"no-store"===e){let e=`no-store fetch ${l}${g.urlPathname?` ${g.urlPathname}`:""}`;(0,o.fl)(g,e),g.revalidate=0;let r=new t(e);throw g.dynamicUsageErr=r,g.dynamicUsageDescription=e,r}let r="next"in d,{next:n={}}=d;if("number"==typeof n.revalidate&&(void 0===g.revalidate||"number"==typeof g.revalidate&&n.revalidate<g.revalidate)){if(!g.forceDynamic&&!g.forceStatic&&0===n.revalidate){let e=`revalidate: 0 fetch ${l}${g.urlPathname?` ${g.urlPathname}`:""}`;(0,o.fl)(g,e);let r=new t(e);throw g.dynamicUsageErr=r,g.dynamicUsageDescription=e,r}g.forceStatic&&0===n.revalidate||(g.revalidate=n.revalidate)}r&&delete d.next}if(!a||!Z)return D(!1,f).finally(U);{g.pendingRevalidates??={};let e=g.pendingRevalidates[a];if(e){let t=await e;return new Response(t.body,{headers:t.headers,status:t.status,statusText:t.statusText})}let t=D(!0,f).then(u);return(e=t.then(async e=>{let t=e[0];return{body:await t.arrayBuffer(),headers:t.headers,status:t.status,statusText:t.statusText}}).finally(()=>{if(a){var e;(null==(e=g.pendingRevalidates)?void 0:e[a])&&delete g.pendingRevalidates[a]}})).catch(()=>{}),g.pendingRevalidates[a]=e,t.then(e=>e[1])}})};return l.__nextPatched=!0,l.__nextGetStaticStore=()=>r,l._nextOriginalFetch=e,l}(r,e)}},8816:(e,t,r)=>{"use strict";var n,a,s,i,o,l,u,c,d,p,h,f;r.d(t,{PB:()=>p,Xy:()=>i,dI:()=>f,hT:()=>g,k0:()=>u,lw:()=>m}),function(e){e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404"}(n||(n={})),function(e){e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents"}(a||(a={})),function(e){e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer"}(s||(s={})),function(e){e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.createComponentTree="NextNodeServer.createComponentTree",e.clientComponentLoading="NextNodeServer.clientComponentLoading",e.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.startResponse="NextNodeServer.startResponse",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch"}(i||(i={})),(o||(o={})).startServer="startServer.startServer",function(e){e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult"}(l||(l={})),function(e){e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch"}(u||(u={})),(c||(c={})).executeRoute="Router.executeRoute",(d||(d={})).runHandler="Node.runHandler",(p||(p={})).runHandler="AppRouteRouteHandlers.runHandler",function(e){e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport"}(h||(h={})),(f||(f={})).execute="Middleware.execute";let m=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],g=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]},6991:(e,t,r)=>{"use strict";let n;r.d(t,{MU:()=>u,Yz:()=>v});var a=r(8816);let{context:s,propagation:i,trace:o,SpanStatusCode:l,SpanKind:u,ROOT_CONTEXT:c}=n=r(1766),d=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then,p=(e,t)=>{(null==t?void 0:t.bubble)===!0?e.setAttribute("next.bubble",!0):(t&&e.recordException(t),e.setStatus({code:l.ERROR,message:null==t?void 0:t.message})),e.end()},h=new Map,f=n.createContextKey("next.rootSpanId"),m=0,g=()=>m++;class y{getTracerInstance(){return o.getTracer("next.js","0.0.1")}getContext(){return s}getActiveScopeSpan(){return o.getSpan(null==s?void 0:s.active())}withPropagatedContext(e,t,r){let n=s.active();if(o.getSpanContext(n))return t();let a=i.extract(n,e,r);return s.with(a,t)}trace(...e){var t;let[r,n,i]=e,{fn:l,options:u}="function"==typeof n?{fn:n,options:{}}:{fn:i,options:{...n}},m=u.spanName??r;if(!a.lw.includes(r)&&"1"!==process.env.NEXT_OTEL_VERBOSE||u.hideSpan)return l();let y=this.getSpanContext((null==u?void 0:u.parentSpan)??this.getActiveScopeSpan()),v=!1;y?(null==(t=o.getSpanContext(y))?void 0:t.isRemote)&&(v=!0):(y=(null==s?void 0:s.active())??c,v=!0);let b=g();return u.attributes={"next.span_name":m,"next.span_type":r,...u.attributes},s.with(y.setValue(f,b),()=>this.getTracerInstance().startActiveSpan(m,u,e=>{let t="performance"in globalThis?globalThis.performance.now():void 0,n=()=>{h.delete(b),t&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&a.hT.includes(r||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(r.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:t,end:performance.now()})};v&&h.set(b,new Map(Object.entries(u.attributes??{})));try{if(l.length>1)return l(e,t=>p(e,t));let t=l(e);if(d(t))return t.then(t=>(e.end(),t)).catch(t=>{throw p(e,t),t}).finally(n);return e.end(),n(),t}catch(t){throw p(e,t),n(),t}}))}wrap(...e){let t=this,[r,n,i]=3===e.length?e:[e[0],{},e[1]];return a.lw.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let a=arguments.length-1,o=arguments[a];if("function"!=typeof o)return t.trace(r,e,()=>i.apply(this,arguments));{let n=t.getContext().bind(s.active(),o);return t.trace(r,e,(e,t)=>(arguments[a]=function(e){return null==t||t(e),n.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?o.setSpan(s.active(),e):void 0}getRootSpanAttributes(){let e=s.active().getValue(f);return h.get(e)}}let v=(()=>{let e=new y;return()=>e})()},8842:(e,t,r)=>{"use strict";let n,a,s;async function i(){let e="_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&(await _ENTRIES.middleware_instrumentation).register;if(e)try{await e()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}r.d(t,{a:()=>eM});let o=null;function l(){return o||(o=i()),o}function u(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==r.g.process&&(process.env=r.g.process.env,r.g.process=process),Object.defineProperty(globalThis,"__import_unsupported",{value:function(e){let t=new Proxy(function(){},{get(t,r){if("then"===r)return{};throw Error(u(e))},construct(){throw Error(u(e))},apply(r,n,a){if("function"==typeof a[0])return a[0](t);throw Error(u(e))}});return new Proxy({},{get:()=>t})},enumerable:!1,configurable:!1}),l();class c extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class d extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class p extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}var h=r(9573);let f=Symbol("response"),m=Symbol("passThrough"),g=Symbol("waitUntil");class y{constructor(e){this[g]=[],this[m]=!1}respondWith(e){this[f]||(this[f]=Promise.resolve(e))}passThroughOnException(){this[m]=!0}waitUntil(e){this[g].push(e)}}class v extends y{constructor(e){super(e.request),this.sourcePage=e.page}get request(){throw new c({page:this.sourcePage})}respondWith(){throw new c({page:this.sourcePage})}}function b(e){return e.replace(/\/$/,"")||"/"}function _(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function w(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:a}=_(e);return""+t+r+n+a}function x(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:a}=_(e);return""+r+t+n+a}function S(e,t){if("string"!=typeof e)return!1;let{pathname:r}=_(e);return r===t||r.startsWith(t+"/")}function k(e,t){let r;let n=e.split("/");return(t||[]).some(t=>!!n[1]&&n[1].toLowerCase()===t.toLowerCase()&&(r=t,n.splice(1,1),e=n.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}let E=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function T(e,t){return new URL(String(e).replace(E,"localhost"),t&&String(t).replace(E,"localhost"))}let C=Symbol("NextURLInternal");class A{constructor(e,t,r){let n,a;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,a=r||{}):a=r||t||{},this[C]={url:T(e,n??a.base),options:a,basePath:""},this.analyze()}analyze(){var e,t,r,n,a;let s=function(e,t){var r,n;let{basePath:a,i18n:s,trailingSlash:i}=null!=(r=t.nextConfig)?r:{},o={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):i};a&&S(o.pathname,a)&&(o.pathname=function(e,t){if(!S(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}(o.pathname,a),o.basePath=a);let l=o.pathname;if(o.pathname.startsWith("/_next/data/")&&o.pathname.endsWith(".json")){let e=o.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),r=e[0];o.buildId=r,l="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(o.pathname=l)}if(s){let e=t.i18nProvider?t.i18nProvider.analyze(o.pathname):k(o.pathname,s.locales);o.locale=e.detectedLocale,o.pathname=null!=(n=e.pathname)?n:o.pathname,!e.detectedLocale&&o.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(l):k(l,s.locales)).detectedLocale&&(o.locale=e.detectedLocale)}return o}(this[C].url.pathname,{nextConfig:this[C].options.nextConfig,parseData:!0,i18nProvider:this[C].options.i18nProvider}),i=function(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[C].url,this[C].options.headers);this[C].domainLocale=this[C].options.i18nProvider?this[C].options.i18nProvider.detectDomainLocale(i):function(e,t,r){if(e)for(let s of(r&&(r=r.toLowerCase()),e)){var n,a;if(t===(null==(n=s.domain)?void 0:n.split(":",1)[0].toLowerCase())||r===s.defaultLocale.toLowerCase()||(null==(a=s.locales)?void 0:a.some(e=>e.toLowerCase()===r)))return s}}(null==(t=this[C].options.nextConfig)?void 0:null==(e=t.i18n)?void 0:e.domains,i);let o=(null==(r=this[C].domainLocale)?void 0:r.defaultLocale)||(null==(a=this[C].options.nextConfig)?void 0:null==(n=a.i18n)?void 0:n.defaultLocale);this[C].url.pathname=s.pathname,this[C].defaultLocale=o,this[C].basePath=s.basePath??"",this[C].buildId=s.buildId,this[C].locale=s.locale??o,this[C].trailingSlash=s.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let a=e.toLowerCase();return!n&&(S(a,"/api")||S(a,"/"+t.toLowerCase()))?e:w(e,"/"+t)}((e={basePath:this[C].basePath,buildId:this[C].buildId,defaultLocale:this[C].options.forceLocale?void 0:this[C].defaultLocale,locale:this[C].locale,pathname:this[C].url.pathname,trailingSlash:this[C].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=b(t)),e.buildId&&(t=x(w(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=w(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:x(t,"/"):b(t)}formatSearch(){return this[C].url.search}get buildId(){return this[C].buildId}set buildId(e){this[C].buildId=e}get locale(){return this[C].locale??""}set locale(e){var t,r;if(!this[C].locale||!(null==(r=this[C].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[C].locale=e}get defaultLocale(){return this[C].defaultLocale}get domainLocale(){return this[C].domainLocale}get searchParams(){return this[C].url.searchParams}get host(){return this[C].url.host}set host(e){this[C].url.host=e}get hostname(){return this[C].url.hostname}set hostname(e){this[C].url.hostname=e}get port(){return this[C].url.port}set port(e){this[C].url.port=e}get protocol(){return this[C].url.protocol}set protocol(e){this[C].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[C].url=T(e),this.analyze()}get origin(){return this[C].url.origin}get pathname(){return this[C].url.pathname}set pathname(e){this[C].url.pathname=e}get hash(){return this[C].url.hash}set hash(e){this[C].url.hash=e}get search(){return this[C].url.search}set search(e){this[C].url.search=e}get password(){return this[C].url.password}set password(e){this[C].url.password=e}get username(){return this[C].url.username}set username(e){this[C].url.username=e}get basePath(){return this[C].basePath}set basePath(e){this[C].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new A(String(this),this[C].options)}}var R=r(4101);let P=Symbol("internal request");class I extends Request{constructor(e,t={}){let r="string"!=typeof e&&"url"in e?e.url:String(e);(0,h.r4)(r),e instanceof Request?super(e,t):super(r,t);let n=new A(r,{headers:(0,h.lb)(this.headers),nextConfig:t.nextConfig});this[P]={cookies:new R.qC(this.headers),geo:t.geo||{},ip:t.ip,nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[P].cookies}get geo(){return this[P].geo}get ip(){return this[P].ip}get nextUrl(){return this[P].nextUrl}get page(){throw new d}get ua(){throw new p}get url(){return this[P].url}}var O=r(8042);let N=Symbol("internal response"),$=new Set([301,302,303,307,308]);function j(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let r=[];for(let[n,a]of e.request.headers)t.set("x-middleware-request-"+n,a),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class M extends Response{constructor(e,t={}){super(e,t);let r=this.headers,n=new Proxy(new R.nV(r),{get(e,n,a){switch(n){case"delete":case"set":return(...a)=>{let s=Reflect.apply(e[n],e,a),i=new Headers(r);return s instanceof R.nV&&r.set("x-middleware-set-cookie",s.getAll().map(e=>(0,R.Q7)(e)).join(",")),j(t,i),s};default:return O.g.get(e,n,a)}}});this[N]={cookies:n,url:t.url?new A(t.url,{headers:(0,h.lb)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[N].cookies}static json(e,t){let r=Response.json(e,t);return new M(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!$.has(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let n="object"==typeof t?t:{},a=new Headers(null==n?void 0:n.headers);return a.set("Location",(0,h.r4)(e)),new M(null,{...n,headers:a,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,h.r4)(e)),j(t,r),new M(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),j(e,t),new M(null,{...e,headers:t})}}function L(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),a=r.protocol+"//"+r.host;return n.protocol+"//"+n.host===a?n.toString().replace(a,""):n.toString()}var D=r(2039);let U=["__nextFallback","__nextLocale","__nextInferredLocaleFromDefault","__nextDefaultLocale","__nextIsNotFound",D.H4],Z=["__nextDataReq"];function q(e){return e.startsWith("/")?e:"/"+e}function F(e){return e.replace(/\.rsc($|\?)/,"$1")}var H=r(2988),B=r(8983),z=r(6991),V=r(8816);function J(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID,previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}class G extends I{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw new c({page:this.sourcePage})}respondWith(){throw new c({page:this.sourcePage})}waitUntil(){throw new c({page:this.sourcePage})}}let W={keys:e=>Array.from(e.keys()),get:(e,t)=>e.get(t)??void 0},K=(e,t)=>(0,z.Yz)().withPropagatedContext(e.headers,t,W),X=!1;async function Y(e){let t,n;!function(){if(!X&&(X=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:e,wrapRequestHandler:t}=r(1730);e(),K=t(K)}}(),await l();let a=void 0!==self.__BUILD_MANIFEST;e.request.url=F(e.request.url);let s=new A(e.request.url,{headers:e.request.headers,nextConfig:e.request.nextConfig});for(let e of[...s.searchParams.keys()]){let t=s.searchParams.getAll(e);(0,h.LI)(e,r=>{for(let e of(s.searchParams.delete(r),t))s.searchParams.append(r,e);s.searchParams.delete(e)})}let i=s.buildId;s.buildId="";let o=e.request.headers["x-nextjs-data"];o&&"/index"===s.pathname&&(s.pathname="/");let u=(0,h.EK)(e.request.headers),c=new Map;if(!a)for(let e of D.vu){let t=e.toString().toLowerCase();u.get(t)&&(c.set(t,u.get(t)),u.delete(t))}let d=new G({page:e.page,input:(function(e,t){let r="string"==typeof e,n=r?new URL(e):e;for(let e of U)n.searchParams.delete(e);if(t)for(let e of Z)n.searchParams.delete(e);return r?n.toString():n})(s,!0).toString(),init:{body:e.request.body,geo:e.request.geo,headers:u,ip:e.request.ip,method:e.request.method,nextConfig:e.request.nextConfig,signal:e.request.signal}});o&&Object.defineProperty(d,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCacheShared&&e.IncrementalCache&&(globalThis.__incrementalCache=new e.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:e.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:J()})}));let p=new v({request:d,page:e.page});if((t=await K(d,()=>"/middleware"===e.page||"/src/middleware"===e.page?(0,z.Yz)().trace(V.dI.execute,{spanName:`middleware ${d.method} ${d.nextUrl.pathname}`,attributes:{"http.target":d.nextUrl.pathname,"http.method":d.method}},()=>H.B.wrap(B.O,{req:d,renderOpts:{onUpdateCookies:e=>{n=e},previewProps:J()}},()=>e.handler(d,p))):e.handler(d,p)))&&!(t instanceof Response))throw TypeError("Expected an instance of Response to be returned");t&&n&&t.headers.set("set-cookie",n);let f=null==t?void 0:t.headers.get("x-middleware-rewrite");if(t&&f&&!a){let r=new A(f,{forceLocale:!0,headers:e.request.headers,nextConfig:e.request.nextConfig});r.host===d.nextUrl.host&&(r.buildId=i||r.buildId,t.headers.set("x-middleware-rewrite",String(r)));let n=L(String(r),String(s));o&&t.headers.set("x-nextjs-rewrite",n)}let m=null==t?void 0:t.headers.get("Location");if(t&&m&&!a){let r=new A(m,{forceLocale:!1,headers:e.request.headers,nextConfig:e.request.nextConfig});t=new Response(t.body,t),r.host===d.nextUrl.host&&(r.buildId=i||r.buildId,t.headers.set("Location",String(r))),o&&(t.headers.delete("Location"),t.headers.set("x-nextjs-redirect",L(String(r),String(s))))}let y=t||M.next(),b=y.headers.get("x-middleware-override-headers"),_=[];if(b){for(let[e,t]of c)y.headers.set(`x-middleware-request-${e}`,t),_.push(e);_.length>0&&y.headers.set("x-middleware-override-headers",b+","+_.join(","))}return{response:y,waitUntil:Promise.all(p[g]),fetchMetrics:d.fetchMetrics}}var Q=r(5996),ee=r.n(Q),et=r(5927);let er=0,en="x-vercel-cache-tags",ea="x-vercel-sc-headers",es="x-vercel-revalidate",ei="x-vercel-cache-item-name",eo=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;async function el(e,t,r=0){let n=new AbortController,a=setTimeout(()=>{n.abort()},500);return fetch(e,{...t||{},signal:n.signal}).catch(n=>{if(3!==r)return eo&&console.log(`Fetch failed for ${e} retry ${r}`),el(e,t,r+1);throw n}).finally(()=>{clearTimeout(a)})}class eu{hasMatchingTags(e,t){if(e.length!==t.length)return!1;let r=new Set(e),n=new Set(t);if(r.size!==n.size)return!1;for(let e of r)if(!n.has(e))return!1;return!0}static isAvailable(e){return!!(e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL)}constructor(e){if(this.headers={},this.headers["Content-Type"]="application/json",ea in e._requestHeaders){let t=JSON.parse(e._requestHeaders[ea]);for(let e in t)this.headers[e]=t[e];delete e._requestHeaders[ea]}let t=e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL,r=e._requestHeaders["x-vercel-sc-basepath"]||process.env.SUSPENSE_CACHE_BASEPATH;if(process.env.SUSPENSE_CACHE_AUTH_TOKEN&&(this.headers.Authorization=`Bearer ${process.env.SUSPENSE_CACHE_AUTH_TOKEN}`),t){let e=process.env.SUSPENSE_CACHE_PROTO||"https";this.cacheEndpoint=`${e}://${t}${r||""}`,eo&&console.log("using cache endpoint",this.cacheEndpoint)}else eo&&console.log("no cache endpoint available");e.maxMemoryCacheSize?n||(eo&&console.log("using memory store for fetch cache"),n=new(ee())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify("PAGE"===e.kind&&e.pageData))?void 0:t.length)||0)}})):eo&&console.log("not using memory store for fetch cache")}resetRequestCache(){null==n||n.reset()}async revalidateTag(...e){let[t]=e;if(t="string"==typeof t?[t]:t,eo&&console.log("revalidateTag",t),t.length){if(Date.now()<er){eo&&console.log("rate limited ",er);return}for(let e=0;e<Math.ceil(t.length/64);e++){let r=t.slice(64*e,64*e+64);try{let e=await el(`${this.cacheEndpoint}/v1/suspense-cache/revalidate?tags=${r.map(e=>encodeURIComponent(e)).join(",")}`,{method:"POST",headers:this.headers,next:{internal:!0}});if(429===e.status){let t=e.headers.get("retry-after")||"60000";er=Date.now()+parseInt(t)}if(!e.ok)throw Error(`Request failed with status ${e.status}.`)}catch(e){console.warn("Failed to revalidate tag",r,e)}}}}async get(...e){var t;let[r,a={}]=e,{tags:s,softTags:i,kindHint:o,fetchIdx:l,fetchUrl:u}=a;if("fetch"!==o)return null;if(Date.now()<er)return eo&&console.log("rate limited"),null;let c=null==n?void 0:n.get(r),d=(null==c?void 0:null==(t=c.value)?void 0:t.kind)==="FETCH"&&this.hasMatchingTags(s??[],c.value.tags??[]);if(this.cacheEndpoint&&(!c||!d))try{let e=Date.now(),t=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${r}`,{method:"GET",headers:{...this.headers,[ei]:u,[en]:(null==s?void 0:s.join(","))||"",[et.Ar]:(null==i?void 0:i.join(","))||""},next:{internal:!0,fetchType:"cache-get",fetchUrl:u,fetchIdx:l}});if(429===t.status){let e=t.headers.get("retry-after")||"60000";er=Date.now()+parseInt(e)}if(404===t.status)return eo&&console.log(`no fetch cache entry for ${r}, duration: ${Date.now()-e}ms`),null;if(!t.ok)throw console.error(await t.text()),Error(`invalid response from cache ${t.status}`);let a=await t.json();if(!a||"FETCH"!==a.kind)throw eo&&console.log({cached:a}),Error("invalid cache value");if("FETCH"===a.kind)for(let e of(a.tags??=[],s??[]))a.tags.includes(e)||a.tags.push(e);let o=t.headers.get("x-vercel-cache-state"),d=t.headers.get("age");c={value:a,lastModified:"fresh"!==o?Date.now()-et.BR:Date.now()-1e3*parseInt(d||"0",10)},eo&&console.log(`got fetch cache entry for ${r}, duration: ${Date.now()-e}ms, size: ${Object.keys(a).length}, cache-state: ${o} tags: ${null==s?void 0:s.join(",")} softTags: ${null==i?void 0:i.join(",")}`),c&&(null==n||n.set(r,c))}catch(e){eo&&console.error("Failed to get from fetch-cache",e)}return c||null}async set(...e){let[t,r,a]=e,{fetchCache:s,fetchIdx:i,fetchUrl:o,tags:l}=a;if(s){if(Date.now()<er){eo&&console.log("rate limited");return}if(null==n||n.set(t,{value:r,lastModified:Date.now()}),this.cacheEndpoint)try{let e=Date.now();null!==r&&"revalidate"in r&&(this.headers[es]=r.revalidate.toString()),!this.headers[es]&&null!==r&&"data"in r&&(this.headers["x-vercel-cache-control"]=r.data.headers["cache-control"]);let n=JSON.stringify({...r,tags:void 0});eo&&console.log("set cache",t);let a=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${t}`,{method:"POST",headers:{...this.headers,[ei]:o||"",[en]:(null==l?void 0:l.join(","))||""},body:n,next:{internal:!0,fetchType:"cache-set",fetchUrl:o,fetchIdx:i}});if(429===a.status){let e=a.headers.get("retry-after")||"60000";er=Date.now()+parseInt(e)}if(!a.ok)throw eo&&console.log(await a.text()),Error(`invalid response ${a.status}`);eo&&console.log(`successfully set to fetch-cache for ${t}, duration: ${Date.now()-e}ms, size: ${n.length}`)}catch(e){eo&&console.error("Failed to update fetch cache",e)}}}}var ec=r(1863),ed=r.n(ec);class ep{constructor(e){this.fs=e.fs,this.flushToDisk=e.flushToDisk,this.serverDistDir=e.serverDistDir,this.appDir=!!e._appDir,this.pagesDir=!!e._pagesDir,this.revalidatedTags=e.revalidatedTags,this.experimental=e.experimental,this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE,e.maxMemoryCacheSize&&!a?(this.debug&&console.log("using memory store for fetch cache"),a=new(ee())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})):this.debug&&console.log("not using memory store for fetch cache"),this.serverDistDir&&this.fs&&(this.tagsManifestPath=ed().join(this.serverDistDir,"..","cache","fetch-cache","tags-manifest.json"),this.loadTagsManifest())}resetRequestCache(){}loadTagsManifest(){if(this.tagsManifestPath&&this.fs&&!s){try{s=JSON.parse(this.fs.readFileSync(this.tagsManifestPath,"utf8"))}catch(e){s={version:1,items:{}}}this.debug&&console.log("loadTagsManifest",s)}}async revalidateTag(...e){let[t]=e;if(t="string"==typeof t?[t]:t,this.debug&&console.log("revalidateTag",t),0!==t.length&&(await this.loadTagsManifest(),s&&this.tagsManifestPath)){for(let e of t){let t=s.items[e]||{};t.revalidatedAt=Date.now(),s.items[e]=t}try{await this.fs.mkdir(ed().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(s||{})),this.debug&&console.log("Updated tags manifest",s)}catch(e){console.warn("Failed to update tags manifest.",e)}}}async get(...e){var t,r,n;let[i,o={}]=e,{tags:l,softTags:u,kindHint:c}=o,d=null==a?void 0:a.get(i);if(this.debug&&console.log("get",i,l,c,!!d),(null==d?void 0:null==(t=d.value)?void 0:t.kind)==="PAGE"){let e;let t=null==(n=d.value.headers)?void 0:n[et.Et];"string"==typeof t&&(e=t.split(",")),(null==e?void 0:e.length)&&(this.loadTagsManifest(),e.some(e=>{var t;return(null==s?void 0:null==(t=s.items[e])?void 0:t.revalidatedAt)&&(null==s?void 0:s.items[e].revalidatedAt)>=((null==d?void 0:d.lastModified)||Date.now())})&&(d=void 0))}return d&&(null==d?void 0:null==(r=d.value)?void 0:r.kind)==="FETCH"&&(this.loadTagsManifest(),[...l||[],...u||[]].some(e=>{var t;return!!this.revalidatedTags.includes(e)||(null==s?void 0:null==(t=s.items[e])?void 0:t.revalidatedAt)&&(null==s?void 0:s.items[e].revalidatedAt)>=((null==d?void 0:d.lastModified)||Date.now())})&&(d=void 0)),d??null}async set(...e){let[t,r,n]=e;if(null==a||a.set(t,{value:r,lastModified:Date.now()}),this.debug&&console.log("set",t),this.flushToDisk){if((null==r?void 0:r.kind)==="ROUTE"){let e=this.getFilePath(`${t}.body`,"app");await this.fs.mkdir(ed().dirname(e)),await this.fs.writeFile(e,r.body);let n={headers:r.headers,status:r.status,postponed:void 0};await this.fs.writeFile(e.replace(/\.body$/,et.EX),JSON.stringify(n,null,2));return}if((null==r?void 0:r.kind)==="PAGE"){let e="string"==typeof r.pageData,n=this.getFilePath(`${t}.html`,e?"app":"pages");if(await this.fs.mkdir(ed().dirname(n)),await this.fs.writeFile(n,r.html),await this.fs.writeFile(this.getFilePath(`${t}${e?this.experimental.ppr?et.Sx:et.hd:et.JT}`,e?"app":"pages"),e?r.pageData:JSON.stringify(r.pageData)),r.headers||r.status){let e={headers:r.headers,status:r.status,postponed:r.postponed};await this.fs.writeFile(n.replace(/\.html$/,et.EX),JSON.stringify(e))}}else if((null==r?void 0:r.kind)==="FETCH"){let e=this.getFilePath(t,"fetch");await this.fs.mkdir(ed().dirname(e)),await this.fs.writeFile(e,JSON.stringify({...r,tags:n.tags}))}}}detectFileKind(e){if(!this.appDir&&!this.pagesDir)throw Error("Invariant: Can't determine file path kind, no page directory enabled");if(!this.appDir&&this.pagesDir)return"pages";if(this.appDir&&!this.pagesDir)return"app";let t=this.getFilePath(e,"pages");if(this.fs.existsSync(t))return"pages";if(t=this.getFilePath(e,"app"),this.fs.existsSync(t))return"app";throw Error(`Invariant: Unable to determine file path kind for ${e}`)}getFilePath(e,t){switch(t){case"fetch":return ed().join(this.serverDistDir,"..","cache","fetch-cache",e);case"pages":return ed().join(this.serverDistDir,"pages",e);case"app":return ed().join(this.serverDistDir,"app",e);default:throw Error("Invariant: Can't determine file path kind")}}}let eh=["(..)(..)","(.)","(..)","(...)"];function ef(e){return void 0!==e.split("/").find(e=>eh.find(t=>e.startsWith(t)))}let em=/\/\[[^/]+?\](?=\/|$)/;function eg(e){return ef(e)&&(e=function(e){let t,r,n;for(let a of e.split("/"))if(r=eh.find(e=>a.startsWith(e))){[t,n]=e.split(r,2);break}if(!t||!r||!n)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=q(t.split("/").reduce((e,t,r,n)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t:e,"")),r){case"(.)":n="/"===t?`/${n}`:t+"/"+n;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);n=t.split("/").slice(0,-1).concat(n).join("/");break;case"(...)":n="/"+n;break;case"(..)(..)":let a=t.split("/");if(a.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);n=a.slice(0,-2).concat(n).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:n}}(e).interceptedRoute),em.test(e)}"undefined"!=typeof performance&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class ey extends Error{}function ev(e){return e.replace(/(?:\/index)?\/?$/,"")||"/"}class eb{static #e=this.timings=new Map;constructor(e){this.prerenderManifest=e}get(e){var t;let r=eb.timings.get(e);if(void 0!==r||void 0!==(r=null==(t=this.prerenderManifest.routes[e])?void 0:t.initialRevalidateSeconds))return r}set(e,t){eb.timings.set(e,t)}clear(){eb.timings.clear()}}class e_{constructor({fs:e,dev:t,appDir:r,pagesDir:n,flushToDisk:a,fetchCache:s,minimalMode:i,serverDistDir:o,requestHeaders:l,requestProtocol:u,maxMemoryCacheSize:c,getPrerenderManifest:d,fetchCacheKeyPrefix:p,CurCacheHandler:h,allowedRevalidateHeaderKeys:f,experimental:m}){var g,y,v,b;this.locks=new Map,this.unlocks=new Map;let _=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;this.hasCustomCacheHandler=!!h,h?_&&console.log("using custom cache handler",h.name):(e&&o&&(_&&console.log("using filesystem cache handler"),h=ep),eu.isAvailable({_requestHeaders:l})&&i&&s&&(_&&console.log("using fetch cache handler"),h=eu)),process.env.__NEXT_TEST_MAX_ISR_CACHE&&(c=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=t,this.disableForTestmode="true"===process.env.NEXT_PRIVATE_TEST_PROXY,this.minimalMode=i,this.requestHeaders=l,this.requestProtocol=u,this.allowedRevalidateHeaderKeys=f,this.prerenderManifest=d(),this.revalidateTimings=new eb(this.prerenderManifest),this.fetchCacheKeyPrefix=p;let w=[];l[et.y3]===(null==(y=this.prerenderManifest)?void 0:null==(g=y.preview)?void 0:g.previewModeId)&&(this.isOnDemandRevalidate=!0),i&&"string"==typeof l[et.of]&&l[et.X_]===(null==(b=this.prerenderManifest)?void 0:null==(v=b.preview)?void 0:v.previewModeId)&&(w=l[et.of].split(",")),h&&(this.cacheHandler=new h({dev:t,fs:e,flushToDisk:a,serverDistDir:o,revalidatedTags:w,maxMemoryCacheSize:c,_pagesDir:!!n,_appDir:!!r,_requestHeaders:l,fetchCacheKeyPrefix:p,experimental:m}))}calculateRevalidate(e,t,r){if(r)return new Date().getTime()-1e3;let n=this.revalidateTimings.get(ev(e))??1;return"number"==typeof n?1e3*n+t:n}_getPathname(e,t){return t?e:/^\/index(\/|$)/.test(e)&&!eg(e)?"/index"+e:"/"===e?"/index":q(e)}resetRequestCache(){var e,t;null==(t=this.cacheHandler)||null==(e=t.resetRequestCache)||e.call(t)}async unlock(e){let t=this.unlocks.get(e);t&&(t(),this.locks.delete(e),this.unlocks.delete(e))}async lock(e){process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY;let t=()=>Promise.resolve(),r=this.locks.get(e);if(r)await r;else{let r=new Promise(e=>{t=async()=>{e()}});this.locks.set(e,r),this.unlocks.set(e,t)}return t}async revalidateTag(e){var t,r;return process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,null==(r=this.cacheHandler)?void 0:null==(t=r.revalidateTag)?void 0:t.call(r,e)}async fetchCacheKey(e,t={}){let r=[],n=new TextEncoder,a=new TextDecoder;if(t.body){if("function"==typeof t.body.getReader){let e=t.body,s=[];try{await e.pipeTo(new WritableStream({write(e){"string"==typeof e?(s.push(n.encode(e)),r.push(e)):(s.push(e),r.push(a.decode(e,{stream:!0})))}})),r.push(a.decode());let i=s.reduce((e,t)=>e+t.length,0),o=new Uint8Array(i),l=0;for(let e of s)o.set(e,l),l+=e.length;t._ogBody=o}catch(e){console.error("Problem reading body",e)}}else if("function"==typeof t.body.keys){let e=t.body;for(let n of(t._ogBody=t.body,new Set([...e.keys()]))){let t=e.getAll(n);r.push(`${n}=${(await Promise.all(t.map(async e=>"string"==typeof e?e:await e.text()))).join(",")}`)}}else if("function"==typeof t.body.arrayBuffer){let e=t.body,n=await e.arrayBuffer();r.push(await e.text()),t._ogBody=new Blob([n],{type:e.type})}else"string"==typeof t.body&&(r.push(t.body),t._ogBody=t.body)}let s="function"==typeof(t.headers||{}).keys?Object.fromEntries(t.headers):Object.assign({},t.headers);"traceparent"in s&&delete s.traceparent;let i=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",e,t.method,s,t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity,t.cache,r]);{var o;let e=n.encode(i);return o=await crypto.subtle.digest("SHA-256",e),Array.prototype.map.call(new Uint8Array(o),e=>e.toString(16).padStart(2,"0")).join("")}}async get(e,t={}){var r,n;let a,s;if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.disableForTestmode||this.dev&&("fetch"!==t.kindHint||"no-cache"===this.requestHeaders["cache-control"]))return null;e=this._getPathname(e,"fetch"===t.kindHint);let i=null,o=t.revalidate,l=await (null==(r=this.cacheHandler)?void 0:r.get(e,t));if((null==l?void 0:null==(n=l.value)?void 0:n.kind)==="FETCH")return[...t.tags||[],...t.softTags||[]].some(e=>{var t;return null==(t=this.revalidatedTags)?void 0:t.includes(e)})?null:(o=o||l.value.revalidate,{isStale:(Date.now()-(l.lastModified||0))/1e3>o,value:{kind:"FETCH",data:l.value.data,revalidate:o},revalidateAfter:Date.now()+1e3*o});let u=this.revalidateTimings.get(ev(e));return(null==l?void 0:l.lastModified)===-1?(a=-1,s=-1*et.BR):a=!!(!1!==(s=this.calculateRevalidate(e,(null==l?void 0:l.lastModified)||Date.now(),this.dev&&"fetch"!==t.kindHint))&&s<Date.now())||void 0,l&&(i={isStale:a,curRevalidate:u,revalidateAfter:s,value:l.value}),!l&&this.prerenderManifest.notFoundRoutes.includes(e)&&(i={isStale:a,value:null,curRevalidate:u,revalidateAfter:s},this.set(e,i.value,t)),i}async set(e,t,r){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.disableForTestmode||this.dev&&!r.fetchCache)return;let n=JSON.stringify(t).length;if(r.fetchCache&&!this.hasCustomCacheHandler&&n>2097152){if(this.dev)throw Error(`Failed to set Next.js data cache, items over 2MB can not be cached (${n} bytes)`);return}e=this._getPathname(e,r.fetchCache);try{var a;void 0===r.revalidate||r.fetchCache||this.revalidateTimings.set(e,r.revalidate),await (null==(a=this.cacheHandler)?void 0:a.set(e,t,r))}catch(t){console.warn("Failed to update prerender cache for",e,t)}}}function ew(e){let{re:t,groups:r}=e;return e=>{let n=t.exec(e);if(!n)return!1;let a=e=>{try{return decodeURIComponent(e)}catch(e){throw new ey("failed to decode param")}},s={};return Object.keys(r).forEach(e=>{let t=r[e],i=n[t.pos];void 0!==i&&(s[e]=~i.indexOf("/")?i.split("/").map(e=>a(e)):t.repeat?[a(i)]:a(i))}),s}}let ex=/[|\\{}()[\]^$+*?.-]/,eS=/[|\\{}()[\]^$+*?.-]/g;function ek(e){return ex.test(e)?e.replace(eS,"\\$&"):e}function eE(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function eT(e){let{parameterizedRoute:t,groups:r}=function(e){let t=b(e).slice(1).split("/"),r={},n=1;return{parameterizedRoute:t.map(e=>{let t=eh.find(t=>e.startsWith(t)),a=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&a){let{key:e,optional:s,repeat:i}=eE(a[1]);return r[e]={pos:n++,repeat:i,optional:s},"/"+ek(t)+"([^/]+?)"}if(!a)return"/"+ek(e);{let{key:e,repeat:t,optional:s}=eE(a[1]);return r[e]={pos:n++,repeat:t,optional:s},t?s?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}function eC(e){let{interceptionMarker:t,getSafeRouteKey:r,segment:n,routeKeys:a,keyPrefix:s}=e,{key:i,optional:o,repeat:l}=eE(n),u=i.replace(/\W/g,"");s&&(u=""+s+u);let c=!1;(0===u.length||u.length>30)&&(c=!0),isNaN(parseInt(u.slice(0,1)))||(c=!0),c&&(u=r()),s?a[u]=""+s+i:a[u]=i;let d=t?ek(t):"";return l?o?"(?:/"+d+"(?<"+u+">.+?))?":"/"+d+"(?<"+u+">.+?)":"/"+d+"(?<"+u+">[^/]+?)"}class eA{constructor(e){this.definition=e,eg(e.pathname)&&(this.dynamic=ew(eT(e.pathname)))}get identity(){return this.definition.pathname}get isDynamic(){return void 0!==this.dynamic}match(e){let t=this.test(e);return t?{definition:this.definition,params:t.params}:null}test(e){if(this.dynamic){let t=this.dynamic(e);return t?{params:t}:null}return e===this.definition.pathname?{}:null}}let eR=Symbol.for("__next_internal_waitUntil__"),eP=globalThis[eR]||(globalThis[eR]={waitUntilCounter:0,waitUntilResolve:void 0,waitUntilPromise:null});var eI=r(7960),eO=r(9548);function eN(e){let t={};return e.forEach((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t}function e$(e){return e.replace(/__ESC_COLON_/gi,":")}function ej(e,t){if(!e.includes(":"))return e;for(let r of Object.keys(t))e.includes(":"+r)&&(e=e.replace(RegExp(":"+r+"\\*","g"),":"+r+"--ESCAPED_PARAM_ASTERISKS").replace(RegExp(":"+r+"\\?","g"),":"+r+"--ESCAPED_PARAM_QUESTION").replace(RegExp(":"+r+"\\+","g"),":"+r+"--ESCAPED_PARAM_PLUS").replace(RegExp(":"+r+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+r));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,eO.MY)("/"+e,{validate:!1})(t).slice(1)}class eM{constructor(e){this.routeModule=e,this.matcher=new eA(e.definition)}static wrap(e,t={}){let r=new eM(e);return e=>Y({...e,...t,IncrementalCache:e_,handler:r.handler.bind(r)})}async handler(e,t){let{params:n}=(function({page:e,i18n:t,basePath:n,rewrites:a,pageIsDynamic:s,trailingSlash:i,caseSensitive:o}){let l,u,c;return s&&(c=(u=ew(l=function(e,t){let r=function(e,t){let r;let n=b(e).slice(1).split("/"),a=(r=0,()=>{let e="",t=++r;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),s={};return{namedParameterizedRoute:n.map(e=>{let r=eh.some(t=>e.startsWith(t)),n=e.match(/\[((?:\[.*\])|.+)\]/);if(r&&n){let[r]=e.split(n[0]);return eC({getSafeRouteKey:a,interceptionMarker:r,segment:n[1],routeKeys:s,keyPrefix:t?et.u7:void 0})}return n?eC({getSafeRouteKey:a,segment:n[1],routeKeys:s,keyPrefix:t?et.dN:void 0}):"/"+ek(e)}).join(""),routeKeys:s}}(e,t);return{...eT(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}(e,!1)))(e)),{handleRewrites:function(l,c){let d={},p=c.pathname,h=a=>{let h=(function(e,t){let r=[],n=(0,eO.Bo)(e,r,{delimiter:"/",sensitive:"boolean"==typeof(null==t?void 0:t.sensitive)&&t.sensitive,strict:null==t?void 0:t.strict}),a=(0,eO.WS)((null==t?void 0:t.regexModifier)?new RegExp(t.regexModifier(n.source),n.flags):n,r);return(e,n)=>{if("string"!=typeof e)return!1;let s=a(e);if(!s)return!1;if(null==t?void 0:t.removeUnnamedParams)for(let e of r)"number"==typeof e.name&&delete s.params[e.name];return{...n,...s.params}}})(a.source+(i?"(/)?":""),{removeUnnamedParams:!0,strict:!0,sensitive:!!o})(c.pathname);if((a.has||a.missing)&&h){let e=function(e,t,n,a){void 0===n&&(n=[]),void 0===a&&(a=[]);let s={},i=n=>{let a;let i=n.key;switch(n.type){case"header":i=i.toLowerCase(),a=e.headers[i];break;case"cookie":if("cookies"in e)a=e.cookies[n.key];else{var o;a=(o=e.headers,function(){let{cookie:e}=o;if(!e)return{};let{parse:t}=r(4337);return t(Array.isArray(e)?e.join("; "):e)})()[n.key]}break;case"query":a=t[i];break;case"host":{let{host:t}=(null==e?void 0:e.headers)||{};a=null==t?void 0:t.split(":",1)[0].toLowerCase()}}if(!n.value&&a)return s[function(e){let t="";for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);(n>64&&n<91||n>96&&n<123)&&(t+=e[r])}return t}(i)]=a,!0;if(a){let e=RegExp("^"+n.value+"$"),t=Array.isArray(a)?a.slice(-1)[0].match(e):a.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach(e=>{s[e]=t.groups[e]}):"host"===n.type&&t[0]&&(s.host=t[0])),!0}return!1};return!!n.every(e=>i(e))&&!a.some(e=>i(e))&&s}(l,c.query,a.has,a.missing);e?Object.assign(h,e):h=!1}if(h){let{parsedDestination:r,destQuery:i}=function(e){let t;let r=Object.assign({},e.query);delete r.__nextLocale,delete r.__nextDefaultLocale,delete r.__nextDataReq,delete r.__nextInferredLocaleFromDefault,delete r[D.H4];let n=e.destination;for(let t of Object.keys({...e.params,...r}))n=n.replace(RegExp(":"+ek(t),"g"),"__ESC_COLON_"+t);let a=function(e){if(e.startsWith("/"))return function(e,t){let r=new URL("http://n"),n=e.startsWith(".")?new URL("http://n"):r,{pathname:a,searchParams:s,search:i,hash:o,href:l,origin:u}=new URL(e,n);if(u!==r.origin)throw Error("invariant: invalid relative URL, router received "+e);return{pathname:a,query:eN(s),search:i,hash:o,href:l.slice(r.origin.length)}}(e);let t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:eN(t.searchParams),search:t.search}}(n),s=a.query,i=e$(""+a.pathname+(a.hash||"")),o=e$(a.hostname||""),l=[],u=[];(0,eO.Bo)(i,l),(0,eO.Bo)(o,u);let c=[];l.forEach(e=>c.push(e.name)),u.forEach(e=>c.push(e.name));let d=(0,eO.MY)(i,{validate:!1}),p=(0,eO.MY)(o,{validate:!1});for(let[t,r]of Object.entries(s))Array.isArray(r)?s[t]=r.map(t=>ej(e$(t),e.params)):"string"==typeof r&&(s[t]=ej(e$(r),e.params));let h=Object.keys(e.params).filter(e=>"nextInternalLocale"!==e);if(e.appendParamsToQuery&&!h.some(e=>c.includes(e)))for(let t of h)t in s||(s[t]=e.params[t]);if(ef(i))for(let t of i.split("/")){let r=eh.find(e=>t.startsWith(e));if(r){e.params["0"]=r;break}}try{let[r,n]=(t=d(e.params)).split("#",2);a.hostname=p(e.params),a.pathname=r,a.hash=(n?"#":"")+(n||""),delete a.search}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match");throw e}return a.query={...r,...a.query},{newUrl:t,destQuery:s,parsedDestination:a}}({appendParamsToQuery:!0,destination:a.destination,params:h,query:c.query});if(r.protocol)return!0;if(Object.assign(d,i,h),Object.assign(c.query,r.query),delete r.query,Object.assign(c,r),p=c.pathname,n&&(p=p.replace(RegExp(`^${n}`),"")||"/"),t){let e=k(p,t.locales);p=e.pathname,c.query.nextInternalLocale=e.detectedLocale||h.nextInternalLocale}if(p===e)return!0;if(s&&u){let e=u(p);if(e)return c.query={...c.query,...e},!0}}return!1};for(let e of a.beforeFiles||[])h(e);if(p!==e){let t=!1;for(let e of a.afterFiles||[])if(t=h(e))break;if(!t&&!(()=>{let t=b(p||"");return t===b(e)||(null==u?void 0:u(t))})()){for(let e of a.fallback||[])if(t=h(e))break}}return d},defaultRouteRegex:l,dynamicRouteMatcher:u,defaultRouteMatches:c,getParamsFromRouteMatches:function(e,r,n){return ew(function(){let{groups:e,routeKeys:a}=l;return{re:{exec:s=>{let i=Object.fromEntries(new URLSearchParams(s)),o=t&&n&&i["1"]===n;for(let e of Object.keys(i)){let t=i[e];e!==et.dN&&e.startsWith(et.dN)&&(i[e.substring(et.dN.length)]=t,delete i[e])}let l=Object.keys(a||{}),u=e=>{if(t){let a=Array.isArray(e),s=a?e[0]:e;if("string"==typeof s&&t.locales.some(e=>e.toLowerCase()===s.toLowerCase()&&(n=e,r.locale=n,!0)))return a&&e.splice(0,1),!a||0===e.length}return!1};return l.every(e=>i[e])?l.reduce((t,r)=>{let n=null==a?void 0:a[r];return n&&!u(i[r])&&(t[e[n].pos]=i[r]),t},{}):Object.keys(i).reduce((e,t)=>{if(!u(i[t])){let r=t;return o&&(r=parseInt(t,10)-1+""),Object.assign(e,{[r]:i[t]})}return e},{})}},groups:e}}())(e.headers["x-now-route-matches"])},normalizeDynamicRouteParams:(e,t)=>{var r,n,a;let s;return r=e,n=l,a=c,s=!0,n?{params:r=Object.keys(n.groups).reduce((e,i)=>{let o=r[i];"string"==typeof o&&(o=F(o)),Array.isArray(o)&&(o=o.map(e=>("string"==typeof e&&(e=F(e)),e)));let l=a[i],u=n.groups[i].optional;return((Array.isArray(l)?l.some(e=>Array.isArray(o)?o.some(t=>t.includes(e)):null==o?void 0:o.includes(e)):null==o?void 0:o.includes(l))||void 0===o&&!(u&&t))&&(s=!1),u&&(!o||Array.isArray(o)&&1===o.length&&("index"===o[0]||o[0]===`[[...${i}]]`))&&(o=void 0,delete r[i]),o&&"string"==typeof o&&n.groups[i].repeat&&(o=o.split("/")),o&&(e[i]=o),e},{}),hasValidParams:s}:{params:r,hasValidParams:!1}},normalizeVercelUrl:(e,t,r)=>(function(e,t,r,n,a){if(n&&t&&a){let t=(0,eI.parse)(e.url,!0);for(let e of(delete t.search,Object.keys(t.query))){let n=e!==et.dN&&e.startsWith(et.dN),s=e!==et.u7&&e.startsWith(et.u7);(n||s||(r||Object.keys(a.groups)).includes(e))&&delete t.query[e]}e.url=(0,eI.format)(t)}})(e,t,r,s,l),interpolateDynamicPath:(e,t)=>(function(e,t,r){if(!r)return e;for(let n of Object.keys(r.groups)){let{optional:a,repeat:s}=r.groups[n],i=`[${s?"...":""}${n}]`;a&&(i=`[${i}]`);let o=e.indexOf(i);if(o>-1){let r;let a=t[n];r=Array.isArray(a)?a.map(e=>e&&encodeURIComponent(e)).join("/"):a?encodeURIComponent(a):"",e=e.slice(0,o)+r+e.slice(o+i.length)}}return e})(e,t,l)}})({pageIsDynamic:this.matcher.isDynamic,page:this.matcher.definition.pathname,basePath:e.nextUrl.basePath,rewrites:{},caseSensitive:!1}).normalizeDynamicRouteParams(eN(e.nextUrl.searchParams)),a={params:n,prerenderManifest:{version:4,routes:{},dynamicRoutes:{},preview:J(),notFoundRoutes:[]},renderOpts:{supportsDynamicResponse:!0,experimental:{ppr:!1}}},s=await this.routeModule.handle(e,a),i=[eP.waitUntilPromise];return a.renderOpts.waitUntil&&i.push(a.renderOpts.waitUntil),t.waitUntil(Promise.all(i)),s}}},3665:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});var n=r(8042);class a extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new a}}class s extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,a){if("symbol"==typeof r)return n.g.get(t,r,a);let s=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===s);if(void 0!==i)return n.g.get(t,i,a)},set(t,r,a,s){if("symbol"==typeof r)return n.g.set(t,r,a,s);let i=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===i);return n.g.set(t,o??r,a,s)},has(t,r){if("symbol"==typeof r)return n.g.has(t,r);let a=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===a);return void 0!==s&&n.g.has(t,s)},deleteProperty(t,r){if("symbol"==typeof r)return n.g.deleteProperty(t,r);let a=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===a);return void 0===s||n.g.deleteProperty(t,s)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return a.callable;default:return n.g.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new s(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},8042:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});class n{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},6776:(e,t,r)=>{"use strict";r.d(t,{Qb:()=>o,_5:()=>u,vr:()=>c});var n=r(4101),a=r(8042),s=r(9182);class i extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new i}}class o{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return i.callable;default:return a.g.get(e,t,r)}}})}}let l=Symbol.for("next.mutated.cookies");function u(e,t){let r=function(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}(t);if(0===r.length)return!1;let a=new n.nV(e),s=a.getAll();for(let e of r)a.set(e);for(let e of s)a.set(e);return!0}class c{static wrap(e,t){let r=new n.nV(new Headers);for(let t of e.getAll())r.set(t);let i=[],o=new Set,u=()=>{let e=s.A.getStore();if(e&&(e.pathWasRevalidated=!0),i=r.getAll().filter(e=>o.has(e.name)),t){let e=[];for(let t of i){let r=new n.nV(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case l:return i;case"delete":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{u()}};case"set":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{u()}};default:return a.g.get(e,t,r)}}})}}},4101:(e,t,r)=>{"use strict";r.d(t,{Q7:()=>n.stringifyCookie,nV:()=>n.ResponseCookies,qC:()=>n.RequestCookies});var n=r(676)},9573:(e,t,r)=>{"use strict";r.d(t,{EK:()=>a,LI:()=>l,l$:()=>s,lb:()=>i,r4:()=>o});var n=r(5927);function a(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function s(e){var t,r,n,a,s,i=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,s=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),a=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(s=!0,o=a,i.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!s||o>=e.length)&&i.push(e.substring(t,e.length))}return i}function i(e){let t={},r=[];if(e)for(let[n,a]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...s(a)),t[n]=1===r.length?r[0]:r):t[n]=a;return t}function o(e){try{return String(new URL(String(e)))}catch(t){throw Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}function l(e,t){for(let r of[n.dN,n.u7])e!==r&&e.startsWith(r)&&t(e.substring(r.length))}},1863:(e,t,r)=>{"use strict";let n;n=r(6914),e.exports=n},7037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getTestReqInfo:function(){return i},withRequest:function(){return s}});let n=new(r(2067)).AsyncLocalStorage;function a(e,t){let r=t.header(e,"next-test-proxy-port");if(r)return{url:t.url(e),proxyPort:Number(r),testData:t.header(e,"next-test-data")||""}}function s(e,t,r){let s=a(e,t);return s?n.run(s,r):r()}function i(e,t){return n.getStore()||(e&&t?a(e,t):void 0)}},3818:(e,t,r)=>{"use strict";var n=r(6195).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{handleFetch:function(){return o},interceptFetch:function(){return l},reader:function(){return s}});let a=r(7037),s={url:e=>e.url,header:(e,t)=>e.headers.get(t)};async function i(e,t){let{url:r,method:a,headers:s,body:i,cache:o,credentials:l,integrity:u,mode:c,redirect:d,referrer:p,referrerPolicy:h}=t;return{testData:e,api:"fetch",request:{url:r,method:a,headers:[...Array.from(s),["next-test-stack",function(){let e=(Error().stack??"").split("\n");for(let t=1;t<e.length;t++)if(e[t].length>0){e=e.slice(t);break}return(e=(e=(e=e.filter(e=>!e.includes("/next/dist/"))).slice(0,5)).map(e=>e.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:i?n.from(await t.arrayBuffer()).toString("base64"):null,cache:o,credentials:l,integrity:u,mode:c,redirect:d,referrer:p,referrerPolicy:h}}}async function o(e,t){let r=(0,a.getTestReqInfo)(t,s);if(!r)return e(t);let{testData:o,proxyPort:l}=r,u=await i(o,t),c=await e(`http://localhost:${l}`,{method:"POST",body:JSON.stringify(u),next:{internal:!0}});if(!c.ok)throw Error(`Proxy request failed: ${c.status}`);let d=await c.json(),{api:p}=d;switch(p){case"continue":return e(t);case"abort":case"unhandled":throw Error(`Proxy request aborted [${t.method} ${t.url}]`)}return function(e){let{status:t,headers:r,body:a}=e.response;return new Response(a?n.from(a,"base64"):null,{status:t,headers:new Headers(r)})}(d)}function l(e){return r.g.fetch=function(t,r){var n;return(null==r?void 0:null==(n=r.next)?void 0:n.internal)?e(t,r):o(e,new Request(t,r))},()=>{r.g.fetch=e}}},1730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{interceptTestApis:function(){return s},wrapRequestHandler:function(){return i}});let n=r(7037),a=r(3818);function s(){return(0,a.interceptFetch)(r.g.fetch)}function i(e){return(t,r)=>(0,n.withRequest)(t,a.reader,()=>e(t,r))}},87:(e,t,r)=>{"use strict";var n=r(6195).Buffer;let a=void 0!==n,s=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,i=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function o(e,t,r){null==r&&null!==t&&"object"==typeof t&&(r=t,t=void 0),a&&n.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let o=JSON.parse(e,t);if(null===o||"object"!=typeof o)return o;let u=r&&r.protoAction||"error",c=r&&r.constructorAction||"error";if("ignore"===u&&"ignore"===c)return o;if("ignore"!==u&&"ignore"!==c){if(!1===s.test(e)&&!1===i.test(e))return o}else if("ignore"!==u&&"ignore"===c){if(!1===s.test(e))return o}else if(!1===i.test(e))return o;return l(o,{protoAction:u,constructorAction:c,safe:r&&r.safe})}function l(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let a=[e];for(;a.length;){let e=a;for(let s of(a=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(s,"__proto__")){if(!0===n)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete s.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(s,"constructor")&&Object.prototype.hasOwnProperty.call(s.constructor,"prototype")){if(!0===n)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete s.constructor}for(let e in s){let t=s[e];t&&"object"==typeof t&&a.push(t)}}}return e}function u(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(e,t,r)}finally{Error.stackTraceLimit=n}}e.exports=u,e.exports.default=u,e.exports.parse=u,e.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},e.exports.scan=l},5228:(e,t,r)=>{"use strict";r.d(t,{P:()=>i});let n=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class a{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}}let s=globalThis.AsyncLocalStorage;function i(){return s?new s:new a}},8983:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});let n=(0,r(5228).P)()},9182:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(5228).P)()},8079:(e,t,r)=>{"use strict";r.d(t,{fr:()=>D});var n=class extends Error{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:a,responseBody:s,cause:i,isRetryable:o=null!=n&&(408===n||409===n||429===n||n>=500),data:l}){super(e),this.name="AI_APICallError",this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=a,this.responseBody=s,this.cause=i,this.isRetryable=o,this.data=l}static isAPICallError(e){return e instanceof Error&&"AI_APICallError"===e.name&&"string"==typeof e.url&&"object"==typeof e.requestBodyValues&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.responseHeaders||"object"==typeof e.responseHeaders)&&(null==e.responseBody||"string"==typeof e.responseBody)&&(null==e.cause||"object"==typeof e.cause)&&"boolean"==typeof e.isRetryable&&(null==e.data||"object"==typeof e.data)}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}},a=class extends Error{constructor({message:e="Empty response body"}={}){super(e),this.name="AI_EmptyResponseBodyError"}static isEmptyResponseBodyError(e){return e instanceof Error&&"AI_EmptyResponseBodyError"===e.name}toJSON(){return{name:this.name,message:this.message,stack:this.stack}}},s=class extends Error{constructor({prompt:e,message:t}){super(`Invalid prompt: ${t}`),this.name="AI_InvalidPromptError",this.prompt=e}static isInvalidPromptError(e){return e instanceof Error&&"AI_InvalidPromptError"===e.name&&null!=prompt}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}},i=class extends Error{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super(t),this.name="AI_InvalidResponseDataError",this.data=e}static isInvalidResponseDataError(e){return e instanceof Error&&"AI_InvalidResponseDataError"===e.name&&null!=e.data}toJSON(){return{name:this.name,message:this.message,stack:this.stack,data:this.data}}};function o(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}var l=class extends Error{constructor({text:e,cause:t}){super(`JSON parsing failed: Text: ${e}.
Error message: ${o(t)}`),this.name="AI_JSONParseError",this.cause=t,this.text=e}static isJSONParseError(e){return e instanceof Error&&"AI_JSONParseError"===e.name&&"string"==typeof e.text&&"string"==typeof e.cause}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}},u=class extends Error{constructor({message:e}){super(e),this.name="AI_LoadAPIKeyError"}static isLoadAPIKeyError(e){return e instanceof Error&&"AI_LoadAPIKeyError"===e.name}toJSON(){return{name:this.name,message:this.message}}},c=class extends Error{constructor(e){super(`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`),this.name="AI_TooManyEmbeddingValuesForCallError",this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInvalidPromptError(e){return e instanceof Error&&"AI_TooManyEmbeddingValuesForCallError"===e.name&&"provider"in e&&"string"==typeof e.provider&&"modelId"in e&&"string"==typeof e.modelId&&"maxEmbeddingsPerCall"in e&&"number"==typeof e.maxEmbeddingsPerCall&&"values"in e&&Array.isArray(e.values)}toJSON(){return{name:this.name,message:this.message,stack:this.stack,provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:this.values}}},d=class extends Error{constructor({value:e,cause:t}){super(`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${o(t)}`),this.name="AI_TypeValidationError",this.cause=t,this.value=e}static isTypeValidationError(e){return e instanceof Error&&"AI_TypeValidationError"===e.name&&"string"==typeof e.value&&"string"==typeof e.cause}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}},p=class extends Error{constructor({functionality:e}){super(`'${e}' functionality not supported.`),this.name="AI_UnsupportedFunctionalityError",this.functionality=e}static isUnsupportedFunctionalityError(e){return e instanceof Error&&"AI_UnsupportedFunctionalityError"===e.name&&"string"==typeof e.functionality}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}},h=r(87);let f=[239,187,191];class m extends TransformStream{constructor(){let e;super({start(t){e=function(e){let t,r,n,a,s,i,o;return l(),{feed:function(l){var u;r=r?r+l:l,t&&(u=r,f.every((e,t)=>u.charCodeAt(t)===e))&&(r=r.slice(f.length)),t=!1;let c=r.length,d=0,p=!1;for(;d<c;){let t;p&&("\n"===r[d]&&++d,p=!1);let l=-1,u=a;for(let e=n;l<0&&e<c;++e)":"===(t=r[e])&&u<0?u=e-d:"\r"===t?(p=!0,l=e-d):"\n"===t&&(l=e-d);if(l<0){n=c-d,a=u;break}n=0,a=-1,function(t,r,n,a){if(0===a){o.length>0&&(e({type:"event",id:s,event:i||void 0,data:o.slice(0,-1)}),o="",s=void 0),i=void 0;return}let l=n<0,u=t.slice(r,r+(l?a:n)),c=0;c=l?a:" "===t[r+n+1]?n+2:n+1;let d=r+c,p=a-c,h=t.slice(d,d+p).toString();if("data"===u)o+=h?"".concat(h,"\n"):"\n";else if("event"===u)i=h;else if("id"!==u||h.includes("\0")){if("retry"===u){let t=parseInt(h,10);Number.isNaN(t)||e({type:"reconnect-interval",value:t})}}else s=h}(r,d,u,l),d+=l+1}d===c?r="":d>0&&(r=r.slice(d))},reset:l};function l(){t=!0,r="",n=0,a=-1,s=void 0,i=void 0,o=""}}(e=>{"event"===e.type&&t.enqueue(e)})},transform(t){e.feed(t)}})}}function g(e){let t={};return e.headers.forEach((e,r)=>{t[r]=e}),t}var y=((e,t=21)=>(r=t)=>{let n="",a=r;for(;a--;)n+=e[Math.random()*e.length|0];return n})("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7);function v(e){return e instanceof DOMException&&("AbortError"===e.name||"TimeoutError"===e.name)}function b({text:e,schema:t}){try{let r=h.parse(e);if(null==t)return{success:!0,value:r};return function({value:e,schema:t}){try{let r=t.safeParse(e);if(r.success)return{success:!0,value:r.data};return{success:!1,error:new d({value:e,cause:r.error})}}catch(t){return{success:!1,error:d.isTypeValidationError(t)?t:new d({value:e,cause:t})}}}({value:r,schema:t})}catch(t){return{success:!1,error:l.isJSONParseError(t)?t:new l({text:e,cause:t})}}}var _=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s})=>w({url:e,headers:{...t,"Content-Type":"application/json"},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s}),w=async({url:e,headers:t={},body:r,successfulResponseHandler:a,failedResponseHandler:s,abortSignal:i})=>{try{let o=Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t)),l=await fetch(e,{method:"POST",headers:o,body:r.content,signal:i}),u=g(l);if(!l.ok){let t;try{t=await s({response:l,url:e,requestBodyValues:r.values})}catch(t){if(v(t)||n.isAPICallError(t))throw t;throw new n({message:"Failed to process error response",cause:t,statusCode:l.status,url:e,responseHeaders:u,requestBodyValues:r.values})}throw t.value}try{return await a({response:l,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(v(t)||n.isAPICallError(t)))throw t;throw new n({message:"Failed to process successful response",cause:t,statusCode:l.status,url:e,responseHeaders:u,requestBodyValues:r.values})}}catch(t){if(v(t))throw t;if(t instanceof TypeError&&"fetch failed"===t.message){let a=t.cause;if(null!=a)throw new n({message:`Cannot connect to API: ${a.message}`,cause:a,url:e,requestBodyValues:r.values,isRetryable:!0})}throw t}},x=e=>async({response:t})=>{let r=g(t);if(null==t.body)throw new a({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new m).pipeThrough(new TransformStream({transform({data:t},r){"[DONE]"!==t&&r.enqueue(b({text:t,schema:e}))}}))}},S=e=>async({response:t,url:r,requestBodyValues:a})=>{let s=await t.text(),i=b({text:s,schema:e}),o=g(t);if(!i.success)throw new n({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:s,url:r,requestBodyValues:a});return{responseHeaders:o,value:i.value}},k=r(5340);function E(e){var t,r;return null!=(r=null==(t=null==e?void 0:e.content)?void 0:t.map(({token:e,logprob:t,top_logprobs:r})=>({token:e,logprob:t,topLogprobs:r?r.map(({token:e,logprob:t})=>({token:e,logprob:t})):[]})))?r:void 0}function T(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var C=k.Ry({error:k.Ry({message:k.Z_(),type:k.Z_(),param:k.Yj().nullable(),code:k.Z_().nullable()})}),A=(({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:a,url:s,requestBodyValues:i})=>{let o=await a.text(),u=g(a);if(""===o.trim())return{responseHeaders:u,value:new n({message:a.statusText,url:s,requestBodyValues:i,statusCode:a.status,responseHeaders:u,responseBody:o,isRetryable:null==r?void 0:r(a)})};try{let c=function({text:e,schema:t}){try{let r=h.parse(e);if(null==t)return r;return function({value:e,schema:t}){try{return t.parse(e)}catch(t){throw new d({value:e,cause:t})}}({value:r,schema:t})}catch(t){if(l.isJSONParseError(t)||d.isTypeValidationError(t))throw t;throw new l({text:e,cause:t})}}({text:o,schema:e});return{responseHeaders:u,value:new n({message:t(c),url:s,requestBodyValues:i,statusCode:a.status,responseHeaders:u,responseBody:o,data:c,isRetryable:null==r?void 0:r(a,c)})}}catch(e){return{responseHeaders:u,value:new n({message:a.statusText,url:s,requestBodyValues:i,statusCode:a.status,responseHeaders:u,responseBody:o,isRetryable:null==r?void 0:r(a)})}}})({errorSchema:C,errorToMessage:e=>e.error.message}),R=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:a,frequencyPenalty:s,presencePenalty:i,seed:o}){let l=e.type,u={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:!0===this.settings.logprobs||"number"==typeof this.settings.logprobs,top_logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,user:this.settings.user,max_tokens:r,temperature:n,top_p:a,frequency_penalty:s,presence_penalty:i,seed:o,messages:function(e){let t=[];for(let{role:r,content:n}of e)switch(r){case"system":t.push({role:"system",content:n});break;case"user":if(1===n.length&&"text"===n[0].type){t.push({role:"user",content:n[0].text});break}t.push({role:"user",content:n.map(e=>{var t;switch(e.type){case"text":return{type:"text",text:e.text};case"image":return{type:"image_url",image_url:{url:e.image instanceof URL?e.image.toString():`data:${null!=(t=e.mimeType)?t:"image/jpeg"};base64,${function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return globalThis.btoa(t)}(e.image)}`}}}})});break;case"assistant":{let e="",r=[];for(let t of n)switch(t.type){case"text":e+=t.text;break;case"tool-call":r.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:JSON.stringify(t.args)}});break;default:throw Error(`Unsupported part: ${t}`)}t.push({role:"assistant",content:e,tool_calls:r.length>0?r:void 0});break}case"tool":for(let e of n)t.push({role:"tool",tool_call_id:e.toolCallId,content:JSON.stringify(e.result)});break;default:throw Error(`Unsupported role: ${r}`)}return t}(t)};switch(l){case"regular":return{...u,...function(e){var t;let r=(null==(t=e.tools)?void 0:t.length)?e.tools:void 0;if(null==r)return{tools:void 0,tool_choice:void 0};let n=r.map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:e.parameters}})),a=e.toolChoice;if(null==a)return{tools:n,tool_choice:void 0};let s=a.type;switch(s){case"auto":case"none":case"required":return{tools:n,tool_choice:s};case"tool":return{tools:n,tool_choice:{type:"function",function:{name:a.toolName}}};default:throw Error(`Unsupported tool choice type: ${s}`)}}(e)};case"object-json":return{...u,response_format:{type:"json_object"}};case"object-tool":return{...u,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]};case"object-grammar":throw new p({functionality:"object-grammar mode"});default:throw Error(`Unsupported type: ${l}`)}}async doGenerate(e){var t,r;let n=this.getArgs(e),{responseHeaders:a,value:s}=await _({url:`${this.config.baseURL}/chat/completions`,headers:this.config.headers(),body:n,failedResponseHandler:A,successfulResponseHandler:S(P),abortSignal:e.abortSignal}),{messages:i,...o}=n,l=s.choices[0];return{text:null!=(t=l.message.content)?t:void 0,toolCalls:null==(r=l.message.tool_calls)?void 0:r.map(e=>{var t;return{toolCallType:"function",toolCallId:null!=(t=e.id)?t:y(),toolName:e.function.name,args:e.function.arguments}}),finishReason:T(l.finish_reason),usage:{promptTokens:s.usage.prompt_tokens,completionTokens:s.usage.completion_tokens},rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:a},warnings:[],logprobs:E(l.logprobs)}}async doStream(e){let t;let r=this.getArgs(e),{responseHeaders:n,value:a}=await _({url:`${this.config.baseURL}/chat/completions`,headers:this.config.headers(),body:{...r,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},failedResponseHandler:A,successfulResponseHandler:x(I),abortSignal:e.abortSignal}),{messages:s,...o}=r,l=[],u="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN};return{stream:a.pipeThrough(new TransformStream({transform(e,r){var n,a,s,o,d,p,f,m,g;if(!e.success){u="error",r.enqueue({type:"error",error:e.error});return}let v=e.value;if("error"in v){u="error",r.enqueue({type:"error",error:v.error});return}null!=v.usage&&(c={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});let b=v.choices[0];if((null==b?void 0:b.finish_reason)!=null&&(u=T(b.finish_reason)),(null==b?void 0:b.delta)==null)return;let _=b.delta;null!=_.content&&r.enqueue({type:"text-delta",textDelta:_.content});let w=E(null==b?void 0:b.logprobs);if((null==w?void 0:w.length)&&(void 0===t&&(t=[]),t.push(...w)),null!=_.tool_calls)for(let e of _.tool_calls){let t=e.index;if(null==l[t]){if("function"!==e.type)throw new i({data:e,message:"Expected 'function' type."});if(null==e.id)throw new i({data:e,message:"Expected 'id' to be a string."});if((null==(n=e.function)?void 0:n.name)==null)throw new i({data:e,message:"Expected 'function.name' to be a string."});l[t]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(a=e.function.arguments)?a:""}};continue}let u=l[t];(null==(s=e.function)?void 0:s.arguments)!=null&&(u.function.arguments+=null!=(d=null==(o=e.function)?void 0:o.arguments)?d:""),r.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:u.id,toolName:u.function.name,argsTextDelta:null!=(p=e.function.arguments)?p:""}),(null==(f=u.function)?void 0:f.name)!=null&&(null==(m=u.function)?void 0:m.arguments)!=null&&function(e){try{return h.parse(e),!0}catch(e){return!1}}(u.function.arguments)&&r.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(g=u.id)?g:y(),toolName:u.function.name,args:u.function.arguments})}},flush(e){e.enqueue({type:"finish",finishReason:u,logprobs:t,usage:c})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},P=k.Ry({choices:k.IX(k.Ry({message:k.Ry({role:k.i0("assistant"),content:k.Z_().nullable().optional(),tool_calls:k.IX(k.Ry({id:k.Z_().optional().nullable(),type:k.i0("function"),function:k.Ry({name:k.Z_(),arguments:k.Z_()})})).optional()}),index:k.Rx(),logprobs:k.Ry({content:k.IX(k.Ry({token:k.Z_(),logprob:k.Rx(),top_logprobs:k.IX(k.Ry({token:k.Z_(),logprob:k.Rx()}))})).nullable()}).nullable().optional(),finish_reason:k.Z_().optional().nullable()})),usage:k.Ry({prompt_tokens:k.Rx(),completion_tokens:k.Rx()})}),I=k.G0([k.Ry({choices:k.IX(k.Ry({delta:k.Ry({role:k.Km(["assistant"]).optional(),content:k.Z_().nullable().optional(),tool_calls:k.IX(k.Ry({index:k.Rx(),id:k.Z_().optional().nullable(),type:k.i0("function").optional(),function:k.Ry({name:k.Z_().optional(),arguments:k.Z_().optional()})})).optional()}),logprobs:k.Ry({content:k.IX(k.Ry({token:k.Z_(),logprob:k.Rx(),top_logprobs:k.IX(k.Ry({token:k.Z_(),logprob:k.Rx()}))})).nullable()}).nullable().optional(),finish_reason:k.Z_().nullable().optional(),index:k.Rx()})),usage:k.Ry({prompt_tokens:k.Rx(),completion_tokens:k.Rx()}).optional().nullable()}),C]);function O(e){return null==e?void 0:e.tokens.map((t,r)=>({token:t,logprob:e.token_logprobs[r],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[r]).map(([e,t])=>({token:e,logprob:t})):[]}))}var N=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:r,maxTokens:n,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:l,seed:u}){var c;let d=e.type,{prompt:h,stopSequences:f}=function({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if("prompt"===t&&1===e.length&&"user"===e[0].role&&1===e[0].content.length&&"text"===e[0].content[0].type)return{prompt:e[0].content[0].text};let a="";for(let{role:t,content:i}of("system"===e[0].role&&(a+=`${e[0].content}

`,e=e.slice(1)),e))switch(t){case"system":throw new s({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let e=i.map(e=>{switch(e.type){case"text":return e.text;case"image":throw new p({functionality:"images"})}}).join("");a+=`${r}:
${e}

`;break}case"assistant":{let e=i.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new p({functionality:"tool-call messages"})}}).join("");a+=`${n}:
${e}

`;break}case"tool":throw new p({functionality:"tool messages"});default:throw Error(`Unsupported role: ${t}`)}return{prompt:a+=`${n}:
`,stopSequences:[`
${r}:`]}}({prompt:r,inputFormat:t}),m={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:u,prompt:h,stop:f};switch(d){case"regular":if(null==(c=e.tools)?void 0:c.length)throw new p({functionality:"tools"});if(e.toolChoice)throw new p({functionality:"toolChoice"});return m;case"object-json":throw new p({functionality:"object-json mode"});case"object-tool":throw new p({functionality:"object-tool mode"});case"object-grammar":throw new p({functionality:"object-grammar mode"});default:throw Error(`Unsupported type: ${d}`)}}async doGenerate(e){let t=this.getArgs(e),{responseHeaders:r,value:n}=await _({url:`${this.config.baseURL}/completions`,headers:this.config.headers(),body:t,failedResponseHandler:A,successfulResponseHandler:S($),abortSignal:e.abortSignal}),{prompt:a,...s}=t,i=n.choices[0];return{text:i.text,usage:{promptTokens:n.usage.prompt_tokens,completionTokens:n.usage.completion_tokens},finishReason:T(i.finish_reason),logprobs:O(i.logprobs),rawCall:{rawPrompt:a,rawSettings:s},rawResponse:{headers:r},warnings:[]}}async doStream(e){let t;let r=this.getArgs(e),{responseHeaders:n,value:a}=await _({url:`${this.config.baseURL}/completions`,headers:this.config.headers(),body:{...this.getArgs(e),stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},failedResponseHandler:A,successfulResponseHandler:x(j),abortSignal:e.abortSignal}),{prompt:s,...i}=r,o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN};return{stream:a.pipeThrough(new TransformStream({transform(e,r){if(!e.success){o="error",r.enqueue({type:"error",error:e.error});return}let n=e.value;if("error"in n){o="error",r.enqueue({type:"error",error:n.error});return}null!=n.usage&&(l={promptTokens:n.usage.prompt_tokens,completionTokens:n.usage.completion_tokens});let a=n.choices[0];(null==a?void 0:a.finish_reason)!=null&&(o=T(a.finish_reason)),(null==a?void 0:a.text)!=null&&r.enqueue({type:"text-delta",textDelta:a.text});let s=O(null==a?void 0:a.logprobs);(null==s?void 0:s.length)&&(void 0===t&&(t=[]),t.push(...s))},flush(e){e.enqueue({type:"finish",finishReason:o,logprobs:t,usage:l})}})),rawCall:{rawPrompt:s,rawSettings:i},rawResponse:{headers:n},warnings:[]}}},$=k.Ry({choices:k.IX(k.Ry({text:k.Z_(),finish_reason:k.Z_(),logprobs:k.Ry({tokens:k.IX(k.Z_()),token_logprobs:k.IX(k.Rx()),top_logprobs:k.IX(k.IM(k.Z_(),k.Rx())).nullable()}).nullable().optional()})),usage:k.Ry({prompt_tokens:k.Rx(),completion_tokens:k.Rx()})}),j=k.G0([k.Ry({choices:k.IX(k.Ry({text:k.Z_(),finish_reason:k.Z_().nullish(),index:k.Rx(),logprobs:k.Ry({tokens:k.IX(k.Z_()),token_logprobs:k.IX(k.Rx()),top_logprobs:k.IX(k.IM(k.Z_(),k.Rx())).nullable()}).nullable().optional()})),usage:k.Ry({prompt_tokens:k.Rx(),completion_tokens:k.Rx()}).optional().nullable()}),C]),M=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return null!=(e=this.settings.maxEmbeddingsPerCall)?e:2048}get supportsParallelCalls(){var e;return null==(e=this.settings.supportsParallelCalls)||e}async doEmbed({values:e,abortSignal:t}){if(e.length>this.maxEmbeddingsPerCall)throw new c({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:r,value:n}=await _({url:`${this.config.baseURL}/embeddings`,headers:this.config.headers(),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:A,successfulResponseHandler:S(L),abortSignal:t});return{embeddings:n.data.map(e=>e.embedding),rawResponse:{headers:r}}}},L=k.Ry({data:k.IX(k.Ry({embedding:k.IX(k.Rx())}))}),D=function(e={}){var t,r,n,a;let s=null!=(r=null==(a=null!=(t=e.baseURL)?t:e.baseUrl)?void 0:a.replace(/\/$/,""))?r:"https://api.openai.com/v1",i=null!=(n=e.compatibility)?n:"compatible",o=()=>({Authorization:`Bearer ${function({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if("string"==typeof e)return e;if(null!=e)throw new u({message:`${n} API key must be a string.`});if("undefined"==typeof process)throw new u({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[t]))throw new u({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new u({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(e,t={})=>new R(e,t,{provider:"openai.chat",baseURL:s,headers:o,compatibility:i}),c=(e,t={})=>new N(e,t,{provider:"openai.completion",baseURL:s,headers:o,compatibility:i}),d=function(e,t){if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return"gpt-3.5-turbo-instruct"===e?c(e,t):l(e,t)};return d.chat=l,d.completion=c,d.embedding=(e,t={})=>new M(e,t,{provider:"openai.embedding",baseURL:s,headers:o}),d}({compatibility:"strict"})},5340:(e,t,r)=>{"use strict";var n,a,s,i;let o;r.d(t,{pA:()=>i,Yj:()=>ej,IX:()=>eL,O7:()=>eN,PG:()=>eR,Km:()=>eH,Pp:()=>eP,Vo:()=>eq,i0:()=>eF,lB:()=>e$,Rx:()=>eO,Ry:()=>eD,IM:()=>eZ,Z_:()=>eI,G0:()=>eU,_4:()=>eM}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(n||(n={})),(a||(a={})).mergeShapes=(e,t)=>({...e,...t});let l=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),u=e=>{switch(typeof e){case"undefined":return l.undefined;case"string":return l.string;case"number":return Number.isNaN(e)?l.nan:l.number;case"boolean":return l.boolean;case"function":return l.function;case"bigint":return l.bigint;case"symbol":return l.symbol;case"object":if(Array.isArray(e))return l.array;if(null===e)return l.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return l.promise;if("undefined"!=typeof Map&&e instanceof Map)return l.map;if("undefined"!=typeof Set&&e instanceof Set)return l.set;if("undefined"!=typeof Date&&e instanceof Date)return l.date;return l.object;default:return l.unknown}},c=n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class d extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){let r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof d))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)if(n.path.length>0){let r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}d.create=e=>new d(e);let p=(e,t)=>{let r;switch(e.code){case c.invalid_type:r=e.received===l.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case c.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.jsonStringifyReplacer)}`;break;case c.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.joinValues(e.keys,", ")}`;break;case c.invalid_union:r="Invalid input";break;case c.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.joinValues(e.options)}`;break;case c.invalid_enum_value:r=`Invalid enum value. Expected ${n.joinValues(e.options)}, received '${e.received}'`;break;case c.invalid_arguments:r="Invalid function arguments";break;case c.invalid_return_type:r="Invalid function return type";break;case c.invalid_date:r="Invalid date";break;case c.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case c.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case c.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case c.custom:r="Invalid input";break;case c.invalid_intersection_types:r="Intersection results could not be merged";break;case c.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case c.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.assertNever(e)}return{message:r}};!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(s||(s={}));let h=e=>{let{data:t,path:r,errorMaps:n,issueData:a}=e,s=[...r,...a.path||[]],i={...a,path:s};if(void 0!==a.message)return{...a,path:s,message:a.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...a,path:s,message:o}};function f(e,t){let r=h({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,p,p==p?void 0:p].filter(e=>!!e)});e.common.issues.push(r)}class m{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return g;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return m.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:a}=n;if("aborted"===t.status||"aborted"===a.status)return g;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||n.alwaysSet)&&(r[t.value]=a.value)}return{status:e.value,value:r}}}let g=Object.freeze({status:"aborted"}),y=e=>({status:"dirty",value:e}),v=e=>({status:"valid",value:e}),b=e=>"aborted"===e.status,_=e=>"dirty"===e.status,w=e=>"valid"===e.status,x=e=>"undefined"!=typeof Promise&&e instanceof Promise;class S{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let k=(e,t)=>{if(w(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new d(e.common.issues);return this._error=t,this._error}}};function E(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??a.defaultError}:void 0===a.data?{message:s??n??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:s??r??a.defaultError}},description:a}}class T{get description(){return this._def.description}_getType(e){return u(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:u(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new m,ctx:{common:e.parent.common,data:e.data,parsedType:u(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(x(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:u(e)},n=this._parseSync({data:e,path:r.path,parent:r});return k(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:u(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return w(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>w(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:u(e)},n=this._parse({data:e,path:r.path,parent:r});return k(r,await (x(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let a=e(t),s=()=>n.addIssue({code:c.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(s(),!1)):!!a||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eb({schema:this,typeName:i.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return e_.create(this,this._def)}nullable(){return ew.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return er.create(this)}promise(){return ev.create(this,this._def)}or(e){return ea.create([this,e],this._def)}and(e){return eo.create(this,e,this._def)}transform(e){return new eb({...E(this._def),schema:this,typeName:i.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ex({...E(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:i.ZodDefault})}brand(){return new eE({typeName:i.ZodBranded,type:this,...E(this._def)})}catch(e){return new eS({...E(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:i.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eT.create(this,e)}readonly(){return eC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let C=/^c[^\s-]{8,}$/i,A=/^[0-9a-z]+$/,R=/^[0-9A-HJKMNP-TV-Z]{26}$/i,P=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,I=/^[a-z0-9_-]{21}$/i,O=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,N=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,j=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,M=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,L=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,D=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,U=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Z=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,q="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",F=RegExp(`^${q}$`);function H(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}class B extends T{_parse(e){var t,r,a,s;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==l.string){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.string,received:t.parsedType}),g}let u=new m;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(f(i=this._getOrReturnCtx(e,i),{code:c.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),u.dirty());else if("max"===l.kind)e.data.length>l.value&&(f(i=this._getOrReturnCtx(e,i),{code:c.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),u.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(i=this._getOrReturnCtx(e,i),t?f(i,{code:c.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&f(i,{code:c.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),u.dirty())}else if("email"===l.kind)$.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"email",code:c.invalid_string,message:l.message}),u.dirty());else if("emoji"===l.kind)o||(o=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),o.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:c.invalid_string,message:l.message}),u.dirty());else if("uuid"===l.kind)P.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:c.invalid_string,message:l.message}),u.dirty());else if("nanoid"===l.kind)I.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:c.invalid_string,message:l.message}),u.dirty());else if("cuid"===l.kind)C.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:c.invalid_string,message:l.message}),u.dirty());else if("cuid2"===l.kind)A.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:c.invalid_string,message:l.message}),u.dirty());else if("ulid"===l.kind)R.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:c.invalid_string,message:l.message}),u.dirty());else if("url"===l.kind)try{new URL(e.data)}catch{f(i=this._getOrReturnCtx(e,i),{validation:"url",code:c.invalid_string,message:l.message}),u.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"regex",code:c.invalid_string,message:l.message}),u.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(f(i=this._getOrReturnCtx(e,i),{code:c.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),u.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(f(i=this._getOrReturnCtx(e,i),{code:c.invalid_string,validation:{startsWith:l.value},message:l.message}),u.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(f(i=this._getOrReturnCtx(e,i),{code:c.invalid_string,validation:{endsWith:l.value},message:l.message}),u.dirty()):"datetime"===l.kind?(function(e){let t=`${q}T${H(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)})(l).test(e.data)||(f(i=this._getOrReturnCtx(e,i),{code:c.invalid_string,validation:"datetime",message:l.message}),u.dirty()):"date"===l.kind?F.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{code:c.invalid_string,validation:"date",message:l.message}),u.dirty()):"time"===l.kind?RegExp(`^${H(l)}$`).test(e.data)||(f(i=this._getOrReturnCtx(e,i),{code:c.invalid_string,validation:"time",message:l.message}),u.dirty()):"duration"===l.kind?N.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"duration",code:c.invalid_string,message:l.message}),u.dirty()):"ip"===l.kind?(t=e.data,("v4"===(r=l.version)||!r)&&j.test(t)||("v6"===r||!r)&&L.test(t)||(f(i=this._getOrReturnCtx(e,i),{validation:"ip",code:c.invalid_string,message:l.message}),u.dirty())):"jwt"===l.kind?!function(e,t){if(!O.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));if("object"!=typeof a||null===a||"typ"in a&&a?.typ!=="JWT"||!a.alg||t&&a.alg!==t)return!1;return!0}catch{return!1}}(e.data,l.alg)&&(f(i=this._getOrReturnCtx(e,i),{validation:"jwt",code:c.invalid_string,message:l.message}),u.dirty()):"cidr"===l.kind?(a=e.data,("v4"===(s=l.version)||!s)&&M.test(a)||("v6"===s||!s)&&D.test(a)||(f(i=this._getOrReturnCtx(e,i),{validation:"cidr",code:c.invalid_string,message:l.message}),u.dirty())):"base64"===l.kind?U.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"base64",code:c.invalid_string,message:l.message}),u.dirty()):"base64url"===l.kind?Z.test(e.data)||(f(i=this._getOrReturnCtx(e,i),{validation:"base64url",code:c.invalid_string,message:l.message}),u.dirty()):n.assertNever(l);return{status:u.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:c.invalid_string,...s.errToObj(r)})}_addCheck(e){return new B({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...s.errToObj(e)})}url(e){return this._addCheck({kind:"url",...s.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...s.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...s.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...s.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...s.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...s.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...s.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...s.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...s.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...s.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...s.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...s.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...s.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...s.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...s.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...s.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...s.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...s.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...s.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...s.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...s.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...s.errToObj(t)})}nonempty(e){return this.min(1,s.errToObj(e))}trim(){return new B({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new B({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new B({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}B.create=e=>new B({checks:[],typeName:i.ZodString,coerce:e?.coerce??!1,...E(e)});class z extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==l.number){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.number,received:t.parsedType}),g}let r=new m;for(let a of this._def.checks)"int"===a.kind?n.isInteger(e.data)||(f(t=this._getOrReturnCtx(e,t),{code:c.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(f(t=this._getOrReturnCtx(e,t),{code:c.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(f(t=this._getOrReturnCtx(e,t),{code:c.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}(e.data,a.value)&&(f(t=this._getOrReturnCtx(e,t),{code:c.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(f(t=this._getOrReturnCtx(e,t),{code:c.not_finite,message:a.message}),r.dirty()):n.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,r,n){return new z({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:s.toString(n)}]})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:s.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:s.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:s.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:s.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&n.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}z.create=e=>new z({checks:[],typeName:i.ZodNumber,coerce:e?.coerce||!1,...E(e)});class V extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==l.bigint)return this._getInvalidInput(e);let r=new m;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(f(t=this._getOrReturnCtx(e,t),{code:c.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(f(t=this._getOrReturnCtx(e,t),{code:c.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(f(t=this._getOrReturnCtx(e,t),{code:c.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):n.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.bigint,received:t.parsedType}),g}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,r,n){return new V({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:s.toString(n)}]})}_addCheck(e){return new V({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}V.create=e=>new V({checks:[],typeName:i.ZodBigInt,coerce:e?.coerce??!1,...E(e)});class J extends T{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==l.boolean){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.boolean,received:t.parsedType}),g}return v(e.data)}}J.create=e=>new J({typeName:i.ZodBoolean,coerce:e?.coerce||!1,...E(e)});class G extends T{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==l.date){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.date,received:t.parsedType}),g}if(Number.isNaN(e.data.getTime()))return f(this._getOrReturnCtx(e),{code:c.invalid_date}),g;let r=new m;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(f(t=this._getOrReturnCtx(e,t),{code:c.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(f(t=this._getOrReturnCtx(e,t),{code:c.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):n.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new G({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:s.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:s.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}G.create=e=>new G({checks:[],coerce:e?.coerce||!1,typeName:i.ZodDate,...E(e)});class W extends T{_parse(e){if(this._getType(e)!==l.symbol){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.symbol,received:t.parsedType}),g}return v(e.data)}}W.create=e=>new W({typeName:i.ZodSymbol,...E(e)});class K extends T{_parse(e){if(this._getType(e)!==l.undefined){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.undefined,received:t.parsedType}),g}return v(e.data)}}K.create=e=>new K({typeName:i.ZodUndefined,...E(e)});class X extends T{_parse(e){if(this._getType(e)!==l.null){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.null,received:t.parsedType}),g}return v(e.data)}}X.create=e=>new X({typeName:i.ZodNull,...E(e)});class Y extends T{constructor(){super(...arguments),this._any=!0}_parse(e){return v(e.data)}}Y.create=e=>new Y({typeName:i.ZodAny,...E(e)});class Q extends T{constructor(){super(...arguments),this._unknown=!0}_parse(e){return v(e.data)}}Q.create=e=>new Q({typeName:i.ZodUnknown,...E(e)});class ee extends T{_parse(e){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.never,received:t.parsedType}),g}}ee.create=e=>new ee({typeName:i.ZodNever,...E(e)});class et extends T{_parse(e){if(this._getType(e)!==l.undefined){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.void,received:t.parsedType}),g}return v(e.data)}}et.create=e=>new et({typeName:i.ZodVoid,...E(e)});class er extends T{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==l.array)return f(t,{code:c.invalid_type,expected:l.array,received:t.parsedType}),g;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&(f(t,{code:e?c.too_big:c.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(f(t,{code:c.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(f(t,{code:c.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new S(t,e,t.path,r)))).then(e=>m.mergeArray(r,e));let a=[...t.data].map((e,r)=>n.type._parseSync(new S(t,e,t.path,r)));return m.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new er({...this._def,minLength:{value:e,message:s.toString(t)}})}max(e,t){return new er({...this._def,maxLength:{value:e,message:s.toString(t)}})}length(e,t){return new er({...this._def,exactLength:{value:e,message:s.toString(t)}})}nonempty(e){return this.min(1,e)}}er.create=(e,t)=>new er({type:e,minLength:null,maxLength:null,exactLength:null,typeName:i.ZodArray,...E(t)});class en extends T{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=n.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==l.object){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.object,received:t.parsedType}),g}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof ee&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||s.push(e);let i=[];for(let e of a){let t=n[e],a=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new S(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ee){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(f(r,{code:c.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new S(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>m.mergeObjectSync(t,e)):m.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return s.errToObj,new en({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:s.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new en({...this._def,unknownKeys:"strip"})}passthrough(){return new en({...this._def,unknownKeys:"passthrough"})}extend(e){return new en({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new en({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:i.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new en({...this._def,catchall:e})}pick(e){let t={};for(let r of n.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new en({...this._def,shape:()=>t})}omit(e){let t={};for(let r of n.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new en({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof en){let r={};for(let n in t.shape){let a=t.shape[n];r[n]=e_.create(e(a))}return new en({...t._def,shape:()=>r})}return t instanceof er?new er({...t._def,type:e(t.element)}):t instanceof e_?e_.create(e(t.unwrap())):t instanceof ew?ew.create(e(t.unwrap())):t instanceof el?el.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};for(let r of n.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new en({...this._def,shape:()=>t})}required(e){let t={};for(let r of n.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof e_;)e=e._def.innerType;t[r]=e}return new en({...this._def,shape:()=>t})}keyof(){return em(n.objectKeys(this.shape))}}en.create=(e,t)=>new en({shape:()=>e,unknownKeys:"strip",catchall:ee.create(),typeName:i.ZodObject,...E(t)}),en.strictCreate=(e,t)=>new en({shape:()=>e,unknownKeys:"strict",catchall:ee.create(),typeName:i.ZodObject,...E(t)}),en.lazycreate=(e,t)=>new en({shape:e,unknownKeys:"strip",catchall:ee.create(),typeName:i.ZodObject,...E(t)});class ea extends T{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new d(e.ctx.common.issues));return f(t,{code:c.invalid_union,unionErrors:r}),g});{let e;let n=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=n.map(e=>new d(e));return f(t,{code:c.invalid_union,unionErrors:a}),g}}get options(){return this._def.options}}ea.create=(e,t)=>new ea({options:e,typeName:i.ZodUnion,...E(t)});let es=e=>{if(e instanceof eh)return es(e.schema);if(e instanceof eb)return es(e.innerType());if(e instanceof ef)return[e.value];if(e instanceof eg)return e.options;if(e instanceof ey)return n.objectValues(e.enum);if(e instanceof ex)return es(e._def.innerType);if(e instanceof K)return[void 0];else if(e instanceof X)return[null];else if(e instanceof e_)return[void 0,...es(e.unwrap())];else if(e instanceof ew)return[null,...es(e.unwrap())];else if(e instanceof eE)return es(e.unwrap());else if(e instanceof eC)return es(e.unwrap());else if(e instanceof eS)return es(e._def.innerType);else return[]};class ei extends T{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==l.object)return f(t,{code:c.invalid_type,expected:l.object,received:t.parsedType}),g;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(f(t,{code:c.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),g)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=es(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(n.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,r)}}return new ei({typeName:i.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...E(r)})}}class eo extends T{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if(b(e)||b(a))return g;let s=function e(t,r){let a=u(t),s=u(r);if(t===r)return{valid:!0,data:t};if(a===l.object&&s===l.object){let a=n.objectKeys(r),s=n.objectKeys(t).filter(e=>-1!==a.indexOf(e)),i={...t,...r};for(let n of s){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1};i[n]=a.data}return{valid:!0,data:i}}if(a===l.array&&s===l.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let a=0;a<t.length;a++){let s=e(t[a],r[a]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return a===l.date&&s===l.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,a.value);return s.valid?((_(e)||_(a))&&t.dirty(),{status:t.value,value:s.data}):(f(r,{code:c.invalid_intersection_types}),g)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}eo.create=(e,t,r)=>new eo({left:e,right:t,typeName:i.ZodIntersection,...E(r)});class el extends T{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==l.array)return f(r,{code:c.invalid_type,expected:l.array,received:r.parsedType}),g;if(r.data.length<this._def.items.length)return f(r,{code:c.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g;!this._def.rest&&r.data.length>this._def.items.length&&(f(r,{code:c.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new S(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>m.mergeArray(t,e)):m.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new el({...this._def,rest:e})}}el.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new el({items:e,typeName:i.ZodTuple,rest:null,...E(t)})};class eu extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==l.object)return f(r,{code:c.invalid_type,expected:l.object,received:r.parsedType}),g;let n=[],a=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:a._parse(new S(r,e,r.path,e)),value:s._parse(new S(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?m.mergeObjectAsync(t,n):m.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new eu(t instanceof T?{keyType:e,valueType:t,typeName:i.ZodRecord,...E(r)}:{keyType:B.create(),valueType:e,typeName:i.ZodRecord,...E(t)})}}class ec extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==l.map)return f(r,{code:c.invalid_type,expected:l.map,received:r.parsedType}),g;let n=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new S(r,e,r.path,[s,"key"])),value:a._parse(new S(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return g;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return g;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}ec.create=(e,t,r)=>new ec({valueType:t,keyType:e,typeName:i.ZodMap,...E(r)});class ed extends T{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==l.set)return f(r,{code:c.invalid_type,expected:l.set,received:r.parsedType}),g;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(f(r,{code:c.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(f(r,{code:c.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return g;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>a._parse(new S(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new ed({...this._def,minSize:{value:e,message:s.toString(t)}})}max(e,t){return new ed({...this._def,maxSize:{value:e,message:s.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ed.create=(e,t)=>new ed({valueType:e,minSize:null,maxSize:null,typeName:i.ZodSet,...E(t)});class ep extends T{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==l.function)return f(t,{code:c.invalid_type,expected:l.function,received:t.parsedType}),g;function r(e,r){return h({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,p,p].filter(e=>!!e),issueData:{code:c.invalid_arguments,argumentsError:r}})}function n(e,r){return h({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,p,p].filter(e=>!!e),issueData:{code:c.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof ev){let e=this;return v(async function(...t){let i=new d([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw i.addIssue(n(l,e)),i})})}{let e=this;return v(function(...t){let i=e._def.args.safeParse(t,a);if(!i.success)throw new d([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new d([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ep({...this._def,args:el.create(e).rest(Q.create())})}returns(e){return new ep({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ep({args:e||el.create([]).rest(Q.create()),returns:t||Q.create(),typeName:i.ZodFunction,...E(r)})}}class eh extends T{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eh.create=(e,t)=>new eh({getter:e,typeName:i.ZodLazy,...E(t)});class ef extends T{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return f(t,{received:t.data,code:c.invalid_literal,expected:this._def.value}),g}return{status:"valid",value:e.data}}get value(){return this._def.value}}function em(e,t){return new eg({values:e,typeName:i.ZodEnum,...E(t)})}ef.create=(e,t)=>new ef({value:e,typeName:i.ZodLiteral,...E(t)});class eg extends T{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return f(t,{expected:n.joinValues(r),received:t.parsedType,code:c.invalid_type}),g}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return f(t,{received:t.data,code:c.invalid_enum_value,options:r}),g}return v(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eg.create(e,{...this._def,...t})}exclude(e,t=this._def){return eg.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}eg.create=em;class ey extends T{_parse(e){let t=n.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==l.string&&r.parsedType!==l.number){let e=n.objectValues(t);return f(r,{expected:n.joinValues(e),received:r.parsedType,code:c.invalid_type}),g}if(this._cache||(this._cache=new Set(n.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=n.objectValues(t);return f(r,{received:r.data,code:c.invalid_enum_value,options:e}),g}return v(e.data)}get enum(){return this._def.values}}ey.create=(e,t)=>new ey({values:e,typeName:i.ZodNativeEnum,...E(t)});class ev extends T{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==l.promise&&!1===t.common.async?(f(t,{code:c.invalid_type,expected:l.promise,received:t.parsedType}),g):v((t.parsedType===l.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ev.create=(e,t)=>new ev({type:e,typeName:i.ZodPromise,...E(t)});class eb extends T{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===i.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,s={addIssue:e=>{f(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===a.type){let e=a.transform(r.data,s);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return g;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?g:"dirty"===n.status||"dirty"===t.value?y(n.value):n});{if("aborted"===t.value)return g;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?g:"dirty"===n.status||"dirty"===t.value?y(n.value):n}}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,s);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?g:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?g:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===a.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>w(e)?Promise.resolve(a.transform(e.value,s)).then(e=>({status:t.value,value:e})):g);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!w(e))return g;let n=a.transform(e.value,s);if(n instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}}n.assertNever(a)}}eb.create=(e,t,r)=>new eb({schema:e,typeName:i.ZodEffects,effect:t,...E(r)}),eb.createWithPreprocess=(e,t,r)=>new eb({schema:t,effect:{type:"preprocess",transform:e},typeName:i.ZodEffects,...E(r)});class e_ extends T{_parse(e){return this._getType(e)===l.undefined?v(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}e_.create=(e,t)=>new e_({innerType:e,typeName:i.ZodOptional,...E(t)});class ew extends T{_parse(e){return this._getType(e)===l.null?v(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ew.create=(e,t)=>new ew({innerType:e,typeName:i.ZodNullable,...E(t)});class ex extends T{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===l.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ex.create=(e,t)=>new ex({innerType:e,typeName:i.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...E(t)});class eS extends T{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return x(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new d(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new d(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eS.create=(e,t)=>new eS({innerType:e,typeName:i.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...E(t)});class ek extends T{_parse(e){if(this._getType(e)!==l.nan){let t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:l.nan,received:t.parsedType}),g}return{status:"valid",value:e.data}}}ek.create=e=>new ek({typeName:i.ZodNaN,...E(e)}),Symbol("zod_brand");class eE extends T{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eT extends T{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?g:"dirty"===e.status?(t.dirty(),y(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?g:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eT({in:e,out:t,typeName:i.ZodPipeline})}}class eC extends T{_parse(e){let t=this._def.innerType._parse(e),r=e=>(w(e)&&(e.value=Object.freeze(e.value)),e);return x(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eA(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eR(e,t={},r){return e?Y.create().superRefine((n,a)=>{let s=e(n);if(s instanceof Promise)return s.then(e=>{if(!e){let e=eA(t,n),s=e.fatal??r??!0;a.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=eA(t,n),s=e.fatal??r??!0;a.addIssue({code:"custom",...e,fatal:s})}}):Y.create()}eC.create=(e,t)=>new eC({innerType:e,typeName:i.ZodReadonly,...E(t)}),en.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(i||(i={}));let eP=(e,t={message:`Input not instance of ${e.name}`})=>eR(t=>t instanceof e,t),eI=B.create,eO=z.create;ek.create,V.create;let eN=J.create;G.create,W.create,K.create;let e$=X.create,ej=Y.create,eM=Q.create;ee.create,et.create;let eL=er.create,eD=en.create;en.strictCreate;let eU=ea.create;ei.create,eo.create,el.create;let eZ=eu.create;ec.create,ed.create,ep.create;let eq=eh.create,eF=ef.create,eH=eg.create;ey.create,ev.create,eb.create,e_.create,ew.create,eb.createWithPreprocess,eT.create},6005:(e,t,r)=>{"use strict";let n;r.d(t,{kP:()=>rR});var a,s,i,o,l,u,c,d,p,h,f,m,g,y,v,b,_,w,x,S,k=r(87),E="vercel.ai.error",T=Symbol.for(E),C=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[a]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,E)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}toJSON(){return{name:this.name,message:this.message}}};a=T;var A=C,R=(Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError"),"AI_InvalidArgumentError"),P=`vercel.ai.error.${R}`,I=Symbol.for(P),O=class extends A{constructor({message:e,cause:t,argument:r}){super({name:R,message:e,cause:t}),this[s]=!0,this.argument=r}static isInstance(e){return A.hasMarker(e,P)}};function N(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(N):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&N(t)))}s=I,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError"),Symbol.for("vercel.ai.error.AI_JSONParseError"),Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError"),Symbol.for("vercel.ai.error.AI_TypeValidationError"),Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");let $=(e,t=21)=>(r=t)=>{let n="",a=0|r;for(;a--;)n+=e[Math.random()*e.length|0];return n};var j=(({prefix:e,size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let a=$(r,t);if(null==e)return a;if(r.includes(n))throw new O({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return t=>`${e}${n}${a(t)}`})(),M=Symbol.for("vercel.ai.validator"),{btoa:L,atob:D}=globalThis;let U=Symbol("Let zodToJsonSchema decide on which parser to use"),Z={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},q=e=>"string"==typeof e?{...Z,name:e}:{...Z,...e},F=e=>{let t=q(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};var H=r(5340);let B=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function z(e){if("openAi"!==e.target)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?B(t,e.currentPath):t.join("/")}}function V(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function J(e,t,r,n,a){e[t]=r,V(e,t,n,a)}function G(e,t){return ep(e.type._def,t)}let W=(e,t)=>ep(e.innerType._def,t),K=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let n of e.checks)switch(n.kind){case"min":J(r,"minimum",n.value,n.message,t);break;case"max":J(r,"maximum",n.value,n.message,t)}return r},X=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,Y={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===n&&(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Q(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":J(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":J(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":er(r,"email",n.message,t);break;case"format:idn-email":er(r,"idn-email",n.message,t);break;case"pattern:zod":en(r,Y.email,n.message,t)}break;case"url":er(r,"uri",n.message,t);break;case"uuid":er(r,"uuid",n.message,t);break;case"regex":en(r,n.regex,n.message,t);break;case"cuid":en(r,Y.cuid,n.message,t);break;case"cuid2":en(r,Y.cuid2,n.message,t);break;case"startsWith":en(r,RegExp(`^${ee(n.value,t)}`),n.message,t);break;case"endsWith":en(r,RegExp(`${ee(n.value,t)}$`),n.message,t);break;case"datetime":er(r,"date-time",n.message,t);break;case"date":er(r,"date",n.message,t);break;case"time":er(r,"time",n.message,t);break;case"duration":er(r,"duration",n.message,t);break;case"length":J(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t),J(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":en(r,RegExp(ee(n.value,t)),n.message,t);break;case"ip":"v6"!==n.version&&er(r,"ipv4",n.message,t),"v4"!==n.version&&er(r,"ipv6",n.message,t);break;case"base64url":en(r,Y.base64url,n.message,t);break;case"jwt":en(r,Y.jwt,n.message,t);break;case"cidr":"v6"!==n.version&&en(r,Y.ipv4Cidr,n.message,t),"v4"!==n.version&&en(r,Y.ipv6Cidr,n.message,t);break;case"emoji":en(r,Y.emoji(),n.message,t);break;case"ulid":en(r,Y.ulid,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":er(r,"binary",n.message,t);break;case"contentEncoding:base64":J(r,"contentEncoding","base64",n.message,t);break;case"pattern:zod":en(r,Y.base64,n.message,t)}break;case"nanoid":en(r,Y.nanoid,n.message,t)}return r}function ee(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)et.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}let et=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function er(e,t,r,n){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):J(e,"format",t,r,n)}function en(e,t,r,n){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:ea(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):J(e,"pattern",ea(t,n),r,n)}function ea(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,a="",s=!1,i=!1,o=!1;for(let e=0;e<n.length;e++){if(s){a+=n[e],s=!1;continue}if(r.i){if(i){if(n[e].match(/[a-z]/)){o?(a+=n[e]+`${n[e-2]}-${n[e]}`.toUpperCase(),o=!1):"-"===n[e+1]&&n[e+2]?.match(/[a-z]/)?(a+=n[e],o=!0):a+=`${n[e]}${n[e].toUpperCase()}`;continue}}else if(n[e].match(/[a-z]/)){a+=`[${n[e]}${n[e].toUpperCase()}]`;continue}}if(r.m){if("^"===n[e]){a+=`(^|(?<=[\r
]))`;continue}if("$"===n[e]){a+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===n[e]){a+=i?`${n[e]}\r
`:`[${n[e]}\r
]`;continue}a+=n[e],"\\"===n[e]?s=!0:i&&"]"===n[e]?i=!1:i||"["!==n[e]||(i=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function es(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===H.pA.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:ep(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??z(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:ep(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===H.pA.ZodString&&e.keyType._def.checks?.length){let{type:n,...a}=Q(e.keyType._def,t);return{...r,propertyNames:a}}if(e.keyType?._def.typeName===H.pA.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===H.pA.ZodBranded&&e.keyType._def.type._def.typeName===H.pA.ZodString&&e.keyType._def.type._def.checks?.length){let{type:n,...a}=G(e.keyType._def,t);return{...r,propertyNames:a}}return r}let ei={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},eo=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>ep(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0},el=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return ep(e.innerType._def,t);let r=ep(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:z(t)},r]}:z(t)},eu=(e,t)=>{if("input"===t.pipeStrategy)return ep(e.in._def,t);if("output"===t.pipeStrategy)return ep(e.out._def,t);let r=ep(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=ep(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(e=>void 0!==e)}},ec=(e,t)=>ep(e.innerType._def,t),ed=(e,t,r)=>{switch(t){case H.pA.ZodString:return Q(e,r);case H.pA.ZodNumber:return function(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",V(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?J(r,"minimum",n.value,n.message,t):J(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),J(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?J(r,"maximum",n.value,n.message,t):J(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),J(r,"maximum",n.value,n.message,t));break;case"multipleOf":J(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case H.pA.ZodObject:return function(e,t){let r="openAi"===t.target,n={type:"object",properties:{}},a=[],s=e.shape();for(let e in s){let i=s[e];if(void 0===i||void 0===i._def)continue;let o=function(e){try{return e.isOptional()}catch{return!0}}(i);o&&r&&("ZodOptional"===i._def.typeName&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),o=!1);let l=ep(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(n.properties[e]=l,o||a.push(e))}a.length&&(n.required=a);let i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return ep(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(n.additionalProperties=i),n}(e,r);case H.pA.ZodBigInt:return function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?J(r,"minimum",n.value,n.message,t):J(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),J(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?J(r,"maximum",n.value,n.message,t):J(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),J(r,"maximum",n.value,n.message,t));break;case"multipleOf":J(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case H.pA.ZodBoolean:return{type:"boolean"};case H.pA.ZodDate:return function e(t,r,n){let a=n??r.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,a)=>e(t,r,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return K(t,r)}}(e,r);case H.pA.ZodUndefined:return{not:z(r)};case H.pA.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case H.pA.ZodArray:return function(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==H.pA.ZodAny&&(r.items=ep(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&J(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&J(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(J(r,"minItems",e.exactLength.value,e.exactLength.message,t),J(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case H.pA.ZodUnion:case H.pA.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return eo(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in ei&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=ei[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return eo(e,t)}(e,r);case H.pA.ZodIntersection:return function(e,t){let r=[ep(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),ep(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,a=[];return r.forEach(e=>{if(X(e))a.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}else n=void 0;a.push(t)}}),a.length?{allOf:a,...n}:void 0}(e,r);case H.pA.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>ep(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:ep(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>ep(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,r);case H.pA.ZodRecord:return es(e,r);case H.pA.ZodLiteral:return function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case H.pA.ZodEnum:return{type:"string",enum:Array.from(e.values)};case H.pA.ZodNativeEnum:return function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}(e);case H.pA.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:ei[e.innerType._def.typeName],nullable:!0}:{type:[ei[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=ep(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=ep(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case H.pA.ZodOptional:return el(e,r);case H.pA.ZodMap:return function(e,t){return"record"===t.mapStrategy?es(e,t):{type:"array",maxItems:125,items:{type:"array",items:[ep(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||z(t),ep(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||z(t)],minItems:2,maxItems:2}}}(e,r);case H.pA.ZodSet:return function(e,t){let r={type:"array",uniqueItems:!0,items:ep(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&J(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&J(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case H.pA.ZodLazy:return()=>e.getter()._def;case H.pA.ZodPromise:return ep(e.type._def,r);case H.pA.ZodNaN:case H.pA.ZodNever:return function(e){return"openAi"===e.target?void 0:{not:z({...e,currentPath:[...e.currentPath,"not"]})}}(r);case H.pA.ZodEffects:return function(e,t){return"input"===t.effectStrategy?ep(e.schema._def,t):z(t)}(e,r);case H.pA.ZodAny:case H.pA.ZodUnknown:return z(r);case H.pA.ZodDefault:return function(e,t){return{...ep(e.innerType._def,t),default:e.defaultValue()}}(e,r);case H.pA.ZodBranded:return G(e,r);case H.pA.ZodReadonly:return ec(e,r);case H.pA.ZodCatch:return W(e,r);case H.pA.ZodPipeline:return eu(e,r);case H.pA.ZodFunction:case H.pA.ZodVoid:case H.pA.ZodSymbol:default:return}};function ep(e,t,r=!1){let n=t.seen.get(e);if(t.override){let a=t.override?.(e,t,n,r);if(a!==U)return a}if(n&&!r){let e=eh(n,t);if(void 0!==e)return e}let a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);let s=ed(e,e.typeName,t),i="function"==typeof s?ep(s(),t):s;if(i&&ef(e,t,i),t.postProcess){let r=t.postProcess(i,e,t);return a.jsonSchema=i,r}return a.jsonSchema=i,i}let eh=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:B(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),z(t);return"seen"===t.$refStrategy?z(t):void 0}},ef=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),em=(e,t)=>{let r=F(t),n="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,n])=>({...e,[t]:ep(n._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??z(r)}),{}):void 0,a="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,s=ep(e._def,void 0===a?r:{...r,currentPath:[...r.basePath,r.definitionPath,a]},!1)??z(r),i="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==i&&(s.title=i),r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===r.$refStrategy?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let o=void 0===a?n?{...s,[r.definitionPath]:n}:s:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,a].join("/"),[r.definitionPath]:{...n,[a]:s}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var eg={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},ey={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},ev={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},eb={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},e_={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},ew={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},ex={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},eS={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>null==e||"object"!=typeof e||!("id"in e)||"string"!=typeof e.id||!("type"in e)||"string"!=typeof e.type||!("function"in e)||null==e.function||"object"!=typeof e.function||!("arguments"in e.function)||"string"!=typeof e.function.name||"string"!=typeof e.function.arguments))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},ek={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},eE={code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},eT={code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},eC={code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},eA={code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},eR={code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},eP={code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},eI=[eg,ey,ev,eb,e_,ew,ex,eS,ek,eE,eT,eC,eA,eR,eP],eO={[eg.code]:eg,[ey.code]:ey,[ev.code]:ev,[eb.code]:eb,[e_.code]:e_,[ew.code]:ew,[ex.code]:ex,[eS.code]:eS,[ek.code]:ek,[eE.code]:eE,[eT.code]:eT,[eC.code]:eC,[eA.code]:eA,[eR.code]:eR,[eP.code]:eP};eg.name,eg.code,ey.name,ey.code,ev.name,ev.code,eb.name,eb.code,e_.name,e_.code,ew.name,ew.code,ex.name,ex.code,eS.name,eS.code,ek.name,ek.code,eE.name,eE.code,eT.name,eT.code,eC.name,eC.code,eA.name,eA.code,eR.name,eR.code,eP.name,eP.code;var eN=eI.map(e=>e.code),e$=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!eN.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let n=JSON.parse(e.slice(t+1));return eO[r].parse(n)};function ej(e,t){let r=eI.find(t=>t.name===e);if(!r)throw Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}var eM=Symbol.for("vercel.ai.schema");function eL(e){return"object"==typeof e&&null!==e&&eM in e&&!0===e[eM]&&"jsonSchema"in e&&"validate"in e?e:function(e,{validate:t}={}){return{[eM]:!0,_type:void 0,[M]:!0,jsonSchema:e,validate:t}}(em(e),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var eD="vercel.ai.error",eU=Symbol.for(eD),eZ=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[i]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,eD)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}toJSON(){return{name:this.name,message:this.message}}};i=eU;var eq=eZ,eF="AI_APICallError",eH=`vercel.ai.error.${eF}`,eB=Symbol.for(eH),ez=class extends eq{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:a,responseBody:s,cause:i,isRetryable:l=null!=n&&(408===n||409===n||429===n||n>=500),data:u}){super({name:eF,message:e,cause:i}),this[o]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=a,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(e){return eq.hasMarker(e,eH)}static isAPICallError(e){return e instanceof Error&&e.name===eF&&"string"==typeof e.url&&"object"==typeof e.requestBodyValues&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.responseHeaders||"object"==typeof e.responseHeaders)&&(null==e.responseBody||"string"==typeof e.responseBody)&&(null==e.cause||"object"==typeof e.cause)&&"boolean"==typeof e.isRetryable&&(null==e.data||"object"==typeof e.data)}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};function eV(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}o=eB,Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var eJ="AI_InvalidArgumentError",eG=`vercel.ai.error.${eJ}`,eW=Symbol.for(eG),eK=class extends eq{constructor({message:e,cause:t,argument:r}){super({name:eJ,message:e,cause:t}),this[l]=!0,this.argument=r}static isInstance(e){return eq.hasMarker(e,eG)}};l=eW;var eX="AI_InvalidPromptError",eY=`vercel.ai.error.${eX}`,eQ=Symbol.for(eY),e0=class extends eq{constructor({prompt:e,message:t,cause:r}){super({name:eX,message:`Invalid prompt: ${t}`,cause:r}),this[u]=!0,this.prompt=e}static isInstance(e){return eq.hasMarker(e,eY)}static isInvalidPromptError(e){return e instanceof Error&&e.name===eX&&null!=prompt}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};u=eQ,Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var e1="AI_JSONParseError",e4=`vercel.ai.error.${e1}`,e9=Symbol.for(e4),e2=class extends eq{constructor({text:e,cause:t}){super({name:e1,message:`JSON parsing failed: Text: ${e}.
Error message: ${eV(t)}`,cause:t}),this[c]=!0,this.text=e}static isInstance(e){return eq.hasMarker(e,e4)}static isJSONParseError(e){return e instanceof Error&&e.name===e1&&"text"in e&&"string"==typeof e.text}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};c=e9,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError");var e3="AI_NoSuchModelError",e6=`vercel.ai.error.${e3}`,e7=Symbol.for(e6),e8=class extends eq{constructor({errorName:e=e3,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[d]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return eq.hasMarker(e,e6)}static isNoSuchModelError(e){return e instanceof Error&&e.name===e3&&"string"==typeof e.modelId&&"string"==typeof e.modelType}toJSON(){return{name:this.name,message:this.message,stack:this.stack,modelId:this.modelId,modelType:this.modelType}}};d=e7,Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var e5="AI_TypeValidationError",te=`vercel.ai.error.${e5}`,tt=Symbol.for(te),tr=class e extends eq{constructor({value:e,cause:t}){super({name:e5,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${eV(t)}`,cause:t}),this[p]=!0,this.value=e}static isInstance(e){return eq.hasMarker(e,te)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}static isTypeValidationError(e){return e instanceof Error&&e.name===e5}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};p=tt;var tn="AI_UnsupportedFunctionalityError",ta=`vercel.ai.error.${tn}`,ts=Symbol.for(ta),ti=class extends eq{constructor({functionality:e}){super({name:tn,message:`'${e}' functionality not supported.`}),this[h]=!0,this.functionality=e}static isInstance(e){return eq.hasMarker(e,ta)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===tn&&"string"==typeof e.functionality}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};function to(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(to):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&to(t)))}h=ts;let tl=(e,t=21)=>(r=t)=>{let n="",a=0|r;for(;a--;)n+=e[Math.random()*e.length|0];return n};var tu=({prefix:e,size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let a=tl(r,t);if(null==e)return a;if(r.includes(n))throw new eK({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return t=>`${e}${n}${a(t)}`};tu();var tc=Symbol.for("vercel.ai.validator");function td({value:e,schema:t}){let r="object"==typeof t&&null!==t&&tc in t&&!0===t[tc]&&"validate"in t?t:{[tc]:!0,validate:e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}};try{if(null==r.validate)return{success:!0,value:e};let t=r.validate(e);if(t.success)return t;return{success:!1,error:tr.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:tr.wrap({value:e,cause:t})}}}var{btoa:tp,atob:th}=globalThis;function tf(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return tp(t)}var tm=r(9487),tg=r(153),ty=Object.defineProperty,tv=(e,t)=>{for(var r in t)ty(e,r,{get:t[r],enumerable:!0})};async function tb(e){return void 0===e?Promise.resolve():new Promise(t=>setTimeout(t,e))}var t_="AI_RetryError",tw=`vercel.ai.error.${t_}`,tx=Symbol.for(tw),tS=class extends eq{constructor({message:e,reason:t,errors:r}){super({name:t_,message:e}),this[f]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return eq.hasMarker(e,tw)}static isRetryError(e){return e instanceof Error&&e.name===t_&&"string"==typeof e.reason&&Array.isArray(e.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};f=tx;var tk=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>tE(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function tE(e,{maxRetries:t,delayInMs:r,backoffFactor:n},a=[]){try{return await e()}catch(u){var s;if((s=u)instanceof Error&&("AbortError"===s.name||"TimeoutError"===s.name)||0===t)throw u;let i=null==u?"unknown error":"string"==typeof u?u:u instanceof Error?u.message:JSON.stringify(u),o=[...a,u],l=o.length;if(l>t)throw new tS({message:`Failed after ${l} attempts. Last error: ${i}`,reason:"maxRetriesExceeded",errors:o});if(u instanceof Error&&ez.isAPICallError(u)&&!0===u.isRetryable&&l<=t)return await tb(r),tE(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},o);if(1===l)throw u;throw new tS({message:`Failed after ${l} attempts with non-retryable error: '${i}'`,reason:"errorNotRetryable",errors:o})}}function tT({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}var tC={startSpan:()=>tA,startActiveSpan:(e,t,r,n)=>"function"==typeof t?t(tA):"function"==typeof r?r(tA):"function"==typeof n?n(tA):void 0},tA={spanContext:()=>tR,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},tR={traceId:"",spanId:"",traceFlags:0};function tP({name:e,tracer:t,attributes:r,fn:n,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await n(e);return a&&e.end(),t}catch(t){try{t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:tg.Q.ERROR,message:t.message})):e.setStatus({code:tg.Q.ERROR})}finally{e.end()}throw t}})}function tI({telemetry:e,attributes:t}){return(null==e?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((t,[r,n])=>{if(void 0===n)return t;if("object"==typeof n&&"input"in n&&"function"==typeof n.input){if((null==e?void 0:e.recordInputs)===!1)return t;let a=n.input();return void 0===a?t:{...t,[r]:a}}if("object"==typeof n&&"output"in n&&"function"==typeof n.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let a=n.output();return void 0===a?t:{...t,[r]:a}}return{...t,[r]:n}},{})}var tO="AI_DownloadError",tN=`vercel.ai.error.${tO}`,t$=Symbol.for(tN),tj=class extends eq{constructor({url:e,statusCode:t,statusText:r,cause:n,message:a=null==n?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:tO,message:a,cause:n}),this[m]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return eq.hasMarker(e,tN)}static isDownloadError(e){return e instanceof Error&&e.name===tO&&"string"==typeof e.url&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.statusText||"string"==typeof e.statusText)}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};async function tM({url:e,fetchImplementation:t=fetch}){var r;let n=e.toString();try{let e=await t(n);if(!e.ok)throw new tj({url:n,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mimeType:null!=(r=e.headers.get("content-type"))?r:void 0}}catch(e){if(tj.isInstance(e))throw e;throw new tj({url:n,cause:e})}}m=t$;var tL=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}],tD="AI_InvalidDataContentError",tU=`vercel.ai.error.${tD}`,tZ=Symbol.for(tU),tq=class extends eq{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:tD,message:r,cause:t}),this[g]=!0,this.content=e}static isInstance(e){return eq.hasMarker(e,tU)}static isInvalidDataContentError(e){return e instanceof Error&&e.name===tD&&null!=e.content}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};g=tZ;var tF=H.G0([H.Z_(),H.Pp(Uint8Array),H.Pp(ArrayBuffer),H.PG(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function tH(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return function(e){let t=th(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}(e)}catch(t){throw new tq({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new tq({content:e})}var tB="AI_InvalidMessageRoleError",tz=`vercel.ai.error.${tB}`,tV=Symbol.for(tz),tJ=class extends eq{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:tB,message:t}),this[y]=!0,this.role=e}static isInstance(e){return eq.hasMarker(e,tz)}static isInvalidMessageRoleError(e){return e instanceof Error&&e.name===tB&&"string"==typeof e.role}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};async function tG({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=tM}){let a=await tW(e.messages,n,t,r);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>(function(e,t){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerMetadata:e.experimental_providerMetadata};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"user",content:e.content.map(e=>(function(e,t){let r,n,a;if("text"===e.type)return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let s=e.mimeType,i=e.type;switch(i){case"image":r=e.image;break;case"file":r=e.data;break;default:throw Error(`Unsupported part type: ${i}`)}try{n="string"==typeof r?new URL(r):r}catch(e){n=r}if(n instanceof URL){if("data:"===n.protocol){let{mimeType:e,base64Content:t}=function(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}(n.toString());if(null==e||null==t)throw Error(`Invalid data URL format in part ${i}`);s=e,a=tH(t)}else{let e=t[n.toString()];e?(a=e.data,null!=s||(s=e.mimeType)):a=n}}else a=tH(n);switch(i){case"image":return null==s&&a instanceof Uint8Array&&(s=function(e){for(let{bytes:t,mimeType:r}of tL)if(e.length>=t.length&&t.every((t,r)=>e[r]===t))return r}(a)),{type:"image",image:a,mimeType:s,providerMetadata:e.experimental_providerMetadata};case"file":var o;if(null==s)throw Error("Mime type is missing for file part");return{type:"file",data:a instanceof Uint8Array?"string"==typeof(o=a)?o:o instanceof ArrayBuffer?tf(new Uint8Array(o)):tf(o):a,mimeType:s,providerMetadata:e.experimental_providerMetadata}}})(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerMetadata:e.experimental_providerMetadata};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text).map(e=>{let{experimental_providerMetadata:t,...r}=e;return{...r,providerMetadata:t}}),providerMetadata:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result,content:e.experimental_content,isError:e.isError,providerMetadata:e.experimental_providerMetadata})),providerMetadata:e.experimental_providerMetadata};default:throw new tJ({role:r})}})(e,a))]}async function tW(e,t,r,n){let a=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).filter(e=>!("image"===e.type&&!0===r)).map(e=>"image"===e.type?e.image:e.data).map(e=>"string"==typeof e&&(e.startsWith("http:")||e.startsWith("https:"))?new URL(e):e).filter(e=>e instanceof URL).filter(e=>!n(e));return Object.fromEntries((await Promise.all(a.map(async e=>({url:e,data:await t({url:e})})))).map(({url:e,data:t})=>[e.toString(),t]))}y=tV;var tK="AI_InvalidArgumentError",tX=`vercel.ai.error.${tK}`,tY=Symbol.for(tX),tQ=class extends eq{constructor({parameter:e,value:t,message:r}){super({name:tK,message:`Invalid argument for parameter ${e}: ${r}`}),this[v]=!0,this.parameter=e,this.value=t}static isInstance(e){return eq.hasMarker(e,tX)}static isInvalidArgumentError(e){return e instanceof Error&&e.name===tK&&"string"==typeof e.parameter&&"string"==typeof e.value}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};v=tY;var t0=H.Vo(()=>H.G0([H.lB(),H.Z_(),H.Rx(),H.O7(),H.IM(H.Z_(),t0),H.IX(t0)])),t1=H.IM(H.Z_(),H.IM(H.Z_(),t0)),t4=H.IX(H.G0([H.Ry({type:H.i0("text"),text:H.Z_()}),H.Ry({type:H.i0("image"),data:H.Z_(),mimeType:H.Z_().optional()})])),t9=H.Ry({type:H.i0("text"),text:H.Z_(),experimental_providerMetadata:t1.optional()}),t2=H.Ry({type:H.i0("image"),image:H.G0([tF,H.Pp(URL)]),mimeType:H.Z_().optional(),experimental_providerMetadata:t1.optional()}),t3=H.Ry({type:H.i0("file"),data:H.G0([tF,H.Pp(URL)]),mimeType:H.Z_(),experimental_providerMetadata:t1.optional()}),t6=H.Ry({type:H.i0("tool-call"),toolCallId:H.Z_(),toolName:H.Z_(),args:H._4()}),t7=H.Ry({type:H.i0("tool-result"),toolCallId:H.Z_(),toolName:H.Z_(),result:H._4(),content:t4.optional(),isError:H.O7().optional(),experimental_providerMetadata:t1.optional()}),t8=H.Ry({role:H.i0("system"),content:H.Z_(),experimental_providerMetadata:t1.optional()}),t5=H.Ry({role:H.i0("user"),content:H.G0([H.Z_(),H.IX(H.G0([t9,t2,t3]))]),experimental_providerMetadata:t1.optional()}),re=H.Ry({role:H.i0("assistant"),content:H.G0([H.Z_(),H.IX(H.G0([t9,t6]))]),experimental_providerMetadata:t1.optional()}),rt=H.Ry({role:H.i0("tool"),content:H.IX(t7),experimental_providerMetadata:t1.optional()}),rr=H.G0([t8,t5,re,rt]);function rn(e){return"object"==typeof e&&null!==e&&("function"===e.role||"data"===e.role||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":"object"==typeof e&&null!==e&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e)?"has-core-specific-parts":"object"==typeof e&&null!==e&&"role"in e&&"content"in e&&"string"==typeof e.content&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var ra="AI_MessageConversionError",rs=`vercel.ai.error.${ra}`,ri=Symbol.for(rs),ro=class extends eq{constructor({originalMessage:e,message:t}){super({name:ra,message:t}),this[b]=!0,this.originalMessage=e}static isInstance(e){return eq.hasMarker(e,rs)}};b=ri;function rl(e,{contentType:t,dataStreamVersion:r}){var n;let a=new Headers(null!=(n=null==e?void 0:e.headers)?n:{});return a.has("Content-Type")||a.set("Content-Type",t),void 0!==r&&a.set("X-Vercel-AI-Data-Stream",r),a}var ru="AI_NoObjectGeneratedError",rc=`vercel.ai.error.${ru}`,rd=Symbol.for(rc),rp=class extends eq{constructor({message:e="No object generated."}={}){super({name:ru,message:e}),this[_]=!0}static isInstance(e){return eq.hasMarker(e,rc)}static isNoObjectGeneratedError(e){return e instanceof Error&&e.name===ru}toJSON(){return{name:this.name,cause:this.cause,message:this.message,stack:this.stack}}};function rh(e,t){let r=e.pipeThrough(new TransformStream(t));return r[Symbol.asyncIterator]=()=>{let e=r.getReader();return{async next(){let{done:t,value:r}=await e.read();return t?{done:!0,value:void 0}:{done:!1,value:r}}}},r}_=rd;function rf(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}}tu({prefix:"aiobj",size:24});function rm(){var e,t;return null!=(t=null==(e=null==globalThis?void 0:globalThis.performance)?void 0:e.now())?t:Date.now()}function rg(e,{contentType:t,dataStreamVersion:r}){let n={};if((null==e?void 0:e.headers)!=null)for(let[t,r]of Object.entries(e.headers))n[t]=r;return null==n["Content-Type"]&&(n["Content-Type"]=t),void 0!==r&&(n["X-Vercel-AI-Data-Stream"]=r),n}function ry({response:e,status:t,statusText:r,headers:n,stream:a}){e.writeHead(null!=t?t:200,r,n);let s=a.getReader();(async()=>{try{for(;;){let{done:t,value:r}=await s.read();if(t)break;e.write(r)}}catch(e){throw e}finally{e.end()}})()}tu({prefix:"aiobj",size:24});var rv="AI_InvalidToolArgumentsError",rb=`vercel.ai.error.${rv}`,r_=Symbol.for(rb),rw=class extends eq{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${eV(r)}`}){super({name:rv,message:n,cause:r}),this[w]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return eq.hasMarker(e,rb)}static isInvalidToolArgumentsError(e){return e instanceof Error&&e.name===rv&&"string"==typeof e.toolName&&"string"==typeof e.toolArgs}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,toolName:this.toolName,toolArgs:this.toolArgs}}};w=r_;var rx="AI_NoSuchToolError",rS=`vercel.ai.error.${rx}`,rk=Symbol.for(rS),rE=class extends eq{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:rx,message:r}),this[x]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return eq.hasMarker(e,rS)}static isNoSuchToolError(e){return e instanceof Error&&e.name===rx&&"toolName"in e&&void 0!=e.toolName&&"string"==typeof e.name}toJSON(){return{name:this.name,message:this.message,stack:this.stack,toolName:this.toolName,availableTools:this.availableTools}}};x=rk;var rT=/^([\s\S]*?)(\s+)(\S*)$/;function rC(e,t){let r,n;let a=e.getReader(),s=t.getReader(),i=!1,o=!1;async function l(e){try{null==r&&(r=a.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==n&&(n=s.read());let t=await n;n=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(i){await u(e);return}if(o){await l(e);return}null==r&&(r=a.read()),null==n&&(n=s.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:a})),n.then(e=>({result:e,reader:s}))]);t.done||e.enqueue(t.value),c===a?(r=void 0,t.done&&(await u(e),i=!0)):(n=void 0,t.done&&(o=!0,await l(e)))}catch(t){e.error(t)}},cancel(){a.cancel(),s.cancel()}})}tu({prefix:"aitxt",size:24});var rA=tu({prefix:"aitxt",size:24});async function rR({model:e,tools:t,toolChoice:r,system:n,prompt:a,messages:s,maxRetries:i,abortSignal:o,headers:l,maxToolRoundtrips:u=0,maxSteps:c=null!=u?u+1:1,experimental_continueSteps:d=!1,experimental_telemetry:p,experimental_providerMetadata:h,experimental_toolCallStreaming:f=!1,experimental_activeTools:m,onChunk:g,onFinish:y,onStepFinish:v,_internal:{now:b=rm,generateId:_=rA,currentDate:w=()=>new Date}={},...x}){if(c<1)throw new tQ({parameter:"maxSteps",value:c,message:"maxSteps must be at least 1"});let S=function({model:e,settings:t,telemetry:r,headers:n}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(a=null==r?void 0:r.metadata)?a:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=n?n:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}({model:e,telemetry:p,headers:l,settings:{...x,maxRetries:i}}),E=function({isEnabled:e=!1,tracer:t}={}){return e?t||tm.g.getTracer("ai"):tC}(p),T=function({prompt:e,tools:t}){if(null==e.prompt&&null==e.messages)throw new e0({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new e0({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new e0({prompt:e,message:"system must be a string"});if(null!=e.prompt){if("string"!=typeof e.prompt)throw new e0({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(null!=e.messages){let r=function(e){if(!Array.isArray(e))return"other";if(0===e.length)return"messages";let t=e.map(rn);return t.some(e=>"has-ui-specific-parts"===e)?"ui-messages":t.every(e=>"has-core-specific-parts"===e||"message"===e)?"messages":"other"}(e.messages);if("other"===r)throw new e0({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let n="ui-messages"===r?function(e,t){var r;let n=null!=(r=null==t?void 0:t.tools)?r:{},a=[];for(let t of e){let{role:e,content:r,toolInvocations:s,experimental_attachments:i}=t;switch(e){case"system":a.push({role:"system",content:r});break;case"user":a.push({role:"user",content:i?[{type:"text",text:r},...function(e){var t,r,n;let a=[];for(let s of e){let e;try{e=new URL(s.url)}catch(e){throw Error(`Invalid URL: ${s.url}`)}switch(e.protocol){case"http:":case"https:":if(null==(t=s.contentType)?void 0:t.startsWith("image/"))a.push({type:"image",image:e});else{if(!s.contentType)throw Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:e,mimeType:s.contentType})}break;case"data:":{let e,t,i;try{[e,t]=s.url.split(","),i=e.split(";")[0].split(":")[1]}catch(e){throw Error(`Error processing data URL: ${s.url}`)}if(null==i||null==t)throw Error(`Invalid data URL format: ${s.url}`);if(null==(r=s.contentType)?void 0:r.startsWith("image/"))a.push({type:"image",image:tH(t)});else if(null==(n=s.contentType)?void 0:n.startsWith("text/"))a.push({type:"text",text:function(e){try{return new TextDecoder().decode(e)}catch(e){throw Error("Error decoding Uint8Array to text")}}(tH(t))});else{if(!s.contentType)throw Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:t,mimeType:s.contentType})}break}default:throw Error(`Unsupported URL protocol: ${e.protocol}`)}}return a}(i)]:r});break;case"assistant":if(null==s){a.push({role:"assistant",content:r});break}a.push({role:"assistant",content:[{type:"text",text:r},...s.map(({toolCallId:e,toolName:t,args:r})=>({type:"tool-call",toolCallId:e,toolName:t,args:r}))]}),a.push({role:"tool",content:s.map(e=>{if(!("result"in e))throw new ro({originalMessage:t,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:r,toolName:a,result:s}=e,i=n[a];return(null==i?void 0:i.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:r,toolName:a,result:i.experimental_toToolResultContent(s),experimental_content:i.experimental_toToolResultContent(s)}:{type:"tool-result",toolCallId:r,toolName:a,result:s}})});break;case"function":case"data":case"tool":break;default:throw new ro({originalMessage:t,message:`Unsupported role: ${e}`})}}return a}(e.messages,{tools:t}):e.messages,a=td({value:n,schema:H.IX(rr)});if(!a.success)throw new e0({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:n,system:e.system}}throw Error("unreachable")}({prompt:{system:n,prompt:a,messages:s},tools:t});return tP({name:"ai.streamText",attributes:tI({telemetry:p,attributes:{...tT({operationId:"ai.streamText",telemetry:p}),...S,"ai.prompt":{input:()=>JSON.stringify({system:n,prompt:a,messages:s})},"ai.settings.maxSteps":c}}),tracer:E,endWhenDone:!1,fn:async n=>{let a=tk({maxRetries:i}),s=async({responseMessages:n})=>{let s=0===n.length?T.type:"messages",i=await tG({prompt:{type:s,system:T.system,messages:[...T.messages,...n]},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:e.supportsUrl}),u={type:"regular",...function({tools:e,toolChoice:t,activeTools:r}){return null!=e&&Object.keys(e).length>0?{tools:(null!=r?Object.entries(e).filter(([e])=>r.includes(e)):Object.entries(e)).map(([e,t])=>{let r=t.type;switch(r){case void 0:case"function":return{type:"function",name:e,description:t.description,parameters:eL(t.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:e,id:t.id,args:t.args};default:throw Error(`Unsupported tool type: ${r}`)}}),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:t,toolChoice:r,activeTools:m})},{result:{stream:c,warnings:d,rawResponse:g,request:y},doStreamSpan:v,startTimestampMs:_}=await a(()=>tP({name:"ai.streamText.doStream",attributes:tI({telemetry:p,attributes:{...tT({operationId:"ai.streamText.doStream",telemetry:p}),...S,"ai.prompt.format":{input:()=>s},"ai.prompt.messages":{input:()=>JSON.stringify(i)},"ai.prompt.tools":{input:()=>{var e;return null==(e=u.tools)?void 0:e.map(e=>JSON.stringify(e))}},"ai.prompt.toolChoice":{input:()=>null!=u.toolChoice?JSON.stringify(u.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":x.frequencyPenalty,"gen_ai.request.max_tokens":x.maxTokens,"gen_ai.request.presence_penalty":x.presencePenalty,"gen_ai.request.stop_sequences":x.stopSequences,"gen_ai.request.temperature":x.temperature,"gen_ai.request.top_k":x.topK,"gen_ai.request.top_p":x.topP}}),tracer:E,endWhenDone:!1,fn:async t=>({startTimestampMs:b(),doStreamSpan:t,result:await e.doStream({mode:u,...function({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:i,seed:o,maxRetries:l}){if(null!=e){if(!Number.isInteger(e))throw new tQ({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new tQ({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new tQ({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new tQ({parameter:"topP",value:r,message:"topP must be a number"});if(null!=n&&"number"!=typeof n)throw new tQ({parameter:"topK",value:n,message:"topK must be a number"});if(null!=a&&"number"!=typeof a)throw new tQ({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(null!=s&&"number"!=typeof s)throw new tQ({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(null!=o&&!Number.isInteger(o))throw new tQ({parameter:"seed",value:o,message:"seed must be an integer"});if(null!=l){if(!Number.isInteger(l))throw new tQ({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new tQ({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:e,temperature:null!=t?t:0,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:null!=i&&i.length>0?i:void 0,seed:o,maxRetries:null!=l?l:2}}(x),inputFormat:s,prompt:i,providerMetadata:h,abortSignal:o,headers:l})})}));return{result:{stream:function({tools:e,generatorStream:t,toolCallStreaming:r,tracer:n,telemetry:a,abortSignal:s}){let i,o=null,l=new ReadableStream({start(e){o=e}}),u={},c=new Set,d=!1;function p(){d&&0===c.size&&(null!=i&&o.enqueue(i),o.close())}let h=new TransformStream({transform(t,l){let d=t.type;switch(d){case"text-delta":case"response-metadata":case"error":l.enqueue(t);break;case"tool-call-delta":r&&(u[t.toolCallId]||(l.enqueue({type:"tool-call-streaming-start",toolCallId:t.toolCallId,toolName:t.toolName}),u[t.toolCallId]=!0),l.enqueue({type:"tool-call-delta",toolCallId:t.toolCallId,toolName:t.toolName,argsTextDelta:t.argsTextDelta}));break;case"tool-call":{let r=t.toolName;if(null==e){o.enqueue({type:"error",error:new rE({toolName:t.toolName})});break}let i=e[r];if(null==i){o.enqueue({type:"error",error:new rE({toolName:t.toolName,availableTools:Object.keys(e)})});break}try{let r=function({toolCall:e,tools:t}){let r=e.toolName;if(null==t)throw new rE({toolName:e.toolName});let n=t[r];if(null==n)throw new rE({toolName:e.toolName,availableTools:Object.keys(t)});let a=eL(n.parameters),s=""===e.args.trim()?td({value:{},schema:a}):function({text:e,schema:t}){try{let r=k.parse(e);if(null==t)return{success:!0,value:r};return td({value:r,schema:t})}catch(t){return{success:!1,error:e2.isJSONParseError(t)?t:new e2({text:e,cause:t})}}}({text:e.args,schema:a});if(!1===s.success)throw new rw({toolName:r,toolArgs:e.args,cause:s.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:s.value}}({toolCall:t,tools:e});if(l.enqueue(r),null!=i.execute){let e=j();c.add(e),tP({name:"ai.toolCall",attributes:tI({telemetry:a,attributes:{...tT({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":r.toolName,"ai.toolCall.id":r.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(r.args)}}}),tracer:n,fn:async t=>i.execute(r.args,{abortSignal:s}).then(n=>{o.enqueue({...r,type:"tool-result",result:n}),c.delete(e),p();try{t.setAttributes(tI({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(n)}}}))}catch(e){}},t=>{o.enqueue({type:"error",error:t}),c.delete(e),p()})})}}catch(e){o.enqueue({type:"error",error:e})}break}case"finish":var h;i={type:"finish",finishReason:t.finishReason,logprobs:t.logprobs,usage:{promptTokens:(h=t.usage).promptTokens,completionTokens:h.completionTokens,totalTokens:h.promptTokens+h.completionTokens},experimental_providerMetadata:t.providerMetadata};break;default:throw Error(`Unhandled chunk type: ${d}`)}},flush(){d=!0,p()}});return new ReadableStream({start:async e=>Promise.all([t.pipeThrough(h).pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){}})),l.pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){e.close()}}))])})}({tools:t,generatorStream:c,toolCallStreaming:f,tracer:E,telemetry:p,abortSignal:o}),warnings:d,request:null!=y?y:{},rawResponse:g},doStreamSpan:v,startTimestampMs:_}},{result:{stream:u,warnings:C,rawResponse:A,request:R},doStreamSpan:P,startTimestampMs:I}=await s({responseMessages:[]});return new rP({stream:u,warnings:C,rawResponse:A,request:R,onChunk:g,onFinish:y,onStepFinish:v,rootSpan:n,doStreamSpan:P,telemetry:p,startTimestampMs:I,maxSteps:c,continueSteps:d,startStep:s,modelId:e.modelId,now:b,currentDate:w,generateId:_,tools:t})}})}var rP=class{constructor({stream:e,warnings:t,rawResponse:r,request:n,onChunk:a,onFinish:s,onStepFinish:i,rootSpan:o,doStreamSpan:l,telemetry:u,startTimestampMs:c,maxSteps:d,continueSteps:p,startStep:h,modelId:f,now:m,currentDate:g,generateId:y,tools:v}){this.warnings=t,this.rawResponse=r;let{resolve:b,promise:_}=rf();this.usage=_;let{resolve:w,promise:x}=rf();this.finishReason=x;let{resolve:S,promise:k}=rf();this.text=k;let{resolve:E,promise:T}=rf();this.toolCalls=T;let{resolve:C,promise:A}=rf();this.toolResults=A;let{resolve:R,promise:P}=rf();this.steps=P;let{resolve:I,promise:O}=rf();this.experimental_providerMetadata=O;let{resolve:N,promise:$}=rf();this.request=$;let{resolve:j,promise:M}=rf();this.response=M;let{resolve:L,promise:D}=rf();this.responseMessages=D;let{stream:U,addStream:Z,close:q}=function(){let e=[],t=null,r=!1,n=async()=>{if(r&&0===e.length){null==t||t.close();return}if(0!==e.length)try{let{value:a,done:s}=await e[0].read();s?(e.shift(),e.length>0?await n():r&&(null==t||t.close())):null==t||t.enqueue(a)}catch(n){null==t||t.error(n),e.shift(),r&&0===e.length&&(null==t||t.close())}};return{stream:new ReadableStream({start(e){t=e},pull:n,async cancel(){for(let t of e)await t.cancel();e=[],r=!0}}),addStream:t=>{if(r)throw Error("Cannot add inner stream: outer stream is closed");e.push(t.getReader())},close:()=>{r=!0,0===e.length&&(null==t||t.close())}}}();this.originalStream=U;let F=[],H=this;!function e({stream:n,startTimestamp:l,doStreamSpan:c,currentStep:_,responseMessages:x,usage:k={promptTokens:0,completionTokens:0,totalTokens:0},stepType:T,previousStepText:A="",stepRequest:P,hasLeadingWhitespace:O}){let $,M;let D=[],U=[],B="unknown",z={promptTokens:0,completionTokens:0,totalTokens:0},V=!0,J="",G="continue"===T?A:"",W={id:y(),timestamp:g(),modelId:f},K="",X=!1,Y=!0,Q=!1;async function ee({controller:e,chunk:t}){e.enqueue(t),J+=t.textDelta,G+=t.textDelta,X=!0,Q=t.textDelta.trimEnd()!==t.textDelta,await (null==a?void 0:a({chunk:t}))}Z(n.pipeThrough(new TransformStream({async transform(e,t){var r,n,s;if(V){let e=m()-l;V=!1,c.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":e,"ai.stream.msToFirstChunk":e}),c.setAttributes({"ai.response.msToFirstChunk":e,"ai.stream.msToFirstChunk":e})}if("text-delta"===e.type&&0===e.textDelta.length)return;let i=e.type;switch(i){case"text-delta":if(p){let r=Y&&O?e.textDelta.trimStart():e.textDelta;if(0===r.length)break;Y=!1;let n=function(e){let t=e.match(rT);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}(K+=r);null!=n&&(K=n.suffix,await ee({controller:t,chunk:{type:"text-delta",textDelta:n.prefix+n.whitespace}}))}else await ee({controller:t,chunk:e});break;case"tool-call":t.enqueue(e),D.push(e),await (null==a?void 0:a({chunk:e}));break;case"tool-result":t.enqueue(e),U.push(e),await (null==a?void 0:a({chunk:e}));break;case"response-metadata":W={id:null!=(r=e.id)?r:W.id,timestamp:null!=(n=e.timestamp)?n:W.timestamp,modelId:null!=(s=e.modelId)?s:W.modelId};break;case"finish":{z=e.usage,B=e.finishReason,$=e.experimental_providerMetadata,M=e.logprobs;let t=m()-l;c.addEvent("ai.stream.finish"),c.setAttributes({"ai.response.msToFinish":t,"ai.response.avgCompletionTokensPerSecond":1e3*z.completionTokens/t});break}case"tool-call-streaming-start":case"tool-call-delta":t.enqueue(e),await (null==a?void 0:a({chunk:e}));break;case"error":t.enqueue(e),B="error";break;default:throw Error(`Unknown chunk type: ${i}`)}},async flush(n){var a;let l=D.length>0?JSON.stringify(D):void 0,f="done";_+1<d&&(p&&"length"===B&&0===D.length?f="continue":D.length>0&&U.length===D.length&&(f="tool-result")),p&&K.length>0&&("continue"!==f||"continue"===T&&!X)&&(await ee({controller:n,chunk:{type:"text-delta",textDelta:K}}),K="");try{c.setAttributes(tI({telemetry:u,attributes:{"ai.response.finishReason":B,"ai.response.text":{output:()=>J},"ai.response.toolCalls":{output:()=>l},"ai.response.id":W.id,"ai.response.model":W.modelId,"ai.response.timestamp":W.timestamp.toISOString(),"ai.usage.promptTokens":z.promptTokens,"ai.usage.completionTokens":z.completionTokens,"ai.finishReason":B,"ai.result.text":{output:()=>J},"ai.result.toolCalls":{output:()=>l},"gen_ai.response.finish_reasons":[B],"gen_ai.response.id":W.id,"gen_ai.response.model":W.modelId,"gen_ai.usage.input_tokens":z.promptTokens,"gen_ai.usage.output_tokens":z.completionTokens}}))}catch(e){}finally{c.end()}if(n.enqueue({type:"step-finish",finishReason:B,usage:z,experimental_providerMetadata:$,logprobs:M,response:{...W},isContinued:"continue"===f}),"continue"===T){let e=x[x.length-1];"string"==typeof e.content?e.content+=J:e.content.push({text:J,type:"text"})}else x.push(...function({text:e="",tools:t,toolCalls:r,toolResults:n}){let a=[];return a.push({role:"assistant",content:[{type:"text",text:e},...r]}),n.length>0&&a.push({role:"tool",content:n.map(e=>{let r=t[e.toolName];return(null==r?void 0:r.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:r.experimental_toToolResultContent(e.result),experimental_content:r.experimental_toToolResultContent(e.result)}:{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result}})}),a}({text:J,tools:null!=v?v:{},toolCalls:D,toolResults:U}));let m={stepType:T,text:J,toolCalls:D,toolResults:U,finishReason:B,usage:z,warnings:H.warnings,logprobs:M,request:P,rawResponse:H.rawResponse,response:{...W,headers:null==(a=H.rawResponse)?void 0:a.headers,messages:JSON.parse(JSON.stringify(x))},experimental_providerMetadata:$,isContinued:"continue"===f};F.push(m),await (null==i?void 0:i(m));let g={promptTokens:k.promptTokens+z.promptTokens,completionTokens:k.completionTokens+z.completionTokens,totalTokens:k.totalTokens+z.totalTokens};if("done"!==f){let{result:t,doStreamSpan:r,startTimestampMs:n}=await h({responseMessages:x});H.warnings=t.warnings,H.rawResponse=t.rawResponse,e({stream:t.stream,startTimestamp:n,doStreamSpan:r,currentStep:_+1,responseMessages:x,usage:g,stepType:f,previousStepText:G,stepRequest:t.request,hasLeadingWhitespace:Q});return}try{n.enqueue({type:"finish",finishReason:B,usage:g,experimental_providerMetadata:$,logprobs:M,response:{...W}}),q(),o.setAttributes(tI({telemetry:u,attributes:{"ai.response.finishReason":B,"ai.response.text":{output:()=>G},"ai.response.toolCalls":{output:()=>l},"ai.usage.promptTokens":g.promptTokens,"ai.usage.completionTokens":g.completionTokens,"ai.finishReason":B,"ai.result.text":{output:()=>G},"ai.result.toolCalls":{output:()=>l}}})),b(g),w(B),S(G),E(D),I($),C(U),N(P),j({...W,headers:null==r?void 0:r.headers,messages:x}),R(F),L(x),await (null==s?void 0:s({finishReason:B,logprobs:M,usage:g,text:G,toolCalls:D,toolResults:U,request:P,rawResponse:r,response:{...W,headers:null==r?void 0:r.headers,messages:x},warnings:t,experimental_providerMetadata:$,steps:F,responseMessages:x}))}catch(e){n.error(e)}finally{o.end()}}})))}({stream:e,startTimestamp:c,doStreamSpan:l,currentStep:0,responseMessages:[],usage:void 0,stepType:"initial",stepRequest:n,hasLeadingWhitespace:!1})}teeStream(){let[e,t]=this.originalStream.tee();return this.originalStream=t,e}get textStream(){return rh(this.teeStream(),{transform(e,t){"text-delta"===e.type?t.enqueue(e.textDelta):"error"===e.type&&t.error(e.error)}})}get fullStream(){return rh(this.teeStream(),{transform(e,t){t.enqueue(e)}})}toAIStream(e={}){return this.toDataStreamInternal({callbacks:e})}toDataStreamInternal({callbacks:e={},getErrorMessage:t=()=>"",sendUsage:r=!0}={}){let n="",a=new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(t,r){if(r.enqueue(t),"text-delta"===t.type){let r=t.textDelta;n+=r,e.onToken&&await e.onToken(r),e.onText&&await e.onText(r)}},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}}),s=new TransformStream({transform:async(e,n)=>{let a=e.type;switch(a){case"text-delta":n.enqueue(ej("text",e.textDelta));break;case"tool-call-streaming-start":n.enqueue(ej("tool_call_streaming_start",{toolCallId:e.toolCallId,toolName:e.toolName}));break;case"tool-call-delta":n.enqueue(ej("tool_call_delta",{toolCallId:e.toolCallId,argsTextDelta:e.argsTextDelta}));break;case"tool-call":n.enqueue(ej("tool_call",{toolCallId:e.toolCallId,toolName:e.toolName,args:e.args}));break;case"tool-result":n.enqueue(ej("tool_result",{toolCallId:e.toolCallId,result:e.result}));break;case"error":n.enqueue(ej("error",t(e.error)));break;case"step-finish":n.enqueue(ej("finish_step",{finishReason:e.finishReason,usage:r?{promptTokens:e.usage.promptTokens,completionTokens:e.usage.completionTokens}:void 0,isContinued:e.isContinued}));break;case"finish":n.enqueue(ej("finish_message",{finishReason:e.finishReason,usage:r?{promptTokens:e.usage.promptTokens,completionTokens:e.usage.completionTokens}:void 0}));break;default:throw Error(`Unknown chunk type: ${a}`)}}});return this.fullStream.pipeThrough(a).pipeThrough(s).pipeThrough(new TextEncoderStream)}pipeAIStreamToResponse(e,t){return this.pipeDataStreamToResponse(e,t)}pipeDataStreamToResponse(e,t){let r=null==t?void 0:"init"in t?t.init:{headers:"headers"in t?t.headers:void 0,status:"status"in t?t.status:void 0,statusText:"statusText"in t?t.statusText:void 0},n=null==t?void 0:"data"in t?t.data:void 0,a=null==t?void 0:"getErrorMessage"in t?t.getErrorMessage:void 0,s=null==t?void 0:"sendUsage"in t?t.sendUsage:void 0;ry({response:e,status:null==r?void 0:r.status,statusText:null==r?void 0:r.statusText,headers:rg(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:n,getErrorMessage:a,sendUsage:s})})}pipeTextStreamToResponse(e,t){ry({response:e,status:null==t?void 0:t.status,statusText:null==t?void 0:t.statusText,headers:rg(t,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toAIStreamResponse(e){return this.toDataStreamResponse(e)}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:null==e?void 0:e.getErrorMessage,sendUsage:null==e?void 0:e.sendUsage});return(null==e?void 0:e.data)?rC(null==e?void 0:e.data.stream,t):t}toDataStreamResponse(e){var t;let r=null==e?void 0:"init"in e?e.init:{headers:"headers"in e?e.headers:void 0,status:"status"in e?e.status:void 0,statusText:"statusText"in e?e.statusText:void 0},n=null==e?void 0:"data"in e?e.data:void 0,a=null==e?void 0:"getErrorMessage"in e?e.getErrorMessage:void 0,s=null==e?void 0:"sendUsage"in e?e.sendUsage:void 0;return new Response(this.toDataStream({data:n,getErrorMessage:a,sendUsage:s}),{status:null!=(t=null==r?void 0:r.status)?t:200,statusText:null==r?void 0:r.statusText,headers:rl(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:null!=(t=null==e?void 0:e.status)?t:200,headers:rl(e,{contentType:"text/plain; charset=utf-8"})})}},rI="AI_NoSuchProviderError",rO=`vercel.ai.error.${rI}`;function rN(e){let t=new TextEncoder,r="",n=e||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(e,a){let s="string"==typeof e?e:e.content;a.enqueue(t.encode(s)),r+=s,n.onToken&&await n.onToken(s),n.onText&&"string"==typeof e&&await n.onText(e)},async flush(){n.onCompletion&&await n.onCompletion(r),!n.onFinal||"experimental_onFunctionCall"in n||await n.onFinal(r)}})}S=Symbol.for(rO);function r$(){let e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:async(r,n)=>{let a=t.decode(r);n.enqueue(e.encode(ej("text",a)))}})}new TextDecoder("utf-8");function rj(e,t){return rM(e,t)}function rM(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e){t.enqueue(e);return}if("event"in e){"on_chat_model_stream"===e.event&&rD(null==(r=e.data)?void 0:r.chunk,t);return}rD(e,t)}})).pipeThrough(rN(t)).pipeThrough(r$())}function rL(e,t){var r;let n=rM(e,null==t?void 0:t.callbacks),a=null==t?void 0:t.data,s=null==t?void 0:t.init;return new Response(a?rC(a.stream,n):n,{status:null!=(r=null==s?void 0:s.status)?r:200,statusText:null==s?void 0:s.statusText,headers:rl(s,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function rD(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function rU(e,t){return(function(e){let t;let r=e[Symbol.asyncIterator](),n=(t=!0,e=>(t&&(e=e.trimStart())&&(t=!1),e));return new ReadableStream({async pull(e){var t;let{value:a,done:s}=await r.next();if(s){e.close();return}let i=n(null!=(t=a.delta)?t:"");i&&e.enqueue(i)}})})(e).pipeThrough(rN(t)).pipeThrough(r$())}function rZ(e,t={}){var r;let{init:n,data:a,callbacks:s}=t,i=rU(e,s);return new Response(a?rC(a.stream,i):i,{status:null!=(r=null==n?void 0:n.status)?r:200,statusText:null==n?void 0:n.statusText,headers:rl(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}tv({},{toAIStream:()=>rj,toDataStream:()=>rM,toDataStreamResponse:()=>rL}),tv({},{toDataStream:()=>rU,toDataStreamResponse:()=>rZ});Symbol("internal_openai_fn_messages"),Response}}]);
//# sourceMappingURL=763.js.map